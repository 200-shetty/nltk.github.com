<?xml version="1.0" encoding="ascii" ?>

<script language="javascript" type="text/javascript">

function astext(node)
{
    return node.innerHTML.replace(/(<([^>]+)>)/ig,"")
                         .replace(/&gt;/ig, ">")
                         .replace(/&lt;/ig, "<")
                         .replace(/&quot;/ig, '"')
                         .replace(/&amp;/ig, "&");
}

function copy_notify(node, bar_color, data)
{
    // The outer box: relative + inline positioning.
    var box1 = document.createElement("div");
    box1.style.position = "relative";
    box1.style.display = "inline";
    box1.style.top = "2em";
    box1.style.left = "1em";
  
    // A shadow for fun
    var shadow = document.createElement("div");
    shadow.style.position = "absolute";
    shadow.style.left = "-1.3em";
    shadow.style.top = "-1.3em";
    shadow.style.background = "#404040";
    
    // The inner box: absolute positioning.
    var box2 = document.createElement("div");
    box2.style.position = "relative";
    box2.style.border = "1px solid #a0a0a0";
    box2.style.left = "-.2em";
    box2.style.top = "-.2em";
    box2.style.background = "white";
    box2.style.padding = ".3em .4em .3em .4em";
    box2.style.fontStyle = "normal";
    box2.style.background = "#f0e0e0";

    node.insertBefore(box1, node.childNodes.item(0));
    box1.appendChild(shadow);
    shadow.appendChild(box2);
    box2.innerHTML="Copied&nbsp;to&nbsp;the&nbsp;clipboard: " +
                   "<pre class='copy-notify'>"+
                   data+"</pre>";
    setTimeout(function() { node.removeChild(box1); }, 1000);

    var elt = node.parentNode.firstChild;
    elt.style.background = "#ffc0c0";
    setTimeout(function() { elt.style.background = bar_color; }, 200);
}

function copy_codeblock_to_clipboard(node)
{
    var data = astext(node)+"\n";
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#40a060", data);
    }
}

function copy_doctest_to_clipboard(node)
{
    var s = astext(node)+"\n   ";
    var data = "";

    var start = 0;
    var end = s.indexOf("\n");
    while (end >= 0) {
        if (s.substring(start, start+4) == ">>> ") {
            data += s.substring(start+4, end+1);
        }
        else if (s.substring(start, start+4) == "... ") {
            data += s.substring(start+4, end+1);
        }
        /*
        else if (end-start > 1) {
            data += "# " + s.substring(start, end+1);
        }*/
        // Grab the next line.
        start = end+1;
        end = s.indexOf("\n", start);
    }
    
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#4060a0", data);
    }
}
    
function copy_text_to_clipboard(data)
{
    if (window.clipboardData) {
        window.clipboardData.setData("Text", data);
        return true;
     }
    else if (window.netscape) {
        // w/ default firefox settings, permission will be denied for this:
        netscape.security.PrivilegeManager
                      .enablePrivilege("UniversalXPConnect");
    
        var clip = Components.classes["@mozilla.org/widget/clipboard;1"]
                      .createInstance(Components.interfaces.nsIClipboard);
        if (!clip) return;
    
        var trans = Components.classes["@mozilla.org/widget/transferable;1"]
                       .createInstance(Components.interfaces.nsITransferable);
        if (!trans) return;
    
        trans.addDataFlavor("text/unicode");
    
        var str = new Object();
        var len = new Object();
    
        var str = Components.classes["@mozilla.org/supports-string;1"]
                     .createInstance(Components.interfaces.nsISupportsString);
        var datacopy=data;
        str.data=datacopy;
        trans.setTransferData("text/unicode",str,datacopy.length*2);
        var clipid=Components.interfaces.nsIClipboard;
    
        if (!clip) return false;
    
        clip.setData(trans,null,clipid.kGlobalClipboard);
        return true;
    }
    return false;
}
//-->
</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ascii" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>Discourse Representation Theory</title>
<style type="text/css">

/*
:Author: Edward Loper, James Curran
:Copyright: This stylesheet has been placed in the public domain.

Stylesheet for use with Docutils.

This stylesheet defines new css classes used by NLTK.

It uses a Python syntax highlighting scheme that matches
the colour scheme used by IDLE, which makes it easier for
beginners to check they are typing things in correctly.
*/

/* Include the standard docutils stylesheet. */
@import url(default.css);

/* Custom inline roles */
span.placeholder    { font-style: italic; font-family: monospace; }
span.example        { font-style: italic; }
span.emphasis       { font-style: italic; }
span.termdef        { font-weight: bold; }
/*span.term           { font-style: italic; }*/
span.category       { font-variant: small-caps; }
span.feature        { font-variant: small-caps; }
span.fval           { font-style: italic; }
span.math           { font-style: italic; }
span.mathit         { font-style: italic; }
span.lex            { font-variant: small-caps; }
span.guide-linecount{ text-align: right; display: block;}

/* Python souce code listings */
span.pysrc-prompt   { color: #9b0000; }
span.pysrc-more     { color: #9b00ff; }
span.pysrc-keyword  { color: #e06000; }
span.pysrc-builtin  { color: #940094; }
span.pysrc-string   { color: #00aa00; }
span.pysrc-comment  { color: #ff0000; }
span.pysrc-output   { color: #0000ff; }
span.pysrc-except   { color: #ff0000; }
span.pysrc-defname  { color: #008080; }


/* Doctest blocks */
pre.doctest         { margin: 0; padding: 0; font-weight: bold; }
div.doctest         { margin: 0 1em 1em 1em; padding: 0; }
table.doctest       { margin: 0; padding: 0;
                      border-top: 1px solid gray;
                      border-bottom: 1px solid gray; }
pre.copy-notify     { margin: 0; padding: 0.2em; font-weight: bold;
                      background-color: #ffffff; }

/* Python source listings */
div.pylisting       { margin: 0 1em 1em 1em; padding: 0; }
table.pylisting     { margin: 0; padding: 0;
                      border-top: 1px solid gray; }
td.caption { border-top: 1px solid black; margin: 0; padding: 0; }
.caption-label { font-weight: bold;  }
td.caption p { margin: 0; padding: 0; font-style: normal;}

table tr td.codeblock { 
  padding: 0.2em ! important; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeffee;
}

table tr td.doctest  { 
  padding: 0.2em; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeeeff;
}

td.codeblock table tr td.copybar {
    background: #40a060; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }
td.doctest table tr td.copybar {
    background: #4060a0; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }

td.pysrc { padding-left: 0.5em; }

img.callout { border-width: 0px; }

table.docutils {
    border-style: solid;
    border-width: 1px;
    margin-top: 6px;
    border-color: grey;
    border-collapse: collapse; }

table.docutils th {
    border-style: none;
    border-width: 1px;
    border-color: grey;
    padding: 0 .5em 0 .5em; }

table.docutils td {
    border-style: none;
    border-width: 1px;
    border-color: grey; 
    padding: 0 .5em 0 .5em; }

table.footnote td { padding: 0; }
table.footnote { border-width: 0; }
table.footnote td { border-width: 0; }
table.footnote th { border-width: 0; }

table.noborder { border-width: 0; }

table.example pre { margin-top: 4px; margin-bottom: 0; }

/* For figures & tables */
p.caption { margin-bottom: 0; }
div.figure { text-align: center; }

/* The index */
div.index { border: 1px solid black;
            background-color: #eeeeee; }
div.index h1 { padding-left: 0.5em; margin-top: 0.5ex;
               border-bottom: 1px solid black; }
ul.index { margin-left: 0.5em; padding-left: 0; }
li.index { list-style-type: none; }
p.index-heading { font-size: 120%; font-style: italic; margin: 0; }
li.index ul { margin-left: 2em; padding-left: 0; }

/* 'Note' callouts */
div.note
{
  border-right:   #87ceeb 1px solid;
  padding-right: 4px;
  border-top: #87ceeb 1px solid;
  padding-left: 4px;
  padding-bottom: 4px;
  margin: 2px 5% 10px;
  border-left: #87ceeb 1px solid;
  padding-top: 4px;
  border-bottom: #87ceeb 1px solid;
  font-style: normal;
  font-family: verdana, arial;
  background-color: #b0c4de;
}

table.avm { border: 0px solid black; width: 0; }
table.avm tbody tr {border: 0px solid black; }
table.avm tbody tr td { padding: 2px; }
table.avm tbody tr td.avm-key { padding: 5px; font-variant: small-caps; }
table.avm tbody tr td.avm-eq { padding: 5px; }
table.avm tbody tr td.avm-val { padding: 5px; font-style: italic; }
p.avm-empty { font-style: normal; }
table.avm colgroup col { border: 0px solid black; }
table.avm tbody tr td.avm-topleft 
    { border-left: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botleft 
    { border-left: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-topright
    { border-right: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botright
    { border-right: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-left
    { border-left: 2px solid #000080; }
table.avm tbody tr td.avm-right
    { border-right: 2px solid #000080; }
table.avm tbody tr td.avm-topbotleft
    { border: 2px solid #000080; border-right: 0px solid black; }
table.avm tbody tr td.avm-topbotright
    { border: 2px solid #000080; border-left: 0px solid black; }
table.avm tbody tr td.avm-ident
    { font-size: 80%; padding: 0; padding-left: 2px; vertical-align: top; }
.avm-pointer
{ border: 1px solid #008000; padding: 1px; color: #008000; 
  background: #c0ffc0; font-style: normal; }

table.gloss { border: 0px solid black; width: 0; }
table.gloss tbody tr { border: 0px solid black; }
table.gloss tbody tr td { border: 0px solid black; }
table.gloss colgroup col { border: 0px solid black; }
table.gloss p { margin: 0; padding: 0; }

table.rst-example { border: 1px solid black; }
table.rst-example tbody tr td { background: #eeeeee; }
table.rst-example thead tr th { background: #c0ffff; }
td.rst-raw { width: 0; }

/* Used by nltk.org/doc/test: */
div.doctest-list { text-align: center; }
table.doctest-list { border: 1px solid black;
  margin-left: auto; margin-right: auto;
}
table.doctest-list tbody tr td { background: #eeeeee;
  border: 1px solid #cccccc; text-align: left; }
table.doctest-list thead tr th { background: #304050; color: #ffffff;
  border: 1px solid #000000;}
table.doctest-list thead tr a { color: #ffffff; }
span.doctest-passed { color: #008000; }
span.doctest-failed { color: #800000; }

</style>
</head>
<body>
<div class="document" id="discourse-representation-theory">
<h1 class="title">Discourse Representation Theory</h1>

<!-- Copyright (C) 2001-2014 NLTK Project -->
<!-- For license information, see LICENSE.TXT -->
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> logic
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.inference <span class="pysrc-keyword">import</span> TableauProver</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="overview">
<h1>1&nbsp;&nbsp;&nbsp;Overview</h1>
<p>A DRS can be created with the <tt class="doctest"><span class="pre">DRS()</span></tt> constructor. This takes two arguments: a list of
discourse referents and list of conditions. .</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.drt <span class="pysrc-keyword">import</span> *
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr = DrtExpression.fromstring
<span class="pysrc-prompt">&gt;&gt;&gt; </span>man_x = dexpr(<span class="pysrc-string">'man(x)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>walk_x = dexpr(<span class="pysrc-string">'walk(x)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>x = dexpr(<span class="pysrc-string">'x'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(DRS([x], [man_x, walk_x]))
<span class="pysrc-output">([x],[man(x), walk(x)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The <tt class="doctest"><span class="pre">parse()</span></tt> method can also be applied directly to DRS
expressions, which allows them to be specified more
easily.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>drs1 = dexpr(<span class="pysrc-string">'([x],[man(x),walk(x)])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(drs1)
<span class="pysrc-output">([x],[man(x), walk(x)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>DRSs can be <em>merged</em> using the <tt class="doctest"><span class="pre">+</span></tt> operator.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>drs2 = dexpr(<span class="pysrc-string">'([y],[woman(y),stop(y)])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>drs3 = drs1 + drs2
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(drs3)
<span class="pysrc-output">(([x],[man(x), walk(x)]) + ([y],[woman(y), stop(y)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(drs3.simplify())
<span class="pysrc-output">([x,y],[man(x), walk(x), woman(y), stop(y)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>We can embed DRSs as components of an <tt class="doctest"><span class="pre">implies</span></tt> condition.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>s = <span class="pysrc-string">'([], [(%s -&gt; %s)])'</span> % (drs1, drs2)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(s))
<span class="pysrc-output">([],[(([x],[man(x), walk(x)]) -&gt; ([y],[woman(y), stop(y)]))])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The <tt class="doctest"><span class="pre">fol()</span></tt> method converts DRSs into FOL formulae.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[man(x), walks(x)])'</span>).fol())
<span class="pysrc-output">exists x.(man(x) &amp; walks(x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])'</span>).fol())
<span class="pysrc-output">all x.(man(x) -&gt; walks(x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>In order to visualize a DRS, the <tt class="doctest"><span class="pre">pprint()</span></tt> method can be use.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>drs3.pprint()
<span class="pysrc-output">  _________     __________</span>
<span class="pysrc-output"> | x       |   | y        |</span>
<span class="pysrc-output">(|---------| + |----------|)</span>
<span class="pysrc-output"> | man(x)  |   | woman(y) |</span>
<span class="pysrc-output"> | walk(x) |   | stop(y)  |</span>
<span class="pysrc-output"> |_________|   |__________|</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="parse-to-semantics">
<h2>1.1&nbsp;&nbsp;&nbsp;Parse to semantics</h2>
<!-- >>> logic._counter._value = 0 -->
<p>DRSs can be used for building compositional semantics in a feature
based grammar. To specify that we want to use DRSs, the appropriate
logic parser needs be passed as a parameter to <tt class="doctest"><span class="pre">load_earley()</span></tt></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.parse <span class="pysrc-keyword">import</span> load_parser
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.drt <span class="pysrc-keyword">import</span> _DrtParser
<span class="pysrc-prompt">&gt;&gt;&gt; </span>parser = load_parser(<span class="pysrc-string">'grammars/book_grammars/drt.fcfg'</span>, trace=0, logic_parser=_DrtParser())
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> tree <span class="pysrc-keyword">in</span> parser.parse(<span class="pysrc-string">'a dog barks'</span>.split()):
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(tree.label()[<span class="pysrc-string">'SEM'</span>].simplify())
<span class="pysrc-more">...</span>
<span class="pysrc-output">([x],[dog(x), bark(x)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Alternatively, a <tt class="doctest"><span class="pre">FeatStructReader</span></tt> can be passed with the <tt class="doctest"><span class="pre">logic_parser</span></tt> set on it</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.featstruct <span class="pysrc-keyword">import</span> FeatStructReader
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.grammar <span class="pysrc-keyword">import</span> FeatStructNonterminal
<span class="pysrc-prompt">&gt;&gt;&gt; </span>parser = load_parser(<span class="pysrc-string">'grammars/book_grammars/drt.fcfg'</span>, trace=0, fstruct_reader=FeatStructReader(fdict_class=FeatStructNonterminal, logic_parser=_DrtParser()))
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> tree <span class="pysrc-keyword">in</span> parser.parse(<span class="pysrc-string">'every girl chases a dog'</span>.split()):
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(tree.label()[<span class="pysrc-string">'SEM'</span>].simplify().normalize())
<span class="pysrc-more">...</span>
<span class="pysrc-output">([],[(([z1],[girl(z1)]) -&gt; ([z2],[dog(z2), chase(z1,z2)]))])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
<div class="section" id="unit-tests">
<h1>2&nbsp;&nbsp;&nbsp;Unit Tests</h1>
<div class="section" id="parser">
<h2>2.1&nbsp;&nbsp;&nbsp;Parser</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x,y],[sees(x,y)])'</span>))
<span class="pysrc-output">([x,y],[sees(x,y)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[man(x), walks(x)])'</span>))
<span class="pysrc-output">([x],[man(x), walks(x)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x.([],[man(x), walks(x)])'</span>))
<span class="pysrc-output">\x.([],[man(x), walks(x)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x.\y.([],[sees(x,y)])'</span>))
<span class="pysrc-output">\x y.([],[sees(x,y)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x,y],[(x = y)])'</span>))
<span class="pysrc-output">([x,y],[(x = y)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x,y],[(x != y)])'</span>))
<span class="pysrc-output">([x,y],[-(x = y)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x.([],[walks(x)])(john)'</span>))
<span class="pysrc-output">(\x.([],[walks(x)]))(john)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\R.\x.([],[big(x,R)])(\y.([],[mouse(y)]))'</span>))
<span class="pysrc-output">(\R x.([],[big(x,R)]))(\y.([],[mouse(y)]))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'(([x],[walks(x)]) + ([y],[runs(y)]))'</span>))
<span class="pysrc-output">(([x],[walks(x)]) + ([y],[runs(y)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'(([x,y],[walks(x), jumps(y)]) + (([z],[twos(z)]) + ([w],[runs(w)])))'</span>))
<span class="pysrc-output">(([x,y],[walks(x), jumps(y)]) + ([z],[twos(z)]) + ([w],[runs(w)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'((([],[walks(x)]) + ([],[twos(x)])) + ([],[runs(x)]))'</span>))
<span class="pysrc-output">(([],[walks(x)]) + ([],[twos(x)]) + ([],[runs(x)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'((([],[walks(x)]) + ([],[runs(x)])) + (([],[threes(x)]) + ([],[fours(x)])))'</span>))
<span class="pysrc-output">(([],[walks(x)]) + ([],[runs(x)]) + ([],[threes(x)]) + ([],[fours(x)]))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'(([],[walks(x)]) -&gt; ([],[runs(x)]))'</span>))
<span class="pysrc-output">(([],[walks(x)]) -&gt; ([],[runs(x)]))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[PRO(x), sees(John,x)])'</span>))
<span class="pysrc-output">([x],[PRO(x), sees(John,x)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[man(x), -([],[walks(x)])])'</span>))
<span class="pysrc-output">([x],[man(x), -([],[walks(x)])])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])'</span>))
<span class="pysrc-output">([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'DRS([x],[walk(x)])'</span>))
<span class="pysrc-output">([x],[walk(x)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'DRS([x][walk(x)])'</span>))
<span class="pysrc-output">([x],[walk(x)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x][walk(x)])'</span>))
<span class="pysrc-output">([x],[walk(x)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="simplify">
<h2>2.2&nbsp;&nbsp;&nbsp;<tt class="doctest"><span class="pre">simplify()</span></tt></h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x.([],[man(x), walks(x)])(john)'</span>).simplify())
<span class="pysrc-output">([],[man(john), walks(john)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x.\y.([z],[dog(z),sees(x,y)])(john)(mary)'</span>).simplify())
<span class="pysrc-output">([z],[dog(z), sees(john,mary)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\R x.([],[big(x,R)])(\y.([],[mouse(y)]))'</span>).simplify())
<span class="pysrc-output">\x.([],[big(x,\y.([],[mouse(y)]))])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'(([x],[walks(x)]) + ([y],[runs(y)]))'</span>).simplify())
<span class="pysrc-output">([x,y],[walks(x), runs(y)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'(([x,y],[walks(x), jumps(y)]) + (([z],[twos(z)]) + ([w],[runs(w)])))'</span>).simplify())
<span class="pysrc-output">([w,x,y,z],[walks(x), jumps(y), twos(z), runs(w)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'((([],[walks(x)]) + ([],[runs(x)]) + ([],[threes(x)]) + ([],[fours(x)])))'</span>).simplify())
<span class="pysrc-output">([],[walks(x), runs(x), threes(x), fours(x)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[man(x)])+([x],[walks(x)])'</span>).simplify() == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'([x,z1],[man(x), walks(z1)])'</span>)
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([y],[boy(y), (([x],[dog(x)]) -&gt; ([],[chase(x,y)]))])+([x],[run(x)])'</span>).simplify() == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'([y,z1],[boy(y), (([x],[dog(x)]) -&gt; ([],[chase(x,y)])), run(z1)])'</span>)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'\Q.(([x],[john(x),walks(x)]) + Q)(([x],[PRO(x),leaves(x)]))'</span>).simplify() == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'([x,z1],[john(x), walks(x), PRO(z1), leaves(z1)])'</span>)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>logic._counter._value = 0
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([],[(([x],[dog(x)]) -&gt; ([e,y],[boy(y), chase(e), subj(e,x), obj(e,y)]))])+([e,x],[PRO(x), run(e), subj(e,x)])'</span>).simplify().normalize().normalize())
<span class="pysrc-output">([e02,z5],[(([z3],[dog(z3)]) -&gt; ([e01,z4],[boy(z4), chase(e01), subj(e01,z3), obj(e01,z4)])), PRO(z5), run(e02), subj(e02,z5)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="fol">
<h2>2.3&nbsp;&nbsp;&nbsp;<tt class="doctest"><span class="pre">fol()</span></tt></h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x,y],[sees(x,y)])'</span>).fol())
<span class="pysrc-output">exists x y.sees(x,y)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[man(x), walks(x)])'</span>).fol())
<span class="pysrc-output">exists x.(man(x) &amp; walks(x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x.([],[man(x), walks(x)])'</span>).fol())
<span class="pysrc-output">\x.(man(x) &amp; walks(x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x y.([],[sees(x,y)])'</span>).fol())
<span class="pysrc-output">\x y.sees(x,y)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\x.([],[walks(x)])(john)'</span>).fol())
<span class="pysrc-output">\x.walks(x)(john)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'\R x.([],[big(x,R)])(\y.([],[mouse(y)]))'</span>).fol())
<span class="pysrc-output">(\R x.big(x,R))(\y.mouse(y))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'(([x],[walks(x)]) + ([y],[runs(y)]))'</span>).fol())
<span class="pysrc-output">(exists x.walks(x) &amp; exists y.runs(y))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'(([],[walks(x)]) -&gt; ([],[runs(x)]))'</span>).fol())
<span class="pysrc-output">(walks(x) -&gt; runs(x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[PRO(x), sees(John,x)])'</span>).fol())
<span class="pysrc-output">exists x.(PRO(x) &amp; sees(John,x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[man(x), -([],[walks(x)])])'</span>).fol())
<span class="pysrc-output">exists x.(man(x) &amp; -walks(x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([],[(([x],[man(x)]) -&gt; ([],[walks(x)]))])'</span>).fol())
<span class="pysrc-output">all x.(man(x) -&gt; walks(x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[man(x) | walks(x)])'</span>).fol())
<span class="pysrc-output">exists x.(man(x) | walks(x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'P(x) + ([x],[walks(x)])'</span>).fol())
<span class="pysrc-output">(P(x) &amp; exists x.walks(x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="resolve-anaphora">
<h2>2.4&nbsp;&nbsp;&nbsp;<tt class="doctest"><span class="pre">resolve_anaphora()</span></tt></h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.drt <span class="pysrc-keyword">import</span> AnaphoraResolutionException</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(resolve_anaphora(dexpr(r<span class="pysrc-string">'([x,y,z],[dog(x), cat(y), walks(z), PRO(z)])'</span>)))
<span class="pysrc-output">([x,y,z],[dog(x), cat(y), walks(z), (z = [x,y])])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(resolve_anaphora(dexpr(r<span class="pysrc-string">'([],[(([x],[dog(x)]) -&gt; ([y],[walks(y), PRO(y)]))])'</span>)))
<span class="pysrc-output">([],[(([x],[dog(x)]) -&gt; ([y],[walks(y), (y = x)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(resolve_anaphora(dexpr(r<span class="pysrc-string">'(([x,y],[]) + ([],[PRO(x)]))'</span>)).simplify())
<span class="pysrc-output">([x,y],[(x = y)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>try: <span class="pysrc-keyword">print</span>(resolve_anaphora(dexpr(r<span class="pysrc-string">'([x],[walks(x), PRO(x)])'</span>)))
<span class="pysrc-more">... </span><span class="pysrc-keyword">except</span> AnaphoraResolutionException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)
<span class="pysrc-output">Variable 'x' does not resolve to anything.</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(resolve_anaphora(dexpr(<span class="pysrc-string">'([e01,z6,z7],[boy(z6), PRO(z7), run(e01), subj(e01,z7)])'</span>)))
<span class="pysrc-output">([e01,z6,z7],[boy(z6), (z7 = z6), run(e01), subj(e01,z7)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="equiv">
<h2>2.5&nbsp;&nbsp;&nbsp;<tt class="doctest"><span class="pre">equiv()</span></tt>:</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a = dexpr(r<span class="pysrc-string">'([x],[man(x), walks(x)])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>b = dexpr(r<span class="pysrc-string">'([x],[walks(x), man(x)])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a.equiv(b, TableauProver()))
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace">
<h2>2.6&nbsp;&nbsp;&nbsp;<tt class="doctest"><span class="pre">replace()</span></tt>:</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a = dexpr(r<span class="pysrc-string">'a'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>w = dexpr(r<span class="pysrc-string">'w'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>x = dexpr(r<span class="pysrc-string">'x'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>y = dexpr(r<span class="pysrc-string">'y'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>z = dexpr(r<span class="pysrc-string">'z'</span>)</pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace-bound">
<h2>2.7&nbsp;&nbsp;&nbsp;replace bound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(x.variable, a, False))
<span class="pysrc-output">([x],[give(x,y,z)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(x.variable, a, True))
<span class="pysrc-output">([a],[give(a,y,z)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace-unbound">
<h2>2.8&nbsp;&nbsp;&nbsp;replace unbound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(y.variable, a, False))
<span class="pysrc-output">([x],[give(x,a,z)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(y.variable, a, True))
<span class="pysrc-output">([x],[give(x,a,z)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace-unbound-with-bound">
<h2>2.9&nbsp;&nbsp;&nbsp;replace unbound with bound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(y.variable, x, False) == \
<span class="pysrc-more">... </span>dexpr(<span class="pysrc-string">'([z1],[give(z1,x,z)])'</span>)
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(y.variable, x, True) == \
<span class="pysrc-more">... </span>dexpr(<span class="pysrc-string">'([z1],[give(z1,x,z)])'</span>)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace-unbound-with-unbound">
<h2>2.10&nbsp;&nbsp;&nbsp;replace unbound with unbound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(y.variable, z, False))
<span class="pysrc-output">([x],[give(x,z,z)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[give(x,y,z)])'</span>).replace(y.variable, z, True))
<span class="pysrc-output">([x],[give(x,z,z)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="id1">
<h2>2.11&nbsp;&nbsp;&nbsp;replace unbound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,z)])'</span>).replace(z.variable, a, False))
<span class="pysrc-output">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,z)])'</span>).replace(z.variable, a, True))
<span class="pysrc-output">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="id2">
<h2>2.12&nbsp;&nbsp;&nbsp;replace bound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,z)])'</span>).replace(x.variable, a, False))
<span class="pysrc-output">(([x],[P(x,y,z)]) + ([y],[Q(x,y,z)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,z)])'</span>).replace(x.variable, a, True))
<span class="pysrc-output">(([a],[P(a,y,z)]) + ([y],[Q(a,y,z)]))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="id3">
<h2>2.13&nbsp;&nbsp;&nbsp;replace unbound with unbound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,z)])'</span>).replace(z.variable, a, False))
<span class="pysrc-output">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,z)])'</span>).replace(z.variable, a, True))
<span class="pysrc-output">(([x],[P(x,y,a)]) + ([y],[Q(x,y,a)]))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace-unbound-with-bound-on-same-side">
<h2>2.14&nbsp;&nbsp;&nbsp;replace unbound with bound on same side</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,w)])'</span>).replace(z.variable, x, False) == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'(([z1],[P(z1,y,x)]) + ([y],[Q(z1,y,w)]))'</span>)
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,w)])'</span>).replace(z.variable, x, True) == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'(([z1],[P(z1,y,x)]) + ([y],[Q(z1,y,w)]))'</span>)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace-unbound-with-bound-on-other-side">
<h2>2.15&nbsp;&nbsp;&nbsp;replace unbound with bound on other side</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,w)])'</span>).replace(w.variable, x, False) == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'(([z1],[P(z1,y,z)]) + ([y],[Q(z1,y,x)]))'</span>)
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([y],[Q(x,y,w)])'</span>).replace(w.variable, x, True) == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'(([z1],[P(z1,y,z)]) + ([y],[Q(z1,y,x)]))'</span>)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="replace-unbound-with-double-bound">
<h2>2.16&nbsp;&nbsp;&nbsp;replace unbound with double bound</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([x],[Q(x,y,w)])'</span>).replace(z.variable, x, False) == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'(([z1],[P(z1,y,x)]) + ([z1],[Q(z1,y,w)]))'</span>)
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">'([x],[P(x,y,z)])+([x],[Q(x,y,w)])'</span>).replace(z.variable, x, True) == \
<span class="pysrc-more">... </span>dexpr(r<span class="pysrc-string">'(([z1],[P(z1,y,x)]) + ([z1],[Q(z1,y,w)]))'</span>)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="regression-tests">
<h2>2.17&nbsp;&nbsp;&nbsp;regression tests</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>d = dexpr(<span class="pysrc-string">'([x],[A(c), ([y],[B(x,y,z,a)])-&gt;([z],[C(x,y,z,a)])])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d)
<span class="pysrc-output">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>d.pprint()
<span class="pysrc-output"> ____________________________________</span>
<span class="pysrc-output">| x                                  |</span>
<span class="pysrc-output">|------------------------------------|</span>
<span class="pysrc-output">| A(c)                               |</span>
<span class="pysrc-output">|   ____________      ____________   |</span>
<span class="pysrc-output">|  | y          |    | z          |  |</span>
<span class="pysrc-output">| (|------------| -&gt; |------------|) |</span>
<span class="pysrc-output">|  | B(x,y,z,a) |    | C(x,y,z,a) |  |</span>
<span class="pysrc-output">|  |____________|    |____________|  |</span>
<span class="pysrc-output">|____________________________________|</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(str(d))
<span class="pysrc-output">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.fol())
<span class="pysrc-output">exists x.(A(c) &amp; all y.(B(x,y,z,a) -&gt; exists z.C(x,y,z,a)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.replace(Variable(<span class="pysrc-string">'a'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'r'</span>))))
<span class="pysrc-output">([x],[A(c), (([y],[B(x,y,z,r)]) -&gt; ([z],[C(x,y,z,r)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.replace(Variable(<span class="pysrc-string">'x'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'r'</span>))))
<span class="pysrc-output">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.replace(Variable(<span class="pysrc-string">'y'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'r'</span>))))
<span class="pysrc-output">([x],[A(c), (([y],[B(x,y,z,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.replace(Variable(<span class="pysrc-string">'z'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'r'</span>))))
<span class="pysrc-output">([x],[A(c), (([y],[B(x,y,r,a)]) -&gt; ([z],[C(x,y,z,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.replace(Variable(<span class="pysrc-string">'x'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'r'</span>)), True))
<span class="pysrc-output">([r],[A(c), (([y],[B(r,y,z,a)]) -&gt; ([z],[C(r,y,z,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.replace(Variable(<span class="pysrc-string">'y'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'r'</span>)), True))
<span class="pysrc-output">([x],[A(c), (([r],[B(x,r,z,a)]) -&gt; ([z],[C(x,r,z,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d.replace(Variable(<span class="pysrc-string">'z'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'r'</span>)), True))
<span class="pysrc-output">([x],[A(c), (([y],[B(x,y,r,a)]) -&gt; ([r],[C(x,y,r,a)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(d == dexpr(<span class="pysrc-string">'([l],[A(c), ([m],[B(l,m,z,a)])-&gt;([n],[C(l,m,n,a)])])'</span>))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>d = dexpr(<span class="pysrc-string">'([],[([x,y],[B(x,y,h), ([a,b],[dee(x,a,g)])])-&gt;([z,w],[cee(x,y,f), ([c,d],[E(x,c,d,e)])])])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(d.free())
<span class="pysrc-output">[Variable('B'), Variable('E'), Variable('e'), Variable('f'), Variable('g'), Variable('h')]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(d.variables())
<span class="pysrc-output">[Variable('B'), Variable('E'), Variable('e'), Variable('f'), Variable('g'), Variable('h')]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(d.get_refs(True))
<span class="pysrc-output">[Variable('a'), Variable('b'), Variable('c'), Variable('d'), Variable('w'), Variable('x'), Variable('y'), Variable('z')]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(d.conds[0].get_refs(False))
<span class="pysrc-output">[Variable('x'), Variable('y')]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[A(x,y), (x=y), ([],[B(x,y)])-&gt;([],[C(x,y)]), ([x,y],[D(x,y)])-&gt;([],[E(x,y)]), ([],[F(x,y)])-&gt;([x,y],[G(x,y)])])'</span>).eliminate_equality())
<span class="pysrc-output">([x],[A(x,x), (([],[B(x,x)]) -&gt; ([],[C(x,x)])), (([x,y],[D(x,y)]) -&gt; ([],[E(x,y)])), (([],[F(x,x)]) -&gt; ([x,y],[G(x,y)]))])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[A(x,y), (x=y)]) -&gt; ([],[B(x,y)])'</span>).eliminate_equality())
<span class="pysrc-output">(([x],[A(x,x)]) -&gt; ([],[B(x,x)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[A(x,y)]) -&gt; ([],[B(x,y), (x=y)])'</span>).eliminate_equality())
<span class="pysrc-output">(([x,y],[A(x,y)]) -&gt; ([],[B(x,x)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[A(x,y), (x=y), ([],[B(x,y)])])'</span>).eliminate_equality())
<span class="pysrc-output">([x],[A(x,x), ([],[B(x,x)])])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[A(x,y), ([],[B(x,y), (x=y)])])'</span>).eliminate_equality())
<span class="pysrc-output">([x,y],[A(x,y), ([],[B(x,x)])])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([z8 z9 z10],[A(z8), z8=z10, z9=z10, B(z9), C(z10), D(z10)])'</span>).eliminate_equality())
<span class="pysrc-output">([z9],[A(z9), B(z9), C(z9), D(z9)])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[A(x,y), (x=y), ([],[B(x,y)]), ([x,y],[C(x,y)])])'</span>).eliminate_equality())
<span class="pysrc-output">([x],[A(x,x), ([],[B(x,x)]), ([x,y],[C(x,y)])])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[A(x,y)]) + ([],[B(x,y), (x=y)]) + ([],[C(x,y)])'</span>).eliminate_equality())
<span class="pysrc-output">([x],[A(x,x), B(x,x), C(x,x)])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'([x,y],[B(x,y)])+([x,y],[C(x,y)])'</span>).replace(Variable(<span class="pysrc-string">'y'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'x'</span>))))
<span class="pysrc-output">(([x,y],[B(x,y)]) + ([x,y],[C(x,y)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'(([x,y],[B(x,y)])+([],[C(x,y)]))+([],[D(x,y)])'</span>).replace(Variable(<span class="pysrc-string">'y'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'x'</span>))))
<span class="pysrc-output">(([x,y],[B(x,y)]) + ([],[C(x,y)]) + ([],[D(x,y)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'(([],[B(x,y)])+([],[C(x,y)]))+([],[D(x,y)])'</span>).replace(Variable(<span class="pysrc-string">'y'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'x'</span>))))
<span class="pysrc-output">(([],[B(x,x)]) + ([],[C(x,x)]) + ([],[D(x,x)]))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dexpr(<span class="pysrc-string">'(([],[B(x,y), ([x,y],[A(x,y)])])+([],[C(x,y)]))+([],[D(x,y)])'</span>).replace(Variable(<span class="pysrc-string">'y'</span>), DrtVariableExpression(Variable(<span class="pysrc-string">'x'</span>))).normalize())
<span class="pysrc-output">(([],[B(z3,z1), ([z2,z3],[A(z3,z2)])]) + ([],[C(z3,z1)]) + ([],[D(z3,z1)]))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
<div class="section" id="parse-errors">
<h1>3&nbsp;&nbsp;&nbsp;Parse errors</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">def</span> <span class="pysrc-defname">parse_error</span>(drtstring):
<span class="pysrc-more">... </span>    try: dexpr(drtstring)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">except</span> logic.LogicalExpressionException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">''</span>)
<span class="pysrc-output">End of input found.  Expression expected.</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'('</span>)
<span class="pysrc-output">End of input found.  Expression expected.</span>
<span class="pysrc-output">(</span>
<span class="pysrc-output"> ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'()'</span>)
<span class="pysrc-output">Unexpected token: ')'.  Expression expected.</span>
<span class="pysrc-output">()</span>
<span class="pysrc-output"> ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'(['</span>)
<span class="pysrc-output">End of input found.  Expected token ']'.</span>
<span class="pysrc-output">([</span>
<span class="pysrc-output">  ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'([,'</span>)
<span class="pysrc-output">',' is an illegal variable name.  Constants may not be quantified.</span>
<span class="pysrc-output">([,</span>
<span class="pysrc-output">  ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'([x,'</span>)
<span class="pysrc-output">End of input found.  Variable expected.</span>
<span class="pysrc-output">([x,</span>
<span class="pysrc-output">    ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'([]'</span>)
<span class="pysrc-output">End of input found.  Expected token '['.</span>
<span class="pysrc-output">([]</span>
<span class="pysrc-output">   ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'([]['</span>)
<span class="pysrc-output">End of input found.  Expected token ']'.</span>
<span class="pysrc-output">([][</span>
<span class="pysrc-output">    ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'([][,'</span>)
<span class="pysrc-output">Unexpected token: ','.  Expression expected.</span>
<span class="pysrc-output">([][,</span>
<span class="pysrc-output">    ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'([][]'</span>)
<span class="pysrc-output">End of input found.  Expected token ')'.</span>
<span class="pysrc-output">([][]</span>
<span class="pysrc-output">     ^</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>parse_error(r<span class="pysrc-string">'([x][man(x)]) |'</span>)
<span class="pysrc-output">End of input found.  Expression expected.</span>
<span class="pysrc-output">([x][man(x)]) |</span>
<span class="pysrc-output">               ^</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="pretty-printing">
<h1>4&nbsp;&nbsp;&nbsp;Pretty Printing</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">&quot;([],[])&quot;</span>).pprint()
<span class="pysrc-output"> __</span>
<span class="pysrc-output">|  |</span>
<span class="pysrc-output">|--|</span>
<span class="pysrc-output">|__|</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">&quot;([],[([x],[big(x), dog(x)]) -&gt; ([],[bark(x)]) -([x],[walk(x)])])&quot;</span>).pprint()
<span class="pysrc-output"> _____________________________</span>
<span class="pysrc-output">|                             |</span>
<span class="pysrc-output">|-----------------------------|</span>
<span class="pysrc-output">|   ________      _________   |</span>
<span class="pysrc-output">|  | x      |    |         |  |</span>
<span class="pysrc-output">| (|--------| -&gt; |---------|) |</span>
<span class="pysrc-output">|  | big(x) |    | bark(x) |  |</span>
<span class="pysrc-output">|  | dog(x) |    |_________|  |</span>
<span class="pysrc-output">|  |________|                 |</span>
<span class="pysrc-output">|      _________              |</span>
<span class="pysrc-output">|     | x       |             |</span>
<span class="pysrc-output">| __  |---------|             |</span>
<span class="pysrc-output">|   | | walk(x) |             |</span>
<span class="pysrc-output">|     |_________|             |</span>
<span class="pysrc-output">|_____________________________|</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">&quot;([x,y],[x=y]) + ([z],[dog(z), walk(z)])&quot;</span>).pprint()
<span class="pysrc-output">  _________     _________</span>
<span class="pysrc-output"> | x y     |   | z       |</span>
<span class="pysrc-output">(|---------| + |---------|)</span>
<span class="pysrc-output"> | (x = y) |   | dog(z)  |</span>
<span class="pysrc-output"> |_________|   | walk(z) |</span>
<span class="pysrc-output">               |_________|</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">&quot;([],[([x],[]) | ([y],[]) | ([z],[dog(z), walk(z)])])&quot;</span>).pprint()
<span class="pysrc-output"> _______________________________</span>
<span class="pysrc-output">|                               |</span>
<span class="pysrc-output">|-------------------------------|</span>
<span class="pysrc-output">|   ___     ___     _________   |</span>
<span class="pysrc-output">|  | x |   | y |   | z       |  |</span>
<span class="pysrc-output">| (|---| | |---| | |---------|) |</span>
<span class="pysrc-output">|  |___|   |___|   | dog(z)  |  |</span>
<span class="pysrc-output">|                  | walk(z) |  |</span>
<span class="pysrc-output">|                  |_________|  |</span>
<span class="pysrc-output">|_______________________________|</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dexpr(r<span class="pysrc-string">&quot;\P.\Q.(([x],[]) + P(x) + Q(x))(\x.([],[dog(x)]))&quot;</span>).pprint()
<span class="pysrc-output">          ___                        ________</span>
<span class="pysrc-output"> \       | x |                 \    |        |</span>
<span class="pysrc-output"> /\ P Q.(|---| + P(x) + Q(x))( /\ x.|--------|)</span>
<span class="pysrc-output">         |___|                      | dog(x) |</span>
<span class="pysrc-output">                                    |________|</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
</body>
</html>
