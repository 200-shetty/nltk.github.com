<?xml version="1.0" encoding="ascii" ?>

<script language="javascript" type="text/javascript">

function astext(node)
{
    return node.innerHTML.replace(/(<([^>]+)>)/ig,"")
                         .replace(/&gt;/ig, ">")
                         .replace(/&lt;/ig, "<")
                         .replace(/&quot;/ig, '"')
                         .replace(/&amp;/ig, "&");
}

function copy_notify(node, bar_color, data)
{
    // The outer box: relative + inline positioning.
    var box1 = document.createElement("div");
    box1.style.position = "relative";
    box1.style.display = "inline";
    box1.style.top = "2em";
    box1.style.left = "1em";
  
    // A shadow for fun
    var shadow = document.createElement("div");
    shadow.style.position = "absolute";
    shadow.style.left = "-1.3em";
    shadow.style.top = "-1.3em";
    shadow.style.background = "#404040";
    
    // The inner box: absolute positioning.
    var box2 = document.createElement("div");
    box2.style.position = "relative";
    box2.style.border = "1px solid #a0a0a0";
    box2.style.left = "-.2em";
    box2.style.top = "-.2em";
    box2.style.background = "white";
    box2.style.padding = ".3em .4em .3em .4em";
    box2.style.fontStyle = "normal";
    box2.style.background = "#f0e0e0";

    node.insertBefore(box1, node.childNodes.item(0));
    box1.appendChild(shadow);
    shadow.appendChild(box2);
    box2.innerHTML="Copied&nbsp;to&nbsp;the&nbsp;clipboard: " +
                   "<pre class='copy-notify'>"+
                   data+"</pre>";
    setTimeout(function() { node.removeChild(box1); }, 1000);

    var elt = node.parentNode.firstChild;
    elt.style.background = "#ffc0c0";
    setTimeout(function() { elt.style.background = bar_color; }, 200);
}

function copy_codeblock_to_clipboard(node)
{
    var data = astext(node)+"\n";
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#40a060", data);
    }
}

function copy_doctest_to_clipboard(node)
{
    var s = astext(node)+"\n   ";
    var data = "";

    var start = 0;
    var end = s.indexOf("\n");
    while (end >= 0) {
        if (s.substring(start, start+4) == ">>> ") {
            data += s.substring(start+4, end+1);
        }
        else if (s.substring(start, start+4) == "... ") {
            data += s.substring(start+4, end+1);
        }
        /*
        else if (end-start > 1) {
            data += "# " + s.substring(start, end+1);
        }*/
        // Grab the next line.
        start = end+1;
        end = s.indexOf("\n", start);
    }
    
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#4060a0", data);
    }
}
    
function copy_text_to_clipboard(data)
{
    if (window.clipboardData) {
        window.clipboardData.setData("Text", data);
        return true;
     }
    else if (window.netscape) {
        // w/ default firefox settings, permission will be denied for this:
        netscape.security.PrivilegeManager
                      .enablePrivilege("UniversalXPConnect");
    
        var clip = Components.classes["@mozilla.org/widget/clipboard;1"]
                      .createInstance(Components.interfaces.nsIClipboard);
        if (!clip) return;
    
        var trans = Components.classes["@mozilla.org/widget/transferable;1"]
                       .createInstance(Components.interfaces.nsITransferable);
        if (!trans) return;
    
        trans.addDataFlavor("text/unicode");
    
        var str = new Object();
        var len = new Object();
    
        var str = Components.classes["@mozilla.org/supports-string;1"]
                     .createInstance(Components.interfaces.nsISupportsString);
        var datacopy=data;
        str.data=datacopy;
        trans.setTransferData("text/unicode",str,datacopy.length*2);
        var clipid=Components.interfaces.nsIClipboard;
    
        if (!clip) return false;
    
        clip.setData(trans,null,clipid.kGlobalClipboard);
        return true;
    }
    return false;
}
//-->
</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ascii" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>Logical Inference and Model Building</title>
<style type="text/css">

/*
:Author: Edward Loper, James Curran
:Copyright: This stylesheet has been placed in the public domain.

Stylesheet for use with Docutils.

This stylesheet defines new css classes used by NLTK.

It uses a Python syntax highlighting scheme that matches
the colour scheme used by IDLE, which makes it easier for
beginners to check they are typing things in correctly.
*/

/* Include the standard docutils stylesheet. */
@import url(default.css);

/* Custom inline roles */
span.placeholder    { font-style: italic; font-family: monospace; }
span.example        { font-style: italic; }
span.emphasis       { font-style: italic; }
span.termdef        { font-weight: bold; }
/*span.term           { font-style: italic; }*/
span.category       { font-variant: small-caps; }
span.feature        { font-variant: small-caps; }
span.fval           { font-style: italic; }
span.math           { font-style: italic; }
span.mathit         { font-style: italic; }
span.lex            { font-variant: small-caps; }
span.guide-linecount{ text-align: right; display: block;}

/* Python souce code listings */
span.pysrc-prompt   { color: #9b0000; }
span.pysrc-more     { color: #9b00ff; }
span.pysrc-keyword  { color: #e06000; }
span.pysrc-builtin  { color: #940094; }
span.pysrc-string   { color: #00aa00; }
span.pysrc-comment  { color: #ff0000; }
span.pysrc-output   { color: #0000ff; }
span.pysrc-except   { color: #ff0000; }
span.pysrc-defname  { color: #008080; }


/* Doctest blocks */
pre.doctest         { margin: 0; padding: 0; font-weight: bold; }
div.doctest         { margin: 0 1em 1em 1em; padding: 0; }
table.doctest       { margin: 0; padding: 0;
                      border-top: 1px solid gray;
                      border-bottom: 1px solid gray; }
pre.copy-notify     { margin: 0; padding: 0.2em; font-weight: bold;
                      background-color: #ffffff; }

/* Python source listings */
div.pylisting       { margin: 0 1em 1em 1em; padding: 0; }
table.pylisting     { margin: 0; padding: 0;
                      border-top: 1px solid gray; }
td.caption { border-top: 1px solid black; margin: 0; padding: 0; }
.caption-label { font-weight: bold;  }
td.caption p { margin: 0; padding: 0; font-style: normal;}

table tr td.codeblock { 
  padding: 0.2em ! important; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeffee;
}

table tr td.doctest  { 
  padding: 0.2em; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeeeff;
}

td.codeblock table tr td.copybar {
    background: #40a060; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }
td.doctest table tr td.copybar {
    background: #4060a0; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }

td.pysrc { padding-left: 0.5em; }

img.callout { border-width: 0px; }

table.docutils {
    border-style: solid;
    border-width: 1px;
    margin-top: 6px;
    border-color: grey;
    border-collapse: collapse; }

table.docutils th {
    border-style: none;
    border-width: 1px;
    border-color: grey;
    padding: 0 .5em 0 .5em; }

table.docutils td {
    border-style: none;
    border-width: 1px;
    border-color: grey; 
    padding: 0 .5em 0 .5em; }

table.footnote td { padding: 0; }
table.footnote { border-width: 0; }
table.footnote td { border-width: 0; }
table.footnote th { border-width: 0; }

table.noborder { border-width: 0; }

table.example pre { margin-top: 4px; margin-bottom: 0; }

/* For figures & tables */
p.caption { margin-bottom: 0; }
div.figure { text-align: center; }

/* The index */
div.index { border: 1px solid black;
            background-color: #eeeeee; }
div.index h1 { padding-left: 0.5em; margin-top: 0.5ex;
               border-bottom: 1px solid black; }
ul.index { margin-left: 0.5em; padding-left: 0; }
li.index { list-style-type: none; }
p.index-heading { font-size: 120%; font-style: italic; margin: 0; }
li.index ul { margin-left: 2em; padding-left: 0; }

/* 'Note' callouts */
div.note
{
  border-right:   #87ceeb 1px solid;
  padding-right: 4px;
  border-top: #87ceeb 1px solid;
  padding-left: 4px;
  padding-bottom: 4px;
  margin: 2px 5% 10px;
  border-left: #87ceeb 1px solid;
  padding-top: 4px;
  border-bottom: #87ceeb 1px solid;
  font-style: normal;
  font-family: verdana, arial;
  background-color: #b0c4de;
}

table.avm { border: 0px solid black; width: 0; }
table.avm tbody tr {border: 0px solid black; }
table.avm tbody tr td { padding: 2px; }
table.avm tbody tr td.avm-key { padding: 5px; font-variant: small-caps; }
table.avm tbody tr td.avm-eq { padding: 5px; }
table.avm tbody tr td.avm-val { padding: 5px; font-style: italic; }
p.avm-empty { font-style: normal; }
table.avm colgroup col { border: 0px solid black; }
table.avm tbody tr td.avm-topleft 
    { border-left: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botleft 
    { border-left: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-topright
    { border-right: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botright
    { border-right: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-left
    { border-left: 2px solid #000080; }
table.avm tbody tr td.avm-right
    { border-right: 2px solid #000080; }
table.avm tbody tr td.avm-topbotleft
    { border: 2px solid #000080; border-right: 0px solid black; }
table.avm tbody tr td.avm-topbotright
    { border: 2px solid #000080; border-left: 0px solid black; }
table.avm tbody tr td.avm-ident
    { font-size: 80%; padding: 0; padding-left: 2px; vertical-align: top; }
.avm-pointer
{ border: 1px solid #008000; padding: 1px; color: #008000; 
  background: #c0ffc0; font-style: normal; }

table.gloss { border: 0px solid black; width: 0; }
table.gloss tbody tr { border: 0px solid black; }
table.gloss tbody tr td { border: 0px solid black; }
table.gloss colgroup col { border: 0px solid black; }
table.gloss p { margin: 0; padding: 0; }

table.rst-example { border: 1px solid black; }
table.rst-example tbody tr td { background: #eeeeee; }
table.rst-example thead tr th { background: #c0ffff; }
td.rst-raw { width: 0; }

/* Used by nltk.org/doc/test: */
div.doctest-list { text-align: center; }
table.doctest-list { border: 1px solid black;
  margin-left: auto; margin-right: auto;
}
table.doctest-list tbody tr td { background: #eeeeee;
  border: 1px solid #cccccc; text-align: left; }
table.doctest-list thead tr th { background: #304050; color: #ffffff;
  border: 1px solid #000000;}
table.doctest-list thead tr a { color: #ffffff; }
span.doctest-passed { color: #008000; }
span.doctest-failed { color: #800000; }

</style>
</head>
<body>
<div class="document" id="logical-inference-and-model-building">
<h1 class="title">Logical Inference and Model Building</h1>

<!-- Copyright (C) 2001-2014 NLTK Project -->
<!-- For license information, see LICENSE.TXT -->
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk <span class="pysrc-keyword">import</span> *
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.drt <span class="pysrc-keyword">import</span> DrtParser
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> logic
<span class="pysrc-prompt">&gt;&gt;&gt; </span>logic._counter._value = 0</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="introduction">
<h1>1&nbsp;&nbsp;&nbsp;Introduction</h1>
<p>Within the area of automated reasoning, first order theorem proving
and model building (or model generation) have both received much
attention, and have given rise to highly sophisticated techniques. We
focus therefore on providing an NLTK interface to third party tools
for these tasks.  In particular, the module <tt class="doctest"><span class="pre">nltk.inference</span></tt> can be
used to access both theorem provers and model builders.</p>
</div>
<div class="section" id="nltk-interface-to-theorem-provers">
<h1>2&nbsp;&nbsp;&nbsp;NLTK Interface to Theorem Provers</h1>
<p>The main class used to interface with a theorem prover is the <tt class="doctest"><span class="pre">Prover</span></tt>
class, found in <tt class="doctest"><span class="pre">nltk.api</span></tt>.  The <tt class="doctest"><span class="pre">prove()</span></tt> method takes three optional
arguments: a goal, a list of assumptions, and a <tt class="doctest"><span class="pre">verbose</span></tt> boolean to
indicate whether the proof should be printed to the console.  The proof goal
and any assumptions need to be instances of the <tt class="doctest"><span class="pre">Expression</span></tt> class
specified by <tt class="doctest"><span class="pre">nltk.sem.logic</span></tt>.  There are currently three theorem provers
included with NLTK: <tt class="doctest"><span class="pre">Prover9</span></tt>, <tt class="doctest"><span class="pre">TableauProver</span></tt>, and
<tt class="doctest"><span class="pre">ResolutionProver</span></tt>.  The first is an off-the-shelf prover, while the other
two are written in Python and included in the <tt class="doctest"><span class="pre">nltk.inference</span></tt> package.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>lp = LogicParser()
<span class="pysrc-prompt">&gt;&gt;&gt; </span>p1 = lp.parse(<span class="pysrc-string">'man(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>p2 = lp.parse(<span class="pysrc-string">'all x.(man(x) -&gt; mortal(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>c  = lp.parse(<span class="pysrc-string">'mortal(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>Prover9().prove(c, [p1,p2])
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>TableauProver().prove(c, [p1,p2])
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ResolutionProver().prove(c, [p1,p2], verbose=True)
<span class="pysrc-output">[1] {-mortal(socrates)}     A</span>
<span class="pysrc-output">[2] {man(socrates)}         A</span>
<span class="pysrc-output">[3] {-man(z2), mortal(z2)}  A</span>
<span class="pysrc-output">[4] {-man(socrates)}        (1, 3)</span>
<span class="pysrc-output">[5] {mortal(socrates)}      (2, 3)</span>
<span class="pysrc-output">[6] {}                      (1, 5)</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="the-provercommand">
<h1>3&nbsp;&nbsp;&nbsp;The <tt class="doctest"><span class="pre">ProverCommand</span></tt></h1>
<p>A <tt class="doctest"><span class="pre">ProverCommand</span></tt> is a stateful holder for a theorem
prover.  The command stores a theorem prover instance (of type <tt class="doctest"><span class="pre">Prover</span></tt>),
a goal, a list of assumptions, the result of the proof, and a string version
of the entire proof.  Corresponding to the three included <tt class="doctest"><span class="pre">Prover</span></tt>
implementations, there are three <tt class="doctest"><span class="pre">ProverCommand</span></tt> implementations:
<tt class="doctest"><span class="pre">Prover9Command</span></tt>, <tt class="doctest"><span class="pre">TableauProverCommand</span></tt>, and
<tt class="doctest"><span class="pre">ResolutionProverCommand</span></tt>.</p>
<p>The <tt class="doctest"><span class="pre">ProverCommand</span></tt>'s constructor takes its goal and assumptions.  The
<tt class="doctest"><span class="pre">prove()</span></tt> command executes the <tt class="doctest"><span class="pre">Prover</span></tt> and <tt class="doctest"><span class="pre">proof()</span></tt>
returns a String form of the proof
If the <tt class="doctest"><span class="pre">prove()</span></tt> method has not been called,
then the prover command will be unable to display a proof.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover = ResolutionProverCommand(c, [p1,p2])
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.proof()) 
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  File &quot;...&quot;, line 1212, in __run</span>
<span class="pysrc-except">    compileflags, 1) in test.globs</span>
<span class="pysrc-except">  File &quot;&lt;doctest nltk/test/inference.doctest[10]&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="pysrc-except">  File &quot;...&quot;, line ..., in proof</span>
<span class="pysrc-except">    raise LookupError(&quot;You have to call prove() first to get a proof!&quot;)</span>
<span class="pysrc-except">LookupError: You have to call prove() first to get a proof!</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.prove()
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.proof())
<span class="pysrc-output">[1] {-mortal(socrates)}     A</span>
<span class="pysrc-output">[2] {man(socrates)}         A</span>
<span class="pysrc-output">[3] {-man(z4), mortal(z4)}  A</span>
<span class="pysrc-output">[4] {-man(socrates)}        (1, 3)</span>
<span class="pysrc-output">[5] {mortal(socrates)}      (2, 3)</span>
<span class="pysrc-output">[6] {}                      (1, 5)</span>
<span class="pysrc-output"></span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The prover command stores the result of proving so that if <tt class="doctest"><span class="pre">prove()</span></tt> is
called again, then the command can return the result without executing the
prover again.  This allows the user to access the result of the proof without
wasting time re-computing what it already knows.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.prove()
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.prove()
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The assumptions and goal may be accessed using the <tt class="doctest"><span class="pre">assumptions()</span></tt> and
<tt class="doctest"><span class="pre">goal()</span></tt> methods, respectively.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.assumptions()
<span class="pysrc-output">[&lt;ApplicationExpression man(socrates)&gt;, &lt;AllExpression all x.(man(x) -&gt; mortal(x))&gt;]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.goal()
<span class="pysrc-output">&lt;ApplicationExpression mortal(socrates)&gt;</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The assumptions list may be modified using the <tt class="doctest"><span class="pre">add_assumptions()</span></tt> and
<tt class="doctest"><span class="pre">retract_assumptions()</span></tt> methods.  Both methods take a list of <tt class="doctest"><span class="pre">Expression</span></tt>
objects.  Since adding or removing assumptions may change the result of the
proof, the stored result is cleared when either of these methods are called.
That means that <tt class="doctest"><span class="pre">proof()</span></tt> will be unavailable until <tt class="doctest"><span class="pre">prove()</span></tt> is called and
a call to <tt class="doctest"><span class="pre">prove()</span></tt> will execute the theorem prover.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.retract_assumptions([lp.parse(<span class="pysrc-string">'man(socrates)'</span>)])
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.proof()) 
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  File &quot;...&quot;, line 1212, in __run</span>
<span class="pysrc-except">    compileflags, 1) in test.globs</span>
<span class="pysrc-except">  File &quot;&lt;doctest nltk/test/inference.doctest[10]&gt;&quot;, line 1, in &lt;module&gt;</span>
<span class="pysrc-except">  File &quot;...&quot;, line ..., in proof</span>
<span class="pysrc-except">    raise LookupError(&quot;You have to call prove() first to get a proof!&quot;)</span>
<span class="pysrc-except">LookupError: You have to call prove() first to get a proof!</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.prove()
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.proof())
<span class="pysrc-output">[1] {-mortal(socrates)}     A</span>
<span class="pysrc-output">[2] {-man(z6), mortal(z6)}  A</span>
<span class="pysrc-output">[3] {-man(socrates)}        (1, 2)</span>
<span class="pysrc-output"></span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.add_assumptions([lp.parse(<span class="pysrc-string">'man(socrates)'</span>)])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.prove()
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="prover9">
<h1>4&nbsp;&nbsp;&nbsp;Prover9</h1>
<div class="section" id="prover9-installation">
<h2>4.1&nbsp;&nbsp;&nbsp;Prover9 Installation</h2>
<p>You can download Prover9 from <a class="reference external" href="http://www.cs.unm.edu/~mccune/prover9/">http://www.cs.unm.edu/~mccune/prover9/</a>.</p>
<p>Extract the source code into a suitable directory and follow the
instructions in the Prover9 <tt class="doctest"><span class="pre">README.make</span></tt> file to compile the executables.
Install these into an appropriate location; the
<tt class="doctest"><span class="pre">prover9_search</span></tt> variable is currently configured to look in the
following locations:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>p = Prover9()
<span class="pysrc-prompt">&gt;&gt;&gt; </span>p.binary_locations() 
<span class="pysrc-output">['/usr/local/bin/prover9',</span>
<span class="pysrc-output"> '/usr/local/bin/prover9/bin',</span>
<span class="pysrc-output"> '/usr/local/bin',</span>
<span class="pysrc-output"> '/usr/bin',</span>
<span class="pysrc-output"> '/usr/local/prover9',</span>
<span class="pysrc-output"> '/usr/local/share/prover9']</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Alternatively, the environment variable <tt class="doctest"><span class="pre">PROVER9HOME</span></tt> may be configured with
the binary's location.</p>
<p>The path to the correct directory can be set manually in the following
manner:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>config_prover9(path=<span class="pysrc-string">'/usr/local/bin'</span>) 
<span class="pysrc-output">[Found prover9: /usr/local/bin/prover9]</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>If the executables cannot be found, <tt class="doctest"><span class="pre">Prover9</span></tt> will issue a warning message:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>p.prove() 
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  ...</span>
<span class="pysrc-except">LookupError:</span>
<span class="pysrc-except">===========================================================================</span>
<span class="pysrc-except">  NLTK was unable to find the prover9 executable!  Use config_prover9() or</span>
<span class="pysrc-except">  set the PROVER9HOME environment variable.</span>
<span class="pysrc-except">&lt;BLANKLINE&gt;</span>
<span class="pysrc-except">    &gt;&gt; config_prover9('/path/to/prover9')</span>
<span class="pysrc-except">&lt;BLANKLINE&gt;</span>
<span class="pysrc-except">  For more information, on prover9, see:</span>
<span class="pysrc-except">    &lt;http://www.cs.unm.edu/~mccune/prover9/&gt;</span>
<span class="pysrc-except">===========================================================================</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="using-prover9">
<h2>4.2&nbsp;&nbsp;&nbsp;Using Prover9</h2>
<p>The general case in theorem proving is to determine whether <tt class="doctest"><span class="pre">S |- g</span></tt>
holds, where <tt class="doctest"><span class="pre">S</span></tt> is a possibly empty set of assumptions, and <tt class="doctest"><span class="pre">g</span></tt>
is a proof goal.</p>
<p>As mentioned earlier, NLTK input to <tt class="doctest"><span class="pre">Prover9</span></tt> must be
<tt class="doctest"><span class="pre">Expression</span></tt>s of <tt class="doctest"><span class="pre">nltk.sem.logic</span></tt>. A <tt class="doctest"><span class="pre">Prover9</span></tt> instance is
initialized with a proof goal and, possibly, some assumptions. The
<tt class="doctest"><span class="pre">prove()</span></tt> method attempts to find a proof of the goal, given the
list of assumptions (in this case, none).</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>goal = lp.parse(<span class="pysrc-string">'(man(x) &lt;-&gt; --man(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover = Prover9Command(goal)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.prove()
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Given a <tt class="doctest"><span class="pre">ProverCommand</span></tt> instance <tt class="doctest"><span class="pre">prover</span></tt>, the method
<tt class="doctest"><span class="pre">prover.proof()</span></tt> will return a String of the extensive proof information
provided by Prover9, shown in abbreviated form here:</p>
<pre class="literal-block">
============================== Prover9 ===============================
Prover9 (32) version ...
Process ... was started by ... on ...
...
The command was &quot;.../prover9 -f ...&quot;.
============================== end of head ===========================

============================== INPUT =================================

% Reading from file /var/...


formulas(goals).
(all x (man(x) -&gt; man(x))).
end_of_list.

...
============================== end of search =========================

THEOREM PROVED

Exiting with 1 proof.

Process 6317 exit (max_proofs) Mon Jan 21 15:23:28 2008
</pre>
<p>As mentioned earlier, we may want to list some assumptions for
the proof, as shown here.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = lp.parse(<span class="pysrc-string">'mortal(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a1 = lp.parse(<span class="pysrc-string">'all x.(man(x) -&gt; mortal(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover = Prover9Command(g, assumptions=[a1])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.print_assumptions()
<span class="pysrc-output">all x.(man(x) -&gt; mortal(x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>However, the assumptions are not sufficient to derive the goal:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.prove())
<span class="pysrc-output">False</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>So let's add another assumption:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a2 = lp.parse(<span class="pysrc-string">'man(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.add_assumptions([a2])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.print_assumptions()
<span class="pysrc-output">all x.(man(x) -&gt; mortal(x))</span>
<span class="pysrc-output">man(socrates)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.prove())
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>We can also show the assumptions in <tt class="doctest"><span class="pre">Prover9</span></tt> format.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.print_assumptions(output_format=<span class="pysrc-string">'Prover9'</span>)
<span class="pysrc-output">all x (man(x) -&gt; mortal(x))</span>
<span class="pysrc-output">man(socrates)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.print_assumptions(output_format=<span class="pysrc-string">'Spass'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">NameError: Unrecognized value for 'output_format': Spass</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Assumptions can be retracted from the list of assumptions.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.retract_assumptions([a1])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.print_assumptions()
<span class="pysrc-output">man(socrates)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.retract_assumptions([a1])</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Statements can be loaded from a file and parsed. We can then add these
statements as new assumptions.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = lp.parse(<span class="pysrc-string">'all x.(boxer(x) -&gt; -boxerdog(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover = Prover9Command(g)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.prove()
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">import</span> nltk.data
<span class="pysrc-prompt">&gt;&gt;&gt; </span>new = nltk.data.load(<span class="pysrc-string">'grammars/sample_grammars/background0.fol'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> a <span class="pysrc-keyword">in</span> new:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(a)
<span class="pysrc-output">all x.(boxerdog(x) -&gt; dog(x))</span>
<span class="pysrc-output">all x.(boxer(x) -&gt; person(x))</span>
<span class="pysrc-output">all x.-(dog(x) &amp; person(x))</span>
<span class="pysrc-output">exists x.boxer(x)</span>
<span class="pysrc-output">exists x.boxerdog(x)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prover.add_assumptions(new)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.prove())
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prover.proof()) 
<span class="pysrc-output">============================== prooftrans ============================</span>
<span class="pysrc-output">Prover9 (...) version ...</span>
<span class="pysrc-output">Process ... was started by ... on ...</span>
<span class="pysrc-output">...</span>
<span class="pysrc-output">The command was &quot;.../prover9&quot;.</span>
<span class="pysrc-output">============================== end of head ===========================</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">============================== end of input ==========================</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">============================== PROOF =================================</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">% -------- Comments from original proof --------</span>
<span class="pysrc-output">% Proof 1 at ... seconds.</span>
<span class="pysrc-output">% Length of proof is 13.</span>
<span class="pysrc-output">% Level of proof is 4.</span>
<span class="pysrc-output">% Maximum clause weight is 0.000.</span>
<span class="pysrc-output">% Given clauses 0.</span>
<span class="pysrc-output"></span>
<span class="pysrc-output"></span>
<span class="pysrc-output">1 (all x (boxerdog(x) -&gt; dog(x))).  [assumption].</span>
<span class="pysrc-output">2 (all x (boxer(x) -&gt; person(x))).  [assumption].</span>
<span class="pysrc-output">3 (all x -(dog(x) &amp; person(x))).  [assumption].</span>
<span class="pysrc-output">6 (all x (boxer(x) -&gt; -boxerdog(x))).  [goal].</span>
<span class="pysrc-output">8 -boxerdog(x) | dog(x).  [clausify(1)].</span>
<span class="pysrc-output">9 boxerdog(c3).  [deny(6)].</span>
<span class="pysrc-output">11 -boxer(x) | person(x).  [clausify(2)].</span>
<span class="pysrc-output">12 boxer(c3).  [deny(6)].</span>
<span class="pysrc-output">14 -dog(x) | -person(x).  [clausify(3)].</span>
<span class="pysrc-output">15 dog(c3).  [resolve(9,a,8,a)].</span>
<span class="pysrc-output">18 person(c3).  [resolve(12,a,11,a)].</span>
<span class="pysrc-output">19 -person(c3).  [resolve(15,a,14,a)].</span>
<span class="pysrc-output">20 $F.  [resolve(19,a,18,a)].</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">============================== end of proof ==========================</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
<div class="section" id="the-equiv-method">
<h1>5&nbsp;&nbsp;&nbsp;The equiv() method</h1>
<p>One application of the theorem prover functionality is to check if
two Expressions have the same meaning.
The <tt class="doctest"><span class="pre">equiv()</span></tt> method calls a theorem prover to determine whether two
Expressions are logically equivalent.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a = lp.parse(r<span class="pysrc-string">'exists x.(man(x) &amp; walks(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>b = lp.parse(r<span class="pysrc-string">'exists x.(walks(x) &amp; man(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a.equiv(b))
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The same method can be used on Discourse Representation Structures (DRSs).
In this case, each DRS is converted to a first order logic form, and then
passed to the theorem prover.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dp = DrtParser()
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a = dp.parse(r<span class="pysrc-string">'([x],[man(x), walks(x)])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>b = dp.parse(r<span class="pysrc-string">'([x],[walks(x), man(x)])'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a.equiv(b))
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="nltk-interface-to-model-builders">
<h1>6&nbsp;&nbsp;&nbsp;NLTK Interface to Model Builders</h1>
<p>The top-level to model builders is parallel to that for
theorem-provers. The <tt class="doctest"><span class="pre">ModelBuilder</span></tt> interface is located
in <tt class="doctest"><span class="pre">nltk.inference.api</span></tt>.  It is currently only implemented by
<tt class="doctest"><span class="pre">Mace</span></tt>, which interfaces with the Mace4 model builder.</p>
<p>Typically we use a model builder to show that some set of formulas has
a model, and is therefore consistent. One way of doing this is by
treating our candidate set of sentences as assumptions, and leaving
the goal unspecified.
Thus, the following interaction shows how both <tt class="doctest"><span class="pre">{a, c1}</span></tt> and <tt class="doctest"><span class="pre">{a, c2}</span></tt>
are consistent sets, since Mace succeeds in a building a
model for each of them, while <tt class="doctest"><span class="pre">{c1, c2}</span></tt> is inconsistent.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a3 = lp.parse(<span class="pysrc-string">'exists x.(man(x) and walks(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>c1 = lp.parse(<span class="pysrc-string">'mortal(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>c2 = lp.parse(<span class="pysrc-string">'-mortal(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mace = Mace()
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(mace.build_model(None, [a3, c1]))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(mace.build_model(None, [a3, c2]))
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>We can also use the model builder as an adjunct to theorem prover.
Let's suppose we are trying to prove <tt class="doctest"><span class="pre">S |- g</span></tt>, i.e. that <tt class="doctest"><span class="pre">g</span></tt>
is logically entailed by assumptions <tt class="doctest"><span class="pre">S = {s1, s2, ..., sn}</span></tt>.
We can this same input to Mace4, and the model builder will try to
find a counterexample, that is, to show that <tt class="doctest"><span class="pre">g</span></tt> does <em>not</em> follow
from <tt class="doctest"><span class="pre">S</span></tt>. So, given this input, Mace4 will try to find a model for
the set <tt class="doctest"><span class="pre">S' = {s1, s2, ..., sn, (<span class="pysrc-keyword">not</span> g)}</span></tt>. If <tt class="doctest"><span class="pre">g</span></tt> fails to follow
from <tt class="doctest"><span class="pre">S</span></tt>, then Mace4 may well return with a counterexample faster
than Prover9 concludes that it cannot find the required proof.
Conversely, if <tt class="doctest"><span class="pre">g</span></tt> <em>is</em> provable from <tt class="doctest"><span class="pre">S</span></tt>, Mace4 may take a long
time unsuccessfully trying to find a counter model, and will eventually give up.</p>
<p>In the following example, we see that the model builder does succeed
in building a model of the assumptions together with the negation of
the goal. That is, it succeeds in finding a model
where there is a woman that every man loves; Adam is a man; Eve is a
woman; but Adam does not love Eve.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a4 = lp.parse(<span class="pysrc-string">'exists y. (woman(y) &amp; all x. (man(x) -&gt; love(x,y)))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a5 = lp.parse(<span class="pysrc-string">'man(adam)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a6 = lp.parse(<span class="pysrc-string">'woman(eve)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = lp.parse(<span class="pysrc-string">'love(adam,eve)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(mace.build_model(g, [a4, a5, a6]))
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The Model Builder will fail to find a model if the assumptions do entail
the goal.  Mace will continue to look for models of ever-increasing sizes
until the end_size number is reached.  By default, end_size is 500,
but it can be set manually for quicker response time.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a7 = lp.parse(<span class="pysrc-string">'all x.(man(x) -&gt; mortal(x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a8 = lp.parse(<span class="pysrc-string">'man(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g2 = lp.parse(<span class="pysrc-string">'mortal(socrates)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Mace(end_size=50).build_model(g2, [a7, a8]))
<span class="pysrc-output">False</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>There is also a <tt class="doctest"><span class="pre">ModelBuilderCommand</span></tt> class that, like <tt class="doctest"><span class="pre">ProverCommand</span></tt>,
stores a <tt class="doctest"><span class="pre">ModelBuilder</span></tt>, a goal, assumptions, a result, and a model.  The
only implementation in NLTK is <tt class="doctest"><span class="pre">MaceCommand</span></tt>.</p>
</div>
<div class="section" id="mace4">
<h1>7&nbsp;&nbsp;&nbsp;Mace4</h1>
<div class="section" id="mace4-installation">
<h2>7.1&nbsp;&nbsp;&nbsp;Mace4 Installation</h2>
<p>Mace4 is packaged with Prover9, and can be downloaded from the same
source, namely <a class="reference external" href="http://www.cs.unm.edu/~mccune/prover9/">http://www.cs.unm.edu/~mccune/prover9/</a>. It is installed
in the same manner as Prover9.</p>
</div>
<div class="section" id="using-mace4">
<h2>7.2&nbsp;&nbsp;&nbsp;Using Mace4</h2>
<p>Check whether Mace4 can find a model.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a = lp.parse(<span class="pysrc-string">'(see(mary,john) &amp; -(mary = john))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mb = MaceCommand(assumptions=[a])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mb.build_model()
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Show the model in 'tabular' format.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(mb.model(format=<span class="pysrc-string">'tabular'</span>))
<span class="pysrc-output">% number = 1</span>
<span class="pysrc-output">% seconds = 0</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">% Interpretation of size 2</span>
<span class="pysrc-output"></span>
<span class="pysrc-output"> john : 0</span>
<span class="pysrc-output"></span>
<span class="pysrc-output"> mary : 1</span>
<span class="pysrc-output"></span>
<span class="pysrc-output"> see :</span>
<span class="pysrc-output">       | 0 1</span>
<span class="pysrc-output">    ---+----</span>
<span class="pysrc-output">     0 | 0 0</span>
<span class="pysrc-output">     1 | 1 0</span>
<span class="pysrc-output"></span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Show the model in 'tabular' format.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(mb.model(format=<span class="pysrc-string">'cooked'</span>))
<span class="pysrc-output">% number = 1</span>
<span class="pysrc-output">% seconds = 0</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">% Interpretation of size 2</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">john = 0.</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">mary = 1.</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">- see(0,0).</span>
<span class="pysrc-output">- see(0,1).</span>
<span class="pysrc-output">  see(1,0).</span>
<span class="pysrc-output">- see(1,1).</span>
<span class="pysrc-output"></span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The property <tt class="doctest"><span class="pre">valuation</span></tt> accesses the stored <tt class="doctest"><span class="pre">Valuation</span></tt>.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(mb.valuation)
<span class="pysrc-output">{'john': 'a', 'mary': 'b', 'see': {('b', 'a')}}</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>We can return to our earlier example and inspect the model:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mb = MaceCommand(g, assumptions=[a4, a5, a6])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m = mb.build_model()
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(mb.model(format=<span class="pysrc-string">'cooked'</span>))
<span class="pysrc-output">% number = 1</span>
<span class="pysrc-output">% seconds = 0</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">% Interpretation of size 2</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">adam = 0.</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">eve = 0.</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">c1 = 1.</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">  man(0).</span>
<span class="pysrc-output">- man(1).</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">  woman(0).</span>
<span class="pysrc-output">  woman(1).</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">- love(0,0).</span>
<span class="pysrc-output">  love(0,1).</span>
<span class="pysrc-output">- love(1,0).</span>
<span class="pysrc-output">- love(1,1).</span>
<span class="pysrc-output"></span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Here, we can see that <tt class="doctest"><span class="pre">adam</span></tt> and <tt class="doctest"><span class="pre">eve</span></tt> have been assigned the same
individual, namely <tt class="doctest"><span class="pre">0</span></tt> as value; <tt class="doctest"><span class="pre">0</span></tt> is both a man and a woman; a second
individual <tt class="doctest"><span class="pre">1</span></tt> is also a woman; and <tt class="doctest"><span class="pre">0</span></tt> loves <tt class="doctest"><span class="pre">1</span></tt>. Thus, this is
an interpretation in which there is a woman that every man loves but
Adam doesn't love Eve.</p>
<p>Mace can also be used with propositional logic.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>p = lp.parse(<span class="pysrc-string">'P'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>q = lp.parse(<span class="pysrc-string">'Q'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mb = MaceCommand(q, [p, p&gt;-q])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mb.build_model()
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mb.valuation[<span class="pysrc-string">'P'</span>]
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mb.valuation[<span class="pysrc-string">'Q'</span>]
<span class="pysrc-output">False</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
</div>
</body>
</html>
