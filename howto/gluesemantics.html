<?xml version="1.0" encoding="ascii" ?>

<script language="javascript" type="text/javascript">

function astext(node)
{
    return node.innerHTML.replace(/(<([^>]+)>)/ig,"")
                         .replace(/&gt;/ig, ">")
                         .replace(/&lt;/ig, "<")
                         .replace(/&quot;/ig, '"')
                         .replace(/&amp;/ig, "&");
}

function copy_notify(node, bar_color, data)
{
    // The outer box: relative + inline positioning.
    var box1 = document.createElement("div");
    box1.style.position = "relative";
    box1.style.display = "inline";
    box1.style.top = "2em";
    box1.style.left = "1em";
  
    // A shadow for fun
    var shadow = document.createElement("div");
    shadow.style.position = "absolute";
    shadow.style.left = "-1.3em";
    shadow.style.top = "-1.3em";
    shadow.style.background = "#404040";
    
    // The inner box: absolute positioning.
    var box2 = document.createElement("div");
    box2.style.position = "relative";
    box2.style.border = "1px solid #a0a0a0";
    box2.style.left = "-.2em";
    box2.style.top = "-.2em";
    box2.style.background = "white";
    box2.style.padding = ".3em .4em .3em .4em";
    box2.style.fontStyle = "normal";
    box2.style.background = "#f0e0e0";

    node.insertBefore(box1, node.childNodes.item(0));
    box1.appendChild(shadow);
    shadow.appendChild(box2);
    box2.innerHTML="Copied&nbsp;to&nbsp;the&nbsp;clipboard: " +
                   "<pre class='copy-notify'>"+
                   data+"</pre>";
    setTimeout(function() { node.removeChild(box1); }, 1000);

    var elt = node.parentNode.firstChild;
    elt.style.background = "#ffc0c0";
    setTimeout(function() { elt.style.background = bar_color; }, 200);
}

function copy_codeblock_to_clipboard(node)
{
    var data = astext(node)+"\n";
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#40a060", data);
    }
}

function copy_doctest_to_clipboard(node)
{
    var s = astext(node)+"\n   ";
    var data = "";

    var start = 0;
    var end = s.indexOf("\n");
    while (end >= 0) {
        if (s.substring(start, start+4) == ">>> ") {
            data += s.substring(start+4, end+1);
        }
        else if (s.substring(start, start+4) == "... ") {
            data += s.substring(start+4, end+1);
        }
        /*
        else if (end-start > 1) {
            data += "# " + s.substring(start, end+1);
        }*/
        // Grab the next line.
        start = end+1;
        end = s.indexOf("\n", start);
    }
    
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#4060a0", data);
    }
}
    
function copy_text_to_clipboard(data)
{
    if (window.clipboardData) {
        window.clipboardData.setData("Text", data);
        return true;
     }
    else if (window.netscape) {
        // w/ default firefox settings, permission will be denied for this:
        netscape.security.PrivilegeManager
                      .enablePrivilege("UniversalXPConnect");
    
        var clip = Components.classes["@mozilla.org/widget/clipboard;1"]
                      .createInstance(Components.interfaces.nsIClipboard);
        if (!clip) return;
    
        var trans = Components.classes["@mozilla.org/widget/transferable;1"]
                       .createInstance(Components.interfaces.nsITransferable);
        if (!trans) return;
    
        trans.addDataFlavor("text/unicode");
    
        var str = new Object();
        var len = new Object();
    
        var str = Components.classes["@mozilla.org/supports-string;1"]
                     .createInstance(Components.interfaces.nsISupportsString);
        var datacopy=data;
        str.data=datacopy;
        trans.setTransferData("text/unicode",str,datacopy.length*2);
        var clipid=Components.interfaces.nsIClipboard;
    
        if (!clip) return false;
    
        clip.setData(trans,null,clipid.kGlobalClipboard);
        return true;
    }
    return false;
}
//-->
</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ascii" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title></title>
<style type="text/css">

/*
:Author: Edward Loper, James Curran
:Copyright: This stylesheet has been placed in the public domain.

Stylesheet for use with Docutils.

This stylesheet defines new css classes used by NLTK.

It uses a Python syntax highlighting scheme that matches
the colour scheme used by IDLE, which makes it easier for
beginners to check they are typing things in correctly.
*/

/* Include the standard docutils stylesheet. */
@import url(default.css);

/* Custom inline roles */
span.placeholder    { font-style: italic; font-family: monospace; }
span.example        { font-style: italic; }
span.emphasis       { font-style: italic; }
span.termdef        { font-weight: bold; }
/*span.term           { font-style: italic; }*/
span.category       { font-variant: small-caps; }
span.feature        { font-variant: small-caps; }
span.fval           { font-style: italic; }
span.math           { font-style: italic; }
span.mathit         { font-style: italic; }
span.lex            { font-variant: small-caps; }
span.guide-linecount{ text-align: right; display: block;}

/* Python souce code listings */
span.pysrc-prompt   { color: #9b0000; }
span.pysrc-more     { color: #9b00ff; }
span.pysrc-keyword  { color: #e06000; }
span.pysrc-builtin  { color: #940094; }
span.pysrc-string   { color: #00aa00; }
span.pysrc-comment  { color: #ff0000; }
span.pysrc-output   { color: #0000ff; }
span.pysrc-except   { color: #ff0000; }
span.pysrc-defname  { color: #008080; }


/* Doctest blocks */
pre.doctest         { margin: 0; padding: 0; font-weight: bold; }
div.doctest         { margin: 0 1em 1em 1em; padding: 0; }
table.doctest       { margin: 0; padding: 0;
                      border-top: 1px solid gray;
                      border-bottom: 1px solid gray; }
pre.copy-notify     { margin: 0; padding: 0.2em; font-weight: bold;
                      background-color: #ffffff; }

/* Python source listings */
div.pylisting       { margin: 0 1em 1em 1em; padding: 0; }
table.pylisting     { margin: 0; padding: 0;
                      border-top: 1px solid gray; }
td.caption { border-top: 1px solid black; margin: 0; padding: 0; }
.caption-label { font-weight: bold;  }
td.caption p { margin: 0; padding: 0; font-style: normal;}

table tr td.codeblock { 
  padding: 0.2em ! important; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeffee;
}

table tr td.doctest  { 
  padding: 0.2em; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeeeff;
}

td.codeblock table tr td.copybar {
    background: #40a060; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }
td.doctest table tr td.copybar {
    background: #4060a0; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }

td.pysrc { padding-left: 0.5em; }

img.callout { border-width: 0px; }

table.docutils {
    border-style: solid;
    border-width: 1px;
    margin-top: 6px;
    border-color: grey;
    border-collapse: collapse; }

table.docutils th {
    border-style: none;
    border-width: 1px;
    border-color: grey;
    padding: 0 .5em 0 .5em; }

table.docutils td {
    border-style: none;
    border-width: 1px;
    border-color: grey; 
    padding: 0 .5em 0 .5em; }

table.footnote td { padding: 0; }
table.footnote { border-width: 0; }
table.footnote td { border-width: 0; }
table.footnote th { border-width: 0; }

table.noborder { border-width: 0; }

table.example pre { margin-top: 4px; margin-bottom: 0; }

/* For figures & tables */
p.caption { margin-bottom: 0; }
div.figure { text-align: center; }

/* The index */
div.index { border: 1px solid black;
            background-color: #eeeeee; }
div.index h1 { padding-left: 0.5em; margin-top: 0.5ex;
               border-bottom: 1px solid black; }
ul.index { margin-left: 0.5em; padding-left: 0; }
li.index { list-style-type: none; }
p.index-heading { font-size: 120%; font-style: italic; margin: 0; }
li.index ul { margin-left: 2em; padding-left: 0; }

/* 'Note' callouts */
div.note
{
  border-right:   #87ceeb 1px solid;
  padding-right: 4px;
  border-top: #87ceeb 1px solid;
  padding-left: 4px;
  padding-bottom: 4px;
  margin: 2px 5% 10px;
  border-left: #87ceeb 1px solid;
  padding-top: 4px;
  border-bottom: #87ceeb 1px solid;
  font-style: normal;
  font-family: verdana, arial;
  background-color: #b0c4de;
}

table.avm { border: 0px solid black; width: 0; }
table.avm tbody tr {border: 0px solid black; }
table.avm tbody tr td { padding: 2px; }
table.avm tbody tr td.avm-key { padding: 5px; font-variant: small-caps; }
table.avm tbody tr td.avm-eq { padding: 5px; }
table.avm tbody tr td.avm-val { padding: 5px; font-style: italic; }
p.avm-empty { font-style: normal; }
table.avm colgroup col { border: 0px solid black; }
table.avm tbody tr td.avm-topleft 
    { border-left: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botleft 
    { border-left: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-topright
    { border-right: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botright
    { border-right: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-left
    { border-left: 2px solid #000080; }
table.avm tbody tr td.avm-right
    { border-right: 2px solid #000080; }
table.avm tbody tr td.avm-topbotleft
    { border: 2px solid #000080; border-right: 0px solid black; }
table.avm tbody tr td.avm-topbotright
    { border: 2px solid #000080; border-left: 0px solid black; }
table.avm tbody tr td.avm-ident
    { font-size: 80%; padding: 0; padding-left: 2px; vertical-align: top; }
.avm-pointer
{ border: 1px solid #008000; padding: 1px; color: #008000; 
  background: #c0ffc0; font-style: normal; }

table.gloss { border: 0px solid black; width: 0; }
table.gloss tbody tr { border: 0px solid black; }
table.gloss tbody tr td { border: 0px solid black; }
table.gloss colgroup col { border: 0px solid black; }
table.gloss p { margin: 0; padding: 0; }

table.rst-example { border: 1px solid black; }
table.rst-example tbody tr td { background: #eeeeee; }
table.rst-example thead tr th { background: #c0ffff; }
td.rst-raw { width: 0; }

/* Used by nltk.org/doc/test: */
div.doctest-list { text-align: center; }
table.doctest-list { border: 1px solid black;
  margin-left: auto; margin-right: auto;
}
table.doctest-list tbody tr td { background: #eeeeee;
  border: 1px solid #cccccc; text-align: left; }
table.doctest-list thead tr th { background: #304050; color: #ffffff;
  border: 1px solid #000000;}
table.doctest-list thead tr a { color: #ffffff; }
span.doctest-passed { color: #008000; }
span.doctest-failed { color: #800000; }

</style>
</head>
<body>
<div class="document">


<!-- Copyright (C) 2001-2014 NLTK Project -->
<!-- For license information, see LICENSE.TXT -->
<div class="section" id="glue-semantics">
<h1>1&nbsp;&nbsp;&nbsp;Glue Semantics</h1>
<!-- -*- mode: rst -*- -->
<!-- CAP abbreviations (map to small caps in LaTeX) -->
<!-- Other candidates for global consistency -->
<!-- PTB removed since it must be indexed -->
<!-- WN removed since it must be indexed -->
<!-- misc & punctuation -->
<!-- cdots was unicode U+22EF but not working -->
<!-- exercise meta-tags -->
<!-- Unicode tests -->
<!-- phonetic -->
<!-- misc -->
<!-- used in Unicode section -->
<!-- arrows -->
<!-- unification stuff -->
<!-- Math & Logic -->
<!-- sets -->
<!-- Greek -->
<!-- Chinese -->
<!-- URLs -->
<!-- Python example - a snippet of code in running text -->
<!-- PlaceHolder example -  something that should be replaced by actual code -->
<!-- Linguistic eXample - cited form in running text -->
<!-- Emphasized (more declarative than just using *) -->
<!-- Grammatical Category - e.g. NP and verb as technical terms
.. role:: gc
   :class: category -->
<!-- Math expression - e.g. especially for variables -->
<!-- Textual Math expression - for words 'inside' a math environment -->
<!-- Feature (or attribute) -->
<!-- Raw LaTeX -->
<!-- Raw HTML -->
<!-- Feature-value -->
<!-- Lexemes -->
<!-- Replacements that rely on previous definitions :-) -->
</div>
<div class="section" id="linear-logic">
<h1>2&nbsp;&nbsp;&nbsp;Linear logic</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> logic
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.glue <span class="pysrc-keyword">import</span> *
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.linearlogic <span class="pysrc-keyword">import</span> *</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.linearlogic <span class="pysrc-keyword">import</span> Expression
<span class="pysrc-prompt">&gt;&gt;&gt; </span>llexpr = Expression.fromstring</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Parser</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'f'</span>))
<span class="pysrc-output">f</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'(g -o f)'</span>))
<span class="pysrc-output">(g -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'(g -o (h -o f))'</span>))
<span class="pysrc-output">(g -o (h -o f))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'((g -o G) -o G)'</span>))
<span class="pysrc-output">((g -o G) -o G)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'(g -o f)(g)'</span>))
<span class="pysrc-output">(g -o f)(g)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'((g -o G) -o G)((g -o f))'</span>))
<span class="pysrc-output">((g -o G) -o G)((g -o f))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Simplify</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'f'</span>).simplify())
<span class="pysrc-output">f</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'(g -o f)'</span>).simplify())
<span class="pysrc-output">(g -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'((g -o G) -o G)'</span>).simplify())
<span class="pysrc-output">((g -o G) -o G)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'(g -o f)(g)'</span>).simplify())
<span class="pysrc-output">f</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>try: llexpr(r<span class="pysrc-string">'(g -o f)(f)'</span>).simplify()
<span class="pysrc-more">... </span><span class="pysrc-keyword">except</span> LinearLogicApplicationException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)
<span class="pysrc-more">...</span>
<span class="pysrc-output">Cannot apply (g -o f) to f. Cannot unify g with f given {}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'(G -o f)(g)'</span>).simplify())
<span class="pysrc-output">f</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(r<span class="pysrc-string">'((g -o G) -o G)((g -o f))'</span>).simplify())
<span class="pysrc-output">f</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Test BindingDict</p>
<blockquote>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>h = ConstantExpression(<span class="pysrc-string">'h'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = ConstantExpression(<span class="pysrc-string">'g'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>f = ConstantExpression(<span class="pysrc-string">'f'</span>)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>H = VariableExpression(<span class="pysrc-string">'H'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>G = VariableExpression(<span class="pysrc-string">'G'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>F = VariableExpression(<span class="pysrc-string">'F'</span>)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>d1 = BindingDict({H: h})
<span class="pysrc-prompt">&gt;&gt;&gt; </span>d2 = BindingDict({F: f, G: F})
<span class="pysrc-prompt">&gt;&gt;&gt; </span>d12 = d1 + d2
<span class="pysrc-prompt">&gt;&gt;&gt; </span>all12 = [<span class="pysrc-string">'%s: %s'</span> % (v, d12[v]) <span class="pysrc-keyword">for</span> v <span class="pysrc-keyword">in</span> d12.d]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>all12.sort()
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(all12)
<span class="pysrc-output">['F: f', 'G: f', 'H: h']</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<blockquote>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>BindingDict([(F,f),(G,g),(H,h)]) == BindingDict({F:f, G:g, H:h})
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</blockquote>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>d4 = BindingDict({F: f})
<span class="pysrc-prompt">&gt;&gt;&gt; </span>try: d4[F] = g
<span class="pysrc-more">... </span><span class="pysrc-keyword">except</span> VariableBindingException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)
<span class="pysrc-output">Variable F already bound to another value</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</blockquote>
<p>Test Unify</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>try: f.unify(g, BindingDict())
<span class="pysrc-more">... </span><span class="pysrc-keyword">except</span> UnificationException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)
<span class="pysrc-more">...</span>
<span class="pysrc-output">Cannot unify f with g given {}</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>f.unify(G, BindingDict()) == BindingDict({G: f})
<span class="pysrc-output">    True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>try: f.unify(G, BindingDict({G: h}))
<span class="pysrc-more">... </span><span class="pysrc-keyword">except</span> UnificationException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)
<span class="pysrc-more">...</span>
<span class="pysrc-output">Cannot unify f with G given {G: h}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>f.unify(G, BindingDict({G: f})) == BindingDict({G: f})
<span class="pysrc-output">    True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>f.unify(G, BindingDict({H: f})) == BindingDict({G: f, H: f})
<span class="pysrc-output">    True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>G.unify(f, BindingDict()) == BindingDict({G: f})
<span class="pysrc-output">    True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>try: G.unify(f, BindingDict({G: h}))
<span class="pysrc-more">... </span><span class="pysrc-keyword">except</span> UnificationException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)
<span class="pysrc-more">...</span>
<span class="pysrc-output">Cannot unify G with f given {G: h}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>G.unify(f, BindingDict({G: f})) == BindingDict({G: f})
<span class="pysrc-output">    True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>G.unify(f, BindingDict({H: f})) == BindingDict({G: f, H: f})
<span class="pysrc-output">    True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>G.unify(F, BindingDict()) == BindingDict({G: F})
<span class="pysrc-output">    True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>try: G.unify(F, BindingDict({G: H}))
<span class="pysrc-more">... </span><span class="pysrc-keyword">except</span> UnificationException <span class="pysrc-keyword">as</span> e: <span class="pysrc-keyword">print</span>(e)
<span class="pysrc-more">...</span>
<span class="pysrc-output">Cannot unify G with F given {G: H}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>G.unify(F, BindingDict({G: F})) == BindingDict({G: F})
<span class="pysrc-output">    True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>G.unify(F, BindingDict({H: F})) == BindingDict({G: F, H: F})
<span class="pysrc-output">    True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Test Compile</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(<span class="pysrc-string">'g'</span>).compile_pos(Counter(), GlueFormula))
<span class="pysrc-output">(&lt;ConstantExpression g&gt;, [])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(<span class="pysrc-string">'(g -o f)'</span>).compile_pos(Counter(), GlueFormula))
<span class="pysrc-output">(&lt;ImpExpression (g -o f)&gt;, [])</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(llexpr(<span class="pysrc-string">'(g -o (h -o f))'</span>).compile_pos(Counter(), GlueFormula))
<span class="pysrc-output">(&lt;ImpExpression (g -o (h -o f))&gt;, [])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="glue">
<h1>3&nbsp;&nbsp;&nbsp;Glue</h1>
<div class="section" id="demo-of-john-walks">
<h2>3.1&nbsp;&nbsp;&nbsp;Demo of &quot;John walks&quot;</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>john = GlueFormula(<span class="pysrc-string">&quot;John&quot;</span>, <span class="pysrc-string">&quot;g&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(john)
<span class="pysrc-output">John : g</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>walks = GlueFormula(r<span class="pysrc-string">&quot;\x.walks(x)&quot;</span>, <span class="pysrc-string">&quot;(g -o f)&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(walks)
<span class="pysrc-output">\x.walks(x) : (g -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(walks.applyto(john))
<span class="pysrc-output">\x.walks(x)(John) : (g -o f)(g)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(walks.applyto(john).simplify())
<span class="pysrc-output">walks(John) : f</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="demo-of-a-dog-walks">
<h2>3.2&nbsp;&nbsp;&nbsp;Demo of &quot;A dog walks&quot;</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a = GlueFormula(<span class="pysrc-string">&quot;\P Q.some x.(P(x) and Q(x))&quot;</span>, <span class="pysrc-string">&quot;((gv -o gr) -o ((g -o G) -o G))&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a)
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : ((gv -o gr) -o ((g -o G) -o G))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>man = GlueFormula(r<span class="pysrc-string">&quot;\x.man(x)&quot;</span>, <span class="pysrc-string">&quot;(gv -o gr)&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(man)
<span class="pysrc-output">\x.man(x) : (gv -o gr)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>walks = GlueFormula(r<span class="pysrc-string">&quot;\x.walks(x)&quot;</span>, <span class="pysrc-string">&quot;(g -o f)&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(walks)
<span class="pysrc-output">\x.walks(x) : (g -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>a_man = a.applyto(man)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a_man.simplify())
<span class="pysrc-output">\Q.exists x.(man(x) &amp; Q(x)) : ((g -o G) -o G)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>a_man_walks = a_man.applyto(walks)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a_man_walks.simplify())
<span class="pysrc-output">exists x.(man(x) &amp; walks(x)) : f</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="demo-of-every-girl-chases-a-dog">
<h2>3.3&nbsp;&nbsp;&nbsp;Demo of 'every girl chases a dog'</h2>
<p>Individual words:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>every = GlueFormula(<span class="pysrc-string">&quot;\P Q.all x.(P(x) -&gt; Q(x))&quot;</span>, <span class="pysrc-string">&quot;((gv -o gr) -o ((g -o G) -o G))&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(every)
<span class="pysrc-output">\P Q.all x.(P(x) -&gt; Q(x)) : ((gv -o gr) -o ((g -o G) -o G))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>girl = GlueFormula(r<span class="pysrc-string">&quot;\x.girl(x)&quot;</span>, <span class="pysrc-string">&quot;(gv -o gr)&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(girl)
<span class="pysrc-output">\x.girl(x) : (gv -o gr)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>chases = GlueFormula(r<span class="pysrc-string">&quot;\x y.chases(x,y)&quot;</span>, <span class="pysrc-string">&quot;(g -o (h -o f))&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(chases)
<span class="pysrc-output">\x y.chases(x,y) : (g -o (h -o f))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>a = GlueFormula(<span class="pysrc-string">&quot;\P Q.some x.(P(x) and Q(x))&quot;</span>, <span class="pysrc-string">&quot;((hv -o hr) -o ((h -o H) -o H))&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a)
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : ((hv -o hr) -o ((h -o H) -o H))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>dog = GlueFormula(r<span class="pysrc-string">&quot;\x.dog(x)&quot;</span>, <span class="pysrc-string">&quot;(hv -o hr)&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dog)
<span class="pysrc-output">\x.dog(x) : (hv -o hr)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Noun Quantification can only be done one way:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>every_girl = every.applyto(girl)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(every_girl.simplify())
<span class="pysrc-output">\Q.all x.(girl(x) -&gt; Q(x)) : ((g -o G) -o G)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>a_dog = a.applyto(dog)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a_dog.simplify())
<span class="pysrc-output">\Q.exists x.(dog(x) &amp; Q(x)) : ((h -o H) -o H)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The first reading is achieved by combining 'chases' with 'a dog' first.
Since 'a girl' requires something of the form '(h -o H)' we must
get rid of the 'g' in the glue of 'see'.  We will do this with
the '-o elimination' rule.  So, x1 will be our subject placeholder.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>xPrime = GlueFormula(<span class="pysrc-string">&quot;x1&quot;</span>, <span class="pysrc-string">&quot;g&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(xPrime)
<span class="pysrc-output">x1 : g</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>xPrime_chases = chases.applyto(xPrime)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(xPrime_chases.simplify())
<span class="pysrc-output">\y.chases(x1,y) : (h -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>xPrime_chases_a_dog = a_dog.applyto(xPrime_chases)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(xPrime_chases_a_dog.simplify())
<span class="pysrc-output">exists x.(dog(x) &amp; chases(x1,x)) : f</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Now we can retract our subject placeholder using lambda-abstraction and
combine with the true subject.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>chases_a_dog = xPrime_chases_a_dog.lambda_abstract(xPrime)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(chases_a_dog.simplify())
<span class="pysrc-output">\x1.exists x.(dog(x) &amp; chases(x1,x)) : (g -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>every_girl_chases_a_dog = every_girl.applyto(chases_a_dog)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>r1 = every_girl_chases_a_dog.simplify()
<span class="pysrc-prompt">&gt;&gt;&gt; </span>r2 = GlueFormula(r<span class="pysrc-string">'all x.(girl(x) -&gt; exists z1.(dog(z1) &amp; chases(x,z1)))'</span>, <span class="pysrc-string">'f'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>r1 == r2
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The second reading is achieved by combining 'every girl' with 'chases' first.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>xPrime = GlueFormula(<span class="pysrc-string">&quot;x1&quot;</span>, <span class="pysrc-string">&quot;g&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(xPrime)
<span class="pysrc-output">x1 : g</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>xPrime_chases = chases.applyto(xPrime)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(xPrime_chases.simplify())
<span class="pysrc-output">\y.chases(x1,y) : (h -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>yPrime = GlueFormula(<span class="pysrc-string">&quot;x2&quot;</span>, <span class="pysrc-string">&quot;h&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(yPrime)
<span class="pysrc-output">x2 : h</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>xPrime_chases_yPrime = xPrime_chases.applyto(yPrime)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(xPrime_chases_yPrime.simplify())
<span class="pysrc-output">chases(x1,x2) : f</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>chases_yPrime = xPrime_chases_yPrime.lambda_abstract(xPrime)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(chases_yPrime.simplify())
<span class="pysrc-output">\x1.chases(x1,x2) : (g -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>every_girl_chases_yPrime = every_girl.applyto(chases_yPrime)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(every_girl_chases_yPrime.simplify())
<span class="pysrc-output">all x.(girl(x) -&gt; chases(x,x2)) : f</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>every_girl_chases = every_girl_chases_yPrime.lambda_abstract(yPrime)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(every_girl_chases.simplify())
<span class="pysrc-output">\x2.all x.(girl(x) -&gt; chases(x,x2)) : (h -o f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>every_girl_chases_a_dog = a_dog.applyto(every_girl_chases)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>r1 = every_girl_chases_a_dog.simplify()
<span class="pysrc-prompt">&gt;&gt;&gt; </span>r2 = GlueFormula(r<span class="pysrc-string">'exists x.(dog(x) &amp; all z2.(girl(z2) -&gt; chases(z2,x)))'</span>, <span class="pysrc-string">'f'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>r1 == r2
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="compilation">
<h2>3.4&nbsp;&nbsp;&nbsp;Compilation</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> cp <span class="pysrc-keyword">in</span> GlueFormula(<span class="pysrc-string">'m'</span>, <span class="pysrc-string">'(b -o a)'</span>).compile(Counter()): <span class="pysrc-keyword">print</span>(cp)
<span class="pysrc-output">m : (b -o a) : {1}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> cp <span class="pysrc-keyword">in</span> GlueFormula(<span class="pysrc-string">'m'</span>, <span class="pysrc-string">'((c -o b) -o a)'</span>).compile(Counter()): <span class="pysrc-keyword">print</span>(cp)
<span class="pysrc-output">v1 : c : {1}</span>
<span class="pysrc-output">m : (b[1] -o a) : {2}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> cp <span class="pysrc-keyword">in</span> GlueFormula(<span class="pysrc-string">'m'</span>, <span class="pysrc-string">'((d -o (c -o b)) -o a)'</span>).compile(Counter()): <span class="pysrc-keyword">print</span>(cp)
<span class="pysrc-output">v1 : c : {1}</span>
<span class="pysrc-output">v2 : d : {2}</span>
<span class="pysrc-output">m : (b[1, 2] -o a) : {3}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> cp <span class="pysrc-keyword">in</span> GlueFormula(<span class="pysrc-string">'m'</span>, <span class="pysrc-string">'((d -o e) -o ((c -o b) -o a))'</span>).compile(Counter()): <span class="pysrc-keyword">print</span>(cp)
<span class="pysrc-output">v1 : d : {1}</span>
<span class="pysrc-output">v2 : c : {2}</span>
<span class="pysrc-output">m : (e[1] -o (b[2] -o a)) : {3}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> cp <span class="pysrc-keyword">in</span> GlueFormula(<span class="pysrc-string">'m'</span>, <span class="pysrc-string">'(((d -o c) -o b) -o a)'</span>).compile(Counter()): <span class="pysrc-keyword">print</span>(cp)
<span class="pysrc-output">v1 : (d -o c) : {1}</span>
<span class="pysrc-output">m : (b[1] -o a) : {2}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> cp <span class="pysrc-keyword">in</span> GlueFormula(<span class="pysrc-string">'m'</span>, <span class="pysrc-string">'((((e -o d) -o c) -o b) -o a)'</span>).compile(Counter()): <span class="pysrc-keyword">print</span>(cp)
<span class="pysrc-output">v1 : e : {1}</span>
<span class="pysrc-output">v2 : (d[1] -o c) : {2}</span>
<span class="pysrc-output">m : (b[2] -o a) : {3}</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="demo-of-a-man-walks-using-compilation">
<h2>3.5&nbsp;&nbsp;&nbsp;Demo of 'a man walks' using Compilation</h2>
<p>Premises</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>a = GlueFormula(<span class="pysrc-string">'\\P Q.some x.(P(x) and Q(x))'</span>, <span class="pysrc-string">'((gv -o gr) -o ((g -o G) -o G))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(a)
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : ((gv -o gr) -o ((g -o G) -o G))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>man = GlueFormula(<span class="pysrc-string">'\\x.man(x)'</span>, <span class="pysrc-string">'(gv -o gr)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(man)
<span class="pysrc-output">\x.man(x) : (gv -o gr)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>walks = GlueFormula(<span class="pysrc-string">'\\x.walks(x)'</span>, <span class="pysrc-string">'(g -o f)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(walks)
<span class="pysrc-output">\x.walks(x) : (g -o f)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Compiled Premises:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>counter = Counter()
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ahc = a.compile(counter)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g1 = ahc[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g1)
<span class="pysrc-output">v1 : gv : {1}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>g2 = ahc[1]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g2)
<span class="pysrc-output">v2 : g : {2}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>g3 = ahc[2]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g3)
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : (gr[1] -o (G[2] -o G)) : {3}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>g4 = man.compile(counter)[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g4)
<span class="pysrc-output">\x.man(x) : (gv -o gr) : {4}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>g5 = walks.compile(counter)[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g5)
<span class="pysrc-output">\x.walks(x) : (g -o f) : {5}</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Derivation:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g14 = g4.applyto(g1)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g14.simplify())
<span class="pysrc-output">man(v1) : gr : {1, 4}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>g134 = g3.applyto(g14)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g134.simplify())
<span class="pysrc-output">\Q.exists x.(man(x) &amp; Q(x)) : (G[2] -o G) : {1, 3, 4}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>g25 = g5.applyto(g2)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g25.simplify())
<span class="pysrc-output">walks(v2) : f : {2, 5}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>g12345 = g134.applyto(g25)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(g12345.simplify())
<span class="pysrc-output">exists x.(man(x) &amp; walks(x)) : f : {1, 2, 3, 4, 5}</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="dependency-graph-to-glue-formulas">
<h3>Dependency Graph to Glue Formulas</h3>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.corpus.reader.dependency <span class="pysrc-keyword">import</span> DependencyGraph</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>depgraph = DependencyGraph(<span class="pysrc-string">&quot;&quot;&quot;1 John    _       NNP     NNP     _       2       SUBJ    _       _</span>
<span class="pysrc-more">... </span><span class="pysrc-string">2       sees    _       VB      VB      _       0       ROOT    _       _</span>
<span class="pysrc-more">... </span><span class="pysrc-string">3       a       _       ex_quant        ex_quant        _       4       SPEC    _       _</span>
<span class="pysrc-more">... </span><span class="pysrc-string">4       dog     _       NN      NN      _       2       OBJ     _       _</span>
<span class="pysrc-more">... </span><span class="pysrc-string">&quot;&quot;&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>gfl = GlueDict(<span class="pysrc-string">'nltk:grammars/sample_grammars/glue.semtype'</span>).to_glueformula_list(depgraph)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> gf <span class="pysrc-keyword">in</span> gfl:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(gf)
<span class="pysrc-output">\x y.sees(x,y) : (f -o (i -o g))</span>
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : ((fv -o fr) -o ((f -o F2) -o F2))</span>
<span class="pysrc-output">\x.John(x) : (fv -o fr)</span>
<span class="pysrc-output">\x.dog(x) : (iv -o ir)</span>
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : ((iv -o ir) -o ((i -o I5) -o I5))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>glue = Glue()
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> r <span class="pysrc-keyword">in</span> sorted([r.simplify().normalize() <span class="pysrc-keyword">for</span> r <span class="pysrc-keyword">in</span> glue.get_readings(glue.gfl_to_compiled(gfl))], key=str):
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(r)
<span class="pysrc-output">exists z1.(John(z1) &amp; exists z2.(dog(z2) &amp; sees(z1,z2)))</span>
<span class="pysrc-output">exists z1.(dog(z1) &amp; exists z2.(John(z2) &amp; sees(z2,z1)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="dependency-graph-to-lfg-f-structure">
<h3>Dependency Graph to LFG f-structure</h3>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.lfg <span class="pysrc-keyword">import</span> FStructure
<span class="pysrc-prompt">&gt;&gt;&gt; </span>fstruct = FStructure.read_depgraph(depgraph)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(fstruct)
<span class="pysrc-output">f:[pred 'sees'</span>
<span class="pysrc-output">   obj h:[pred 'dog'</span>
<span class="pysrc-output">          spec 'a']</span>
<span class="pysrc-output">   subj g:[pred 'John']]</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="lfg-f-structure-to-glue">
<h3>LFG f-structure to Glue</h3>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> gf <span class="pysrc-keyword">in</span> fstruct.to_glueformula_list(GlueDict(<span class="pysrc-string">'nltk:grammars/sample_grammars/glue.semtype'</span>)): 
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(gf)
<span class="pysrc-output">\x y.sees(x,y) : (i -o (g -o f))</span>
<span class="pysrc-output">\x.dog(x) : (gv -o gr)</span>
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : ((gv -o gr) -o ((g -o G3) -o G3))</span>
<span class="pysrc-output">\P Q.exists x.(P(x) &amp; Q(x)) : ((iv -o ir) -o ((i -o I4) -o I4))</span>
<span class="pysrc-output">\x.John(x) : (iv -o ir)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<!-- see gluesemantics_malt.doctest for more -->
</div>
</div>
</div>
</div>
</body>
</html>
