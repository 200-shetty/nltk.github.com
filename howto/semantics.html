<?xml version="1.0" encoding="ascii" ?>

<script language="javascript" type="text/javascript">

function astext(node)
{
    return node.innerHTML.replace(/(<([^>]+)>)/ig,"")
                         .replace(/&gt;/ig, ">")
                         .replace(/&lt;/ig, "<")
                         .replace(/&quot;/ig, '"')
                         .replace(/&amp;/ig, "&");
}

function copy_notify(node, bar_color, data)
{
    // The outer box: relative + inline positioning.
    var box1 = document.createElement("div");
    box1.style.position = "relative";
    box1.style.display = "inline";
    box1.style.top = "2em";
    box1.style.left = "1em";
  
    // A shadow for fun
    var shadow = document.createElement("div");
    shadow.style.position = "absolute";
    shadow.style.left = "-1.3em";
    shadow.style.top = "-1.3em";
    shadow.style.background = "#404040";
    
    // The inner box: absolute positioning.
    var box2 = document.createElement("div");
    box2.style.position = "relative";
    box2.style.border = "1px solid #a0a0a0";
    box2.style.left = "-.2em";
    box2.style.top = "-.2em";
    box2.style.background = "white";
    box2.style.padding = ".3em .4em .3em .4em";
    box2.style.fontStyle = "normal";
    box2.style.background = "#f0e0e0";

    node.insertBefore(box1, node.childNodes.item(0));
    box1.appendChild(shadow);
    shadow.appendChild(box2);
    box2.innerHTML="Copied&nbsp;to&nbsp;the&nbsp;clipboard: " +
                   "<pre class='copy-notify'>"+
                   data+"</pre>";
    setTimeout(function() { node.removeChild(box1); }, 1000);

    var elt = node.parentNode.firstChild;
    elt.style.background = "#ffc0c0";
    setTimeout(function() { elt.style.background = bar_color; }, 200);
}

function copy_codeblock_to_clipboard(node)
{
    var data = astext(node)+"\n";
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#40a060", data);
    }
}

function copy_doctest_to_clipboard(node)
{
    var s = astext(node)+"\n   ";
    var data = "";

    var start = 0;
    var end = s.indexOf("\n");
    while (end >= 0) {
        if (s.substring(start, start+4) == ">>> ") {
            data += s.substring(start+4, end+1);
        }
        else if (s.substring(start, start+4) == "... ") {
            data += s.substring(start+4, end+1);
        }
        /*
        else if (end-start > 1) {
            data += "# " + s.substring(start, end+1);
        }*/
        // Grab the next line.
        start = end+1;
        end = s.indexOf("\n", start);
    }
    
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#4060a0", data);
    }
}
    
function copy_text_to_clipboard(data)
{
    if (window.clipboardData) {
        window.clipboardData.setData("Text", data);
        return true;
     }
    else if (window.netscape) {
        // w/ default firefox settings, permission will be denied for this:
        netscape.security.PrivilegeManager
                      .enablePrivilege("UniversalXPConnect");
    
        var clip = Components.classes["@mozilla.org/widget/clipboard;1"]
                      .createInstance(Components.interfaces.nsIClipboard);
        if (!clip) return;
    
        var trans = Components.classes["@mozilla.org/widget/transferable;1"]
                       .createInstance(Components.interfaces.nsITransferable);
        if (!trans) return;
    
        trans.addDataFlavor("text/unicode");
    
        var str = new Object();
        var len = new Object();
    
        var str = Components.classes["@mozilla.org/supports-string;1"]
                     .createInstance(Components.interfaces.nsISupportsString);
        var datacopy=data;
        str.data=datacopy;
        trans.setTransferData("text/unicode",str,datacopy.length*2);
        var clipid=Components.interfaces.nsIClipboard;
    
        if (!clip) return false;
    
        clip.setData(trans,null,clipid.kGlobalClipboard);
        return true;
    }
    return false;
}
//-->
</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ascii" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>Semantics</title>
<style type="text/css">

/*
:Author: Edward Loper, James Curran
:Copyright: This stylesheet has been placed in the public domain.

Stylesheet for use with Docutils.

This stylesheet defines new css classes used by NLTK.

It uses a Python syntax highlighting scheme that matches
the colour scheme used by IDLE, which makes it easier for
beginners to check they are typing things in correctly.
*/

/* Include the standard docutils stylesheet. */
@import url(default.css);

/* Custom inline roles */
span.placeholder    { font-style: italic; font-family: monospace; }
span.example        { font-style: italic; }
span.emphasis       { font-style: italic; }
span.termdef        { font-weight: bold; }
/*span.term           { font-style: italic; }*/
span.category       { font-variant: small-caps; }
span.feature        { font-variant: small-caps; }
span.fval           { font-style: italic; }
span.math           { font-style: italic; }
span.mathit         { font-style: italic; }
span.lex            { font-variant: small-caps; }
span.guide-linecount{ text-align: right; display: block;}

/* Python souce code listings */
span.pysrc-prompt   { color: #9b0000; }
span.pysrc-more     { color: #9b00ff; }
span.pysrc-keyword  { color: #e06000; }
span.pysrc-builtin  { color: #940094; }
span.pysrc-string   { color: #00aa00; }
span.pysrc-comment  { color: #ff0000; }
span.pysrc-output   { color: #0000ff; }
span.pysrc-except   { color: #ff0000; }
span.pysrc-defname  { color: #008080; }


/* Doctest blocks */
pre.doctest         { margin: 0; padding: 0; font-weight: bold; }
div.doctest         { margin: 0 1em 1em 1em; padding: 0; }
table.doctest       { margin: 0; padding: 0;
                      border-top: 1px solid gray;
                      border-bottom: 1px solid gray; }
pre.copy-notify     { margin: 0; padding: 0.2em; font-weight: bold;
                      background-color: #ffffff; }

/* Python source listings */
div.pylisting       { margin: 0 1em 1em 1em; padding: 0; }
table.pylisting     { margin: 0; padding: 0;
                      border-top: 1px solid gray; }
td.caption { border-top: 1px solid black; margin: 0; padding: 0; }
.caption-label { font-weight: bold;  }
td.caption p { margin: 0; padding: 0; font-style: normal;}

table tr td.codeblock { 
  padding: 0.2em ! important; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeffee;
}

table tr td.doctest  { 
  padding: 0.2em; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeeeff;
}

td.codeblock table tr td.copybar {
    background: #40a060; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }
td.doctest table tr td.copybar {
    background: #4060a0; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }

td.pysrc { padding-left: 0.5em; }

img.callout { border-width: 0px; }

table.docutils {
    border-style: solid;
    border-width: 1px;
    margin-top: 6px;
    border-color: grey;
    border-collapse: collapse; }

table.docutils th {
    border-style: none;
    border-width: 1px;
    border-color: grey;
    padding: 0 .5em 0 .5em; }

table.docutils td {
    border-style: none;
    border-width: 1px;
    border-color: grey; 
    padding: 0 .5em 0 .5em; }

table.footnote td { padding: 0; }
table.footnote { border-width: 0; }
table.footnote td { border-width: 0; }
table.footnote th { border-width: 0; }

table.noborder { border-width: 0; }

table.example pre { margin-top: 4px; margin-bottom: 0; }

/* For figures & tables */
p.caption { margin-bottom: 0; }
div.figure { text-align: center; }

/* The index */
div.index { border: 1px solid black;
            background-color: #eeeeee; }
div.index h1 { padding-left: 0.5em; margin-top: 0.5ex;
               border-bottom: 1px solid black; }
ul.index { margin-left: 0.5em; padding-left: 0; }
li.index { list-style-type: none; }
p.index-heading { font-size: 120%; font-style: italic; margin: 0; }
li.index ul { margin-left: 2em; padding-left: 0; }

/* 'Note' callouts */
div.note
{
  border-right:   #87ceeb 1px solid;
  padding-right: 4px;
  border-top: #87ceeb 1px solid;
  padding-left: 4px;
  padding-bottom: 4px;
  margin: 2px 5% 10px;
  border-left: #87ceeb 1px solid;
  padding-top: 4px;
  border-bottom: #87ceeb 1px solid;
  font-style: normal;
  font-family: verdana, arial;
  background-color: #b0c4de;
}

table.avm { border: 0px solid black; width: 0; }
table.avm tbody tr {border: 0px solid black; }
table.avm tbody tr td { padding: 2px; }
table.avm tbody tr td.avm-key { padding: 5px; font-variant: small-caps; }
table.avm tbody tr td.avm-eq { padding: 5px; }
table.avm tbody tr td.avm-val { padding: 5px; font-style: italic; }
p.avm-empty { font-style: normal; }
table.avm colgroup col { border: 0px solid black; }
table.avm tbody tr td.avm-topleft 
    { border-left: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botleft 
    { border-left: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-topright
    { border-right: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botright
    { border-right: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-left
    { border-left: 2px solid #000080; }
table.avm tbody tr td.avm-right
    { border-right: 2px solid #000080; }
table.avm tbody tr td.avm-topbotleft
    { border: 2px solid #000080; border-right: 0px solid black; }
table.avm tbody tr td.avm-topbotright
    { border: 2px solid #000080; border-left: 0px solid black; }
table.avm tbody tr td.avm-ident
    { font-size: 80%; padding: 0; padding-left: 2px; vertical-align: top; }
.avm-pointer
{ border: 1px solid #008000; padding: 1px; color: #008000; 
  background: #c0ffc0; font-style: normal; }

table.gloss { border: 0px solid black; width: 0; }
table.gloss tbody tr { border: 0px solid black; }
table.gloss tbody tr td { border: 0px solid black; }
table.gloss colgroup col { border: 0px solid black; }
table.gloss p { margin: 0; padding: 0; }

table.rst-example { border: 1px solid black; }
table.rst-example tbody tr td { background: #eeeeee; }
table.rst-example thead tr th { background: #c0ffff; }
td.rst-raw { width: 0; }

/* Used by nltk.org/doc/test: */
div.doctest-list { text-align: center; }
table.doctest-list { border: 1px solid black;
  margin-left: auto; margin-right: auto;
}
table.doctest-list tbody tr td { background: #eeeeee;
  border: 1px solid #cccccc; text-align: left; }
table.doctest-list thead tr th { background: #304050; color: #ffffff;
  border: 1px solid #000000;}
table.doctest-list thead tr a { color: #ffffff; }
span.doctest-passed { color: #008000; }
span.doctest-failed { color: #800000; }

</style>
</head>
<body>
<div class="document" id="semantics">
<h1 class="title">Semantics</h1>

<!-- Copyright (C) 2001-2014 NLTK Project -->
<!-- For license information, see LICENSE.TXT -->
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">import</span> nltk
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> Valuation, Model
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v = [(<span class="pysrc-string">'adam'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'betty'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'fido'</span>, <span class="pysrc-string">'d1'</span>),
<span class="pysrc-more">... </span>(<span class="pysrc-string">'girl'</span>, set([<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'g2'</span>])), (<span class="pysrc-string">'boy'</span>, set([<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'b2'</span>])),
<span class="pysrc-more">... </span>(<span class="pysrc-string">'dog'</span>, set([<span class="pysrc-string">'d1'</span>])),
<span class="pysrc-more">... </span>(<span class="pysrc-string">'love'</span>, set([(<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'b2'</span>, <span class="pysrc-string">'g2'</span>), (<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'g2'</span>, <span class="pysrc-string">'b1'</span>)]))]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val = Valuation(v)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom = val.domain
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m = Model(dom, val)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="evaluation">
<h1>1&nbsp;&nbsp;&nbsp;Evaluation</h1>
<p>The top-level method of a <tt class="doctest"><span class="pre">Model</span></tt> instance is <tt class="doctest"><span class="pre">evaluate()</span></tt>, which
assigns a semantic value to expressions of the <tt class="doctest"><span class="pre">logic</span></tt> module, under
an assignment <tt class="doctest"><span class="pre">g</span></tt>:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom = val.domain
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = nltk.sem.Assignment(dom)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m.evaluate(<span class="pysrc-string">'all x.(boy(x) -&gt; - girl(x))'</span>, g)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><tt class="doctest"><span class="pre">evaluate()</span></tt> calls a recursive function <tt class="doctest"><span class="pre">satisfy()</span></tt>, which in turn
calls a function <tt class="doctest"><span class="pre">i()</span></tt> to interpret non-logical constants and
individual variables. <tt class="doctest"><span class="pre">i()</span></tt> delegates the interpretation of these to
the the model's <tt class="doctest"><span class="pre">Valuation</span></tt> and the variable assignment <tt class="doctest"><span class="pre">g</span></tt>
respectively. Any atomic expression which cannot be assigned a value
by <tt class="doctest"><span class="pre">i</span></tt> raises an <tt class="doctest"><span class="pre">Undefined</span></tt> exception; this is caught by
<tt class="doctest"><span class="pre">evaluate</span></tt>, which returns the string <tt class="doctest"><span class="pre"><span class="pysrc-string">'Undefined'</span></span></tt>.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m.evaluate(<span class="pysrc-string">'walk(adam)'</span>, g, trace=2)
<span class="pysrc-output"></span>
<span class="pysrc-output">'walk(adam)' is undefined under M, g</span>
<span class="pysrc-output">'Undefined'</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="batch-processing">
<h1>2&nbsp;&nbsp;&nbsp;Batch Processing</h1>
<p>The utility functions <tt class="doctest"><span class="pre">interpret_sents()</span></tt> and <tt class="doctest"><span class="pre">evaluate_sents()</span></tt> are intended to
help with processing multiple sentences. Here's an example of the first of these:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sents = [<span class="pysrc-string">'Mary walks'</span>]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>results = nltk.sem.util.interpret_sents(sents, <span class="pysrc-string">'grammars/sample_grammars/sem2.fcfg'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> result <span class="pysrc-keyword">in</span> results:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">for</span> (synrep, semrep) <span class="pysrc-keyword">in</span> result:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(synrep)
<span class="pysrc-output">(S[SEM=&lt;walk(mary)&gt;]</span>
<span class="pysrc-output">  (NP[-LOC, NUM='sg', SEM=&lt;\P.P(mary)&gt;]</span>
<span class="pysrc-output">    (PropN[-LOC, NUM='sg', SEM=&lt;\P.P(mary)&gt;] Mary))</span>
<span class="pysrc-output">  (VP[NUM='sg', SEM=&lt;\x.walk(x)&gt;]</span>
<span class="pysrc-output">    (IV[NUM='sg', SEM=&lt;\x.walk(x)&gt;, TNS='pres'] walks)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>In order to provide backwards compatibility with 'legacy' grammars where the semantics value
is specified with a lowercase
<tt class="doctest"><span class="pre">sem</span></tt> feature, the relevant feature name can be passed to the function using the
<tt class="doctest"><span class="pre">semkey</span></tt> parameter, as shown here:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sents = [<span class="pysrc-string">'raining'</span>]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = nltk.grammar.FeatureGrammar.fromstring(<span class="pysrc-string">&quot;&quot;&quot;</span>
<span class="pysrc-more">... </span><span class="pysrc-string">% start S</span>
<span class="pysrc-more">... </span><span class="pysrc-string">S[sem=&lt;raining&gt;] -&gt; 'raining'</span>
<span class="pysrc-more">... </span><span class="pysrc-string">&quot;&quot;&quot;</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>results = nltk.sem.util.interpret_sents(sents, g, semkey=<span class="pysrc-string">'sem'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> result <span class="pysrc-keyword">in</span> results:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">for</span> (synrep, semrep) <span class="pysrc-keyword">in</span> result:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(semrep)
<span class="pysrc-output">raining</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The function <tt class="doctest"><span class="pre">evaluate_sents()</span></tt> works in a similar manner, but also needs to be
passed a <tt class="doctest"><span class="pre">Model</span></tt> against which the semantic representations are evaluated.</p>
<div class="section" id="unit-tests">
<h2>2.1&nbsp;&nbsp;&nbsp;Unit Tests</h2>
</div>
</div>
<div class="section" id="unit-tests-for-relations-and-valuations">
<h1>3&nbsp;&nbsp;&nbsp;Unit tests for relations and valuations</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> *</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Relations are sets of tuples, all of the same length.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>s1 = set([(<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>), (<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d1'</span>), (<span class="pysrc-string">'d2'</span>, <span class="pysrc-string">'d1'</span>)])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>is_rel(s1)
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>s2 = set([(<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>), (<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>), (<span class="pysrc-string">'d1'</span>,)])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>is_rel(s2)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Set set([('d1', 'd2'), ('d1',)]) contains sequences of different lengths</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>s3 = set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>is_rel(s3)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Set set(['d2', 'd1']) contains sequences of different lengths</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>s4 = set2rel(s3)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>is_rel(s4)
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>is_rel(set())
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>null_binary_rel = set([(None, None)])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>is_rel(null_binary_rel)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Sets of entities are converted into sets of singleton tuples
(containing strings).</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(set2rel(s3))
<span class="pysrc-output">[('d1',), ('d2',)]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(set2rel(set([1,3,5,])))
<span class="pysrc-output">['1', '3', '5']</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>set2rel(set()) == set()
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>set2rel(set2rel(s3)) == set2rel(s3)
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Predication is evaluated by set membership.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>) <span class="pysrc-keyword">in</span> s1
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'d2'</span>, <span class="pysrc-string">'d2'</span>) <span class="pysrc-keyword">in</span> s1
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'d1'</span>,) <span class="pysrc-keyword">in</span> s1
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-string">'d2'</span> <span class="pysrc-keyword">in</span> s1
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'d1'</span>,) <span class="pysrc-keyword">in</span> s4
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'d1'</span>,) <span class="pysrc-keyword">in</span> set()
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-string">'d1'</span> <span class="pysrc-keyword">in</span>  null_binary_rel
<span class="pysrc-output">False</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val = Valuation([(<span class="pysrc-string">'Fido'</span>, <span class="pysrc-string">'d1'</span>), (<span class="pysrc-string">'dog'</span>, set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>])), (<span class="pysrc-string">'walk'</span>, set())])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(val[<span class="pysrc-string">'dog'</span>])
<span class="pysrc-output">[('d1',), ('d2',)]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>val.domain == set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>])
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(val.symbols)
<span class="pysrc-output">['Fido', 'dog', 'walk']</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Parse a valuation from a string.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v = <span class="pysrc-string">&quot;&quot;&quot;</span>
<span class="pysrc-more">... </span><span class="pysrc-string">john =&gt; b1</span>
<span class="pysrc-more">... </span><span class="pysrc-string">mary =&gt; g1</span>
<span class="pysrc-more">... </span><span class="pysrc-string">suzie =&gt; g2</span>
<span class="pysrc-more">... </span><span class="pysrc-string">fido =&gt; d1</span>
<span class="pysrc-more">... </span><span class="pysrc-string">tess =&gt; d2</span>
<span class="pysrc-more">... </span><span class="pysrc-string">noosa =&gt; n</span>
<span class="pysrc-more">... </span><span class="pysrc-string">girl =&gt; {g1, g2}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">boy =&gt; {b1, b2}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">dog =&gt; {d1, d2}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">bark =&gt; {d1, d2}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">walk =&gt; {b1, g2, d1}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">chase =&gt; {(b1, g1), (b2, g1), (g1, d1), (g2, d2)}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">see =&gt; {(b1, g1), (b2, d2), (g1, b1),(d2, b1), (g2, n)}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">in =&gt; {(b1, n), (b2, n), (d2, n)}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">with =&gt; {(b1, g1), (g1, b1), (d1, b1), (b1, d1)}</span>
<span class="pysrc-more">... </span><span class="pysrc-string">&quot;&quot;&quot;</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val = parse_valuation(v)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(val) 
<span class="pysrc-output">{'bark': set([('d1',), ('d2',)]),</span>
<span class="pysrc-output"> 'boy': set([('b1',), ('b2',)]),</span>
<span class="pysrc-output"> 'chase': set([('b1', 'g1'), ('g2', 'd2'), ('g1', 'd1'), ('b2', 'g1')]),</span>
<span class="pysrc-output"> 'dog': set([('d1',), ('d2',)]),</span>
<span class="pysrc-output"> 'fido': 'd1',</span>
<span class="pysrc-output"> 'girl': set([('g2',), ('g1',)]),</span>
<span class="pysrc-output"> 'in': set([('d2', 'n'), ('b1', 'n'), ('b2', 'n')]),</span>
<span class="pysrc-output"> 'john': 'b1',</span>
<span class="pysrc-output"> 'mary': 'g1',</span>
<span class="pysrc-output"> 'noosa': 'n',</span>
<span class="pysrc-output"> 'see': set([('b1', 'g1'), ('b2', 'd2'), ('d2', 'b1'), ('g2', 'n'), ('g1', 'b1')]),</span>
<span class="pysrc-output"> 'suzie': 'g2',</span>
<span class="pysrc-output"> 'tess': 'd2',</span>
<span class="pysrc-output"> 'walk': set([('d1',), ('b1',), ('g2',)]),</span>
<span class="pysrc-output"> 'with': set([('b1', 'g1'), ('d1', 'b1'), ('b1', 'd1'), ('g1', 'b1')])}</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="unit-tests-for-function-argument-application-in-a-model">
<h1>4&nbsp;&nbsp;&nbsp;Unit tests for function argument application in a Model</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v = [(<span class="pysrc-string">'adam'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'betty'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'fido'</span>, <span class="pysrc-string">'d1'</span>),\
<span class="pysrc-more">... </span>     (<span class="pysrc-string">'girl'</span>, set([<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'g2'</span>])), (<span class="pysrc-string">'boy'</span>, set([<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'b2'</span>])), (<span class="pysrc-string">'dog'</span>, set([<span class="pysrc-string">'d1'</span>])),
<span class="pysrc-more">... </span>     (<span class="pysrc-string">'love'</span>, set([(<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'b2'</span>, <span class="pysrc-string">'g2'</span>), (<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'g2'</span>, <span class="pysrc-string">'b1'</span>)])),
<span class="pysrc-more">... </span>     (<span class="pysrc-string">'kiss'</span>, null_binary_rel)]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val = Valuation(v)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom = val.domain
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m = Model(dom, val)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = Assignment(dom)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(val[<span class="pysrc-string">'boy'</span>])
<span class="pysrc-output">[('b1',), ('b2',)]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'b1'</span>,) <span class="pysrc-keyword">in</span> val[<span class="pysrc-string">'boy'</span>]
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'g1'</span>,) <span class="pysrc-keyword">in</span> val[<span class="pysrc-string">'boy'</span>]
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'foo'</span>,) <span class="pysrc-keyword">in</span> val[<span class="pysrc-string">'boy'</span>]
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'g1'</span>) <span class="pysrc-keyword">in</span> val[<span class="pysrc-string">'love'</span>]
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>(<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'b1'</span>) <span class="pysrc-keyword">in</span> val[<span class="pysrc-string">'kiss'</span>]
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted(val.domain)
<span class="pysrc-output">['b1', 'b2', 'd1', 'g1', 'g2']</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="model-tests">
<h2>4.1&nbsp;&nbsp;&nbsp;Model Tests</h2>
<p>Extension of Lambda expressions</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v0 = [(<span class="pysrc-string">'adam'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'betty'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'fido'</span>, <span class="pysrc-string">'d1'</span>),\
<span class="pysrc-more">... </span>(<span class="pysrc-string">'girl'</span>, set([<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'g2'</span>])), (<span class="pysrc-string">'boy'</span>, set([<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'b2'</span>])),
<span class="pysrc-more">... </span>(<span class="pysrc-string">'dog'</span>, set([<span class="pysrc-string">'d1'</span>])),
<span class="pysrc-more">... </span>(<span class="pysrc-string">'love'</span>, set([(<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'b2'</span>, <span class="pysrc-string">'g2'</span>), (<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'g2'</span>, <span class="pysrc-string">'b1'</span>)]))]</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val0 = Valuation(v0)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom0 = val0.domain
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m0 = Model(dom0, val0)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g0 = Assignment(dom0)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. \y. love(x, y)'</span>, g0) == {<span class="pysrc-string">'g2'</span>: {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: True, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False}, <span class="pysrc-string">'b2'</span>: {<span class="pysrc-string">'g2'</span>: True, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: False, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False}, <span class="pysrc-string">'b1'</span>: {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: False, <span class="pysrc-string">'g1'</span>: True, <span class="pysrc-string">'d1'</span>: False}, <span class="pysrc-string">'g1'</span>: {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: True, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False}, <span class="pysrc-string">'d1'</span>: {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: False, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False}})
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. dog(x) (adam)'</span>, g0))
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. (dog(x) | boy(x)) (adam)'</span>, g0))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. \y. love(x, y)(fido)'</span>, g0) == {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: False, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False})
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. \y. love(x, y)(adam)'</span>, g0) == {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: False, <span class="pysrc-string">'g1'</span>: True, <span class="pysrc-string">'d1'</span>: False})
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. \y. love(x, y)(betty)'</span>, g0) == {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: True, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False})
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. \y. love(x, y)(betty)(adam)'</span>, g0))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. \y. love(x, y)(betty, adam)'</span>, g0))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\y. \x. love(x, y)(fido)(adam)'</span>, g0))
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\y. \x. love(x, y)(betty, adam)'</span>, g0))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\x. exists y. love(x, y)'</span>, g0) == {<span class="pysrc-string">'g2'</span>: True, <span class="pysrc-string">'b2'</span>: True, <span class="pysrc-string">'b1'</span>: True, <span class="pysrc-string">'g1'</span>: True, <span class="pysrc-string">'d1'</span>: False})
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\z. adam'</span>, g0) == {<span class="pysrc-string">'g2'</span>: <span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'b2'</span>: <span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'b1'</span>: <span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'g1'</span>: <span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'d1'</span>: <span class="pysrc-string">'b1'</span>})
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(m0.evaluate(r<span class="pysrc-string">'\z. love(x, y)'</span>, g0) == {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: False, <span class="pysrc-string">'b1'</span>: False, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False})
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
<div class="section" id="propositional-model-test">
<h1>5&nbsp;&nbsp;&nbsp;Propositional Model Test</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tests = [
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P &amp; Q'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P &amp; R'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- P'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- R'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- - P'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (P &amp; R)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P | R'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'R | P'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'R | R'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- P | R'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P | - P'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P -&gt; Q'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P -&gt; R'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'R -&gt; P'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P &lt;-&gt; P'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'R &lt;-&gt; R'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'P &lt;-&gt; R'</span>, False),
<span class="pysrc-more">... </span>    ]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val1 = Valuation([(<span class="pysrc-string">'P'</span>, True), (<span class="pysrc-string">'Q'</span>, True), (<span class="pysrc-string">'R'</span>, False)])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom = set([])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m = Model(dom, val1)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = Assignment(dom)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> (sent, testvalue) <span class="pysrc-keyword">in</span> tests:
<span class="pysrc-more">... </span>    semvalue = m.evaluate(sent, g)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">if</span> semvalue == testvalue:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'*'</span>, end=<span class="pysrc-string">' '</span>)
<span class="pysrc-output">* * * * * * * * * * * * * * * * *</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="test-of-i-function">
<h1>6&nbsp;&nbsp;&nbsp;Test of i Function</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> Expression
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v = [(<span class="pysrc-string">'adam'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'betty'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'fido'</span>, <span class="pysrc-string">'d1'</span>),
<span class="pysrc-more">... </span>     (<span class="pysrc-string">'girl'</span>, set([<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'g2'</span>])), (<span class="pysrc-string">'boy'</span>, set([<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'b2'</span>])), (<span class="pysrc-string">'dog'</span>, set([<span class="pysrc-string">'d1'</span>])),
<span class="pysrc-more">... </span>     (<span class="pysrc-string">'love'</span>, set([(<span class="pysrc-string">'b1'</span>, <span class="pysrc-string">'g1'</span>), (<span class="pysrc-string">'b2'</span>, <span class="pysrc-string">'g2'</span>), (<span class="pysrc-string">'g1'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'g2'</span>, <span class="pysrc-string">'b1'</span>)]))]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val = Valuation(v)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom = val.domain
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m = Model(dom, val)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = Assignment(dom, [(<span class="pysrc-string">'x'</span>, <span class="pysrc-string">'b1'</span>), (<span class="pysrc-string">'y'</span>, <span class="pysrc-string">'g2'</span>)])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>exprs = [<span class="pysrc-string">'adam'</span>, <span class="pysrc-string">'girl'</span>, <span class="pysrc-string">'love'</span>, <span class="pysrc-string">'walks'</span>, <span class="pysrc-string">'x'</span>, <span class="pysrc-string">'y'</span>, <span class="pysrc-string">'z'</span>]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>parsed_exprs = [Expression.fromstring(e) <span class="pysrc-keyword">for</span> e <span class="pysrc-keyword">in</span> exprs]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sorted_set = <span class="pysrc-keyword">lambda</span> x: sorted(x) <span class="pysrc-keyword">if</span> isinstance(x, set) <span class="pysrc-keyword">else</span> x
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> parsed <span class="pysrc-keyword">in</span> parsed_exprs:
<span class="pysrc-more">... </span>    try:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;'%s' gets value %s&quot;</span> % (parsed, sorted_set(m.i(parsed, g))))
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">except</span> Undefined:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;'%s' is Undefined&quot;</span> % parsed)
<span class="pysrc-output">'adam' gets value b1</span>
<span class="pysrc-output">'girl' gets value [('g1',), ('g2',)]</span>
<span class="pysrc-output">'love' gets value [('b1', 'g1'), ('b2', 'g2'), ('g1', 'b1'), ('g2', 'b1')]</span>
<span class="pysrc-output">'walks' is Undefined</span>
<span class="pysrc-output">'x' gets value b1</span>
<span class="pysrc-output">'y' gets value g2</span>
<span class="pysrc-output">'z' is Undefined</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="test-for-formulas-in-model">
<h1>7&nbsp;&nbsp;&nbsp;Test for formulas in Model</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tests = [
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'love(adam, betty)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'love(adam, sue)'</span>, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'dog(fido)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- dog(fido)'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- - dog(fido)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- dog(sue)'</span>, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'dog(fido) &amp; boy(adam)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (dog(fido) &amp; boy(adam))'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- dog(fido) &amp; boy(adam)'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'dog(fido) | boy(adam)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (dog(fido) | boy(adam))'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- dog(fido) | boy(adam)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- dog(fido) | - boy(adam)'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'dog(fido) -&gt; boy(adam)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (dog(fido) -&gt; boy(adam))'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- dog(fido) -&gt; boy(adam)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x . love(adam, x)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x . love(adam, x)'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'fido = fido'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x . all y. love(x, y)'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x . (x = fido)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x . (dog(x) | - dog(x))'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'adam = mia'</span>, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'\\x. (boy(x) | girl(x))'</span>, {<span class="pysrc-string">'g2'</span>: True, <span class="pysrc-string">'b2'</span>: True, <span class="pysrc-string">'b1'</span>: True, <span class="pysrc-string">'g1'</span>: True, <span class="pysrc-string">'d1'</span>: False}),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'\\x. exists y. (boy(x) &amp; love(x, y))'</span>, {<span class="pysrc-string">'g2'</span>: False, <span class="pysrc-string">'b2'</span>: True, <span class="pysrc-string">'b1'</span>: True, <span class="pysrc-string">'g1'</span>: False, <span class="pysrc-string">'d1'</span>: False}),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists z1. boy(z1)'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (boy(x) &amp; - (x = adam))'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (boy(x) &amp; all y. love(y, x))'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x. (boy(x) | girl(x))'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x. (girl(x) -&gt; exists y. boy(y) &amp; love(x, y))'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (boy(x) &amp; all y. (girl(y) -&gt; love(y, x)))'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (boy(x) &amp; all y. (girl(y) -&gt; love(x, y)))'</span>, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x. (dog(x) -&gt; - girl(x))'</span>, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. exists y. (love(x, y) &amp; love(x, y))'</span>, True),
<span class="pysrc-more">... </span>    ]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> (sent, testvalue) <span class="pysrc-keyword">in</span> tests:
<span class="pysrc-more">... </span>    semvalue = m.evaluate(sent, g)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">if</span> semvalue == testvalue:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'*'</span>, end=<span class="pysrc-string">' '</span>)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(sent, semvalue)
<span class="pysrc-output">* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="satisfier-tests">
<h1>8&nbsp;&nbsp;&nbsp;Satisfier Tests</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>formulas = [
<span class="pysrc-more">... </span>    <span class="pysrc-string">'boy(x)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'(x = x)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'(boy(x) | girl(x))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'(boy(x) &amp; girl(x))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'love(adam, x)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'love(x, adam)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'- (x = adam)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'exists z22. love(x, z22)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'exists y. love(y, x)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'all y. (girl(y) -&gt; love(x, y))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'all y. (girl(y) -&gt; love(y, x))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'all y. (girl(y) -&gt; (boy(x) &amp; love(y, x)))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'boy(x) &amp; all y. (girl(y) -&gt; love(x, y))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'boy(x) &amp; all y. (girl(y) -&gt; love(y, x))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'boy(x) &amp; exists y. (girl(y) &amp; love(y, x))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'girl(x) -&gt; dog(x)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'all y. (dog(y) -&gt; (x = y))'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'- exists y. love(y, x)'</span>,
<span class="pysrc-more">... </span>    <span class="pysrc-string">'exists y. (love(adam, y) &amp; love(y, x))'</span>
<span class="pysrc-more">... </span>    ]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g.purge()
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g.add(<span class="pysrc-string">'x'</span>, <span class="pysrc-string">'b1'</span>)
<span class="pysrc-output">{'x': 'b1'}</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> f <span class="pysrc-keyword">in</span> formulas: 
<span class="pysrc-more">... </span>    try:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;'%s' gets value: %s&quot;</span> % (f, m.evaluate(f, g)))
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">except</span> Undefined:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;'%s' is Undefined&quot;</span> % f)
<span class="pysrc-output">'boy(x)' gets value: True</span>
<span class="pysrc-output">'(x = x)' gets value: True</span>
<span class="pysrc-output">'(boy(x) | girl(x))' gets value: True</span>
<span class="pysrc-output">'(boy(x) &amp; girl(x))' gets value: False</span>
<span class="pysrc-output">'love(adam, x)' gets value: False</span>
<span class="pysrc-output">'love(x, adam)' gets value: False</span>
<span class="pysrc-output">'- (x = adam)' gets value: False</span>
<span class="pysrc-output">'exists z22. love(x, z22)' gets value: True</span>
<span class="pysrc-output">'exists y. love(y, x)' gets value: True</span>
<span class="pysrc-output">'all y. (girl(y) -&gt; love(x, y))' gets value: False</span>
<span class="pysrc-output">'all y. (girl(y) -&gt; love(y, x))' gets value: True</span>
<span class="pysrc-output">'all y. (girl(y) -&gt; (boy(x) &amp; love(y, x)))' gets value: True</span>
<span class="pysrc-output">'boy(x) &amp; all y. (girl(y) -&gt; love(x, y))' gets value: False</span>
<span class="pysrc-output">'boy(x) &amp; all y. (girl(y) -&gt; love(y, x))' gets value: True</span>
<span class="pysrc-output">'boy(x) &amp; exists y. (girl(y) &amp; love(y, x))' gets value: True</span>
<span class="pysrc-output">'girl(x) -&gt; dog(x)' gets value: True</span>
<span class="pysrc-output">'all y. (dog(y) -&gt; (x = y))' gets value: False</span>
<span class="pysrc-output">'- exists y. love(y, x)' gets value: False</span>
<span class="pysrc-output">'exists y. (love(adam, y) &amp; love(y, x))' gets value: True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> Expression
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> fmla <span class="pysrc-keyword">in</span> formulas: 
<span class="pysrc-more">... </span>    p = Expression.fromstring(fmla)
<span class="pysrc-more">... </span>    g.purge()
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;Satisfiers of '%s':\n\t%s&quot;</span> % (p, sorted(m.satisfiers(p, <span class="pysrc-string">'x'</span>, g))))
<span class="pysrc-output">Satisfiers of 'boy(x)':</span>
<span class="pysrc-output">    ['b1', 'b2']</span>
<span class="pysrc-output">Satisfiers of '(x = x)':</span>
<span class="pysrc-output">    ['b1', 'b2', 'd1', 'g1', 'g2']</span>
<span class="pysrc-output">Satisfiers of '(boy(x) | girl(x))':</span>
<span class="pysrc-output">    ['b1', 'b2', 'g1', 'g2']</span>
<span class="pysrc-output">Satisfiers of '(boy(x) &amp; girl(x))':</span>
<span class="pysrc-output">    []</span>
<span class="pysrc-output">Satisfiers of 'love(adam,x)':</span>
<span class="pysrc-output">    ['g1']</span>
<span class="pysrc-output">Satisfiers of 'love(x,adam)':</span>
<span class="pysrc-output">    ['g1', 'g2']</span>
<span class="pysrc-output">Satisfiers of '-(x = adam)':</span>
<span class="pysrc-output">    ['b2', 'd1', 'g1', 'g2']</span>
<span class="pysrc-output">Satisfiers of 'exists z22.love(x,z22)':</span>
<span class="pysrc-output">    ['b1', 'b2', 'g1', 'g2']</span>
<span class="pysrc-output">Satisfiers of 'exists y.love(y,x)':</span>
<span class="pysrc-output">    ['b1', 'g1', 'g2']</span>
<span class="pysrc-output">Satisfiers of 'all y.(girl(y) -&gt; love(x,y))':</span>
<span class="pysrc-output">    []</span>
<span class="pysrc-output">Satisfiers of 'all y.(girl(y) -&gt; love(y,x))':</span>
<span class="pysrc-output">    ['b1']</span>
<span class="pysrc-output">Satisfiers of 'all y.(girl(y) -&gt; (boy(x) &amp; love(y,x)))':</span>
<span class="pysrc-output">    ['b1']</span>
<span class="pysrc-output">Satisfiers of '(boy(x) &amp; all y.(girl(y) -&gt; love(x,y)))':</span>
<span class="pysrc-output">    []</span>
<span class="pysrc-output">Satisfiers of '(boy(x) &amp; all y.(girl(y) -&gt; love(y,x)))':</span>
<span class="pysrc-output">    ['b1']</span>
<span class="pysrc-output">Satisfiers of '(boy(x) &amp; exists y.(girl(y) &amp; love(y,x)))':</span>
<span class="pysrc-output">    ['b1']</span>
<span class="pysrc-output">Satisfiers of '(girl(x) -&gt; dog(x))':</span>
<span class="pysrc-output">    ['b1', 'b2', 'd1']</span>
<span class="pysrc-output">Satisfiers of 'all y.(dog(y) -&gt; (x = y))':</span>
<span class="pysrc-output">    ['d1']</span>
<span class="pysrc-output">Satisfiers of '-exists y.love(y,x)':</span>
<span class="pysrc-output">    ['b2', 'd1']</span>
<span class="pysrc-output">Satisfiers of 'exists y.(love(adam,y) &amp; love(y,x))':</span>
<span class="pysrc-output">    ['b1']</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="tests-based-on-the-blackburn-bos-testsuite">
<h1>9&nbsp;&nbsp;&nbsp;Tests based on the Blackburn &amp; Bos testsuite</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v1 = [(<span class="pysrc-string">'jules'</span>, <span class="pysrc-string">'d1'</span>), (<span class="pysrc-string">'vincent'</span>, <span class="pysrc-string">'d2'</span>), (<span class="pysrc-string">'pumpkin'</span>, <span class="pysrc-string">'d3'</span>),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'honey_bunny'</span>, <span class="pysrc-string">'d4'</span>), (<span class="pysrc-string">'yolanda'</span>, <span class="pysrc-string">'d5'</span>),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'customer'</span>, set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>])),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'robber'</span>, set([<span class="pysrc-string">'d3'</span>, <span class="pysrc-string">'d4'</span>])),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'love'</span>, set([(<span class="pysrc-string">'d3'</span>, <span class="pysrc-string">'d4'</span>)]))]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val1 = Valuation(v1)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom1 = val1.domain
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m1 = Model(dom1, val1)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g1 = Assignment(dom1)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v2 = [(<span class="pysrc-string">'jules'</span>, <span class="pysrc-string">'d1'</span>), (<span class="pysrc-string">'vincent'</span>, <span class="pysrc-string">'d2'</span>), (<span class="pysrc-string">'pumpkin'</span>, <span class="pysrc-string">'d3'</span>),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'honey_bunny'</span>, <span class="pysrc-string">'d4'</span>), (<span class="pysrc-string">'yolanda'</span>, <span class="pysrc-string">'d4'</span>),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'customer'</span>, set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>, <span class="pysrc-string">'d5'</span>, <span class="pysrc-string">'d6'</span>])),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'robber'</span>, set([<span class="pysrc-string">'d3'</span>, <span class="pysrc-string">'d4'</span>])),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'love'</span>, set([(None, None)]))]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val2 = Valuation(v2)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom2 = set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>, <span class="pysrc-string">'d3'</span>, <span class="pysrc-string">'d4'</span>, <span class="pysrc-string">'d5'</span>, <span class="pysrc-string">'d6'</span>])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m2 = Model(dom2, val2)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g2 = Assignment(dom2)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g21 = Assignment(dom2)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g21.add(<span class="pysrc-string">'y'</span>, <span class="pysrc-string">'d3'</span>)
<span class="pysrc-output">{'y': 'd3'}</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>v3 = [(<span class="pysrc-string">'mia'</span>, <span class="pysrc-string">'d1'</span>), (<span class="pysrc-string">'jody'</span>, <span class="pysrc-string">'d2'</span>), (<span class="pysrc-string">'jules'</span>, <span class="pysrc-string">'d3'</span>),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'vincent'</span>, <span class="pysrc-string">'d4'</span>),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'woman'</span>, set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>])), (<span class="pysrc-string">'man'</span>, set([<span class="pysrc-string">'d3'</span>, <span class="pysrc-string">'d4'</span>])),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'joke'</span>, set([<span class="pysrc-string">'d5'</span>, <span class="pysrc-string">'d6'</span>])), (<span class="pysrc-string">'episode'</span>, set([<span class="pysrc-string">'d7'</span>, <span class="pysrc-string">'d8'</span>])),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'in'</span>, set([(<span class="pysrc-string">'d5'</span>, <span class="pysrc-string">'d7'</span>), (<span class="pysrc-string">'d5'</span>, <span class="pysrc-string">'d8'</span>)])),
<span class="pysrc-more">... </span>      (<span class="pysrc-string">'tell'</span>, set([(<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d5'</span>), (<span class="pysrc-string">'d2'</span>, <span class="pysrc-string">'d6'</span>)]))]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val3 = Valuation(v3)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom3 = set([<span class="pysrc-string">'d1'</span>, <span class="pysrc-string">'d2'</span>, <span class="pysrc-string">'d3'</span>, <span class="pysrc-string">'d4'</span>, <span class="pysrc-string">'d5'</span>, <span class="pysrc-string">'d6'</span>, <span class="pysrc-string">'d7'</span>, <span class="pysrc-string">'d8'</span>])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m3 = Model(dom3, val3)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g3 = Assignment(dom3)</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tests = [
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. robber(x)'</span>, m1, g1, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. exists y. love(y, x)'</span>, m1, g1, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x0. exists x1. love(x1, x0)'</span>, m2, g2, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x. all y. love(y, x)'</span>, m2, g2, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (all x. all y. love(y, x))'</span>, m2, g2, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x. all y. - love(y, x)'</span>, m2, g2, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'yolanda = honey_bunny'</span>, m2, g2, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'mia = honey_bunny'</span>, m2, g2, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (yolanda = honey_bunny)'</span>, m2, g2, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (mia = honey_bunny)'</span>, m2, g2, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'all x. (robber(x) | customer(x))'</span>, m2, g2, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- (all x. (robber(x) | customer(x)))'</span>, m2, g2, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'(robber(x) | customer(x))'</span>, m2, g2, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'(robber(y) | customer(y))'</span>, m2, g21, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (man(x) &amp; exists x. woman(x))'</span>, m3, g3, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (man(x) &amp; exists x. woman(x))'</span>, m3, g3, True),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- exists x. woman(x)'</span>, m3, g3, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (tasty(x) &amp; burger(x))'</span>, m3, g3, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'- exists x. (tasty(x) &amp; burger(x))'</span>, m3, g3, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (man(x) &amp; - exists y. woman(y))'</span>, m3, g3, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (man(x) &amp; - exists x. woman(x))'</span>, m3, g3, False),
<span class="pysrc-more">... </span>    (<span class="pysrc-string">'exists x. (woman(x) &amp; - exists x. customer(x))'</span>, m2, g2, <span class="pysrc-string">'Undefined'</span>),
<span class="pysrc-more">... </span>]</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> item <span class="pysrc-keyword">in</span> tests:
<span class="pysrc-more">... </span>    sentence, model, g, testvalue = item
<span class="pysrc-more">... </span>    semvalue = model.evaluate(sentence, g)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">if</span> semvalue == testvalue:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'*'</span>, end=<span class="pysrc-string">' '</span>)
<span class="pysrc-more">... </span>    g.purge()
<span class="pysrc-output">* * * * * * * * * * * * * * * * * * * * * *</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="tests-for-mapping-from-syntax-to-semantics">
<h1>10&nbsp;&nbsp;&nbsp;Tests for mapping from syntax to semantics</h1>
<p>Load a valuation from a file.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">import</span> nltk.data
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem.util <span class="pysrc-keyword">import</span> parse_sents
<span class="pysrc-prompt">&gt;&gt;&gt; </span>val = nltk.data.load(<span class="pysrc-string">'grammars/sample_grammars/valuation1.val'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dom = val.domain
<span class="pysrc-prompt">&gt;&gt;&gt; </span>m = Model(dom, val)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>g = Assignment(dom)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>gramfile = <span class="pysrc-string">'grammars/sample_grammars/sem2.fcfg'</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>inputs = [<span class="pysrc-string">'John sees a girl'</span>, <span class="pysrc-string">'every dog barks'</span>]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>parses = parse_sents(inputs, gramfile)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> sent, trees <span class="pysrc-keyword">in</span> zip(inputs, parses):
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>()
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;Sentence: %s&quot;</span> % sent)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">for</span> tree <span class="pysrc-keyword">in</span> trees:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;Parse:\n %s&quot;</span> %tree)
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">&quot;Semantics: %s&quot;</span> %  root_semrep(tree))
<span class="pysrc-output"></span>
<span class="pysrc-output">Sentence: John sees a girl</span>
<span class="pysrc-output">Parse:</span>
<span class="pysrc-output"> (S[SEM=&lt;exists x.(girl(x) &amp; see(john,x))&gt;]</span>
<span class="pysrc-output">  (NP[-LOC, NUM='sg', SEM=&lt;\P.P(john)&gt;]</span>
<span class="pysrc-output">    (PropN[-LOC, NUM='sg', SEM=&lt;\P.P(john)&gt;] John))</span>
<span class="pysrc-output">  (VP[NUM='sg', SEM=&lt;\y.exists x.(girl(x) &amp; see(y,x))&gt;]</span>
<span class="pysrc-output">    (TV[NUM='sg', SEM=&lt;\X y.X(\x.see(y,x))&gt;, TNS='pres'] sees)</span>
<span class="pysrc-output">    (NP[NUM='sg', SEM=&lt;\Q.exists x.(girl(x) &amp; Q(x))&gt;]</span>
<span class="pysrc-output">      (Det[NUM='sg', SEM=&lt;\P Q.exists x.(P(x) &amp; Q(x))&gt;] a)</span>
<span class="pysrc-output">      (Nom[NUM='sg', SEM=&lt;\x.girl(x)&gt;]</span>
<span class="pysrc-output">        (N[NUM='sg', SEM=&lt;\x.girl(x)&gt;] girl)))))</span>
<span class="pysrc-output">Semantics: exists x.(girl(x) &amp; see(john,x))</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">Sentence: every dog barks</span>
<span class="pysrc-output">Parse:</span>
<span class="pysrc-output"> (S[SEM=&lt;all x.(dog(x) -&gt; bark(x))&gt;]</span>
<span class="pysrc-output">  (NP[NUM='sg', SEM=&lt;\Q.all x.(dog(x) -&gt; Q(x))&gt;]</span>
<span class="pysrc-output">    (Det[NUM='sg', SEM=&lt;\P Q.all x.(P(x) -&gt; Q(x))&gt;] every)</span>
<span class="pysrc-output">    (Nom[NUM='sg', SEM=&lt;\x.dog(x)&gt;]</span>
<span class="pysrc-output">      (N[NUM='sg', SEM=&lt;\x.dog(x)&gt;] dog)))</span>
<span class="pysrc-output">  (VP[NUM='sg', SEM=&lt;\x.bark(x)&gt;]</span>
<span class="pysrc-output">    (IV[NUM='sg', SEM=&lt;\x.bark(x)&gt;, TNS='pres'] barks)))</span>
<span class="pysrc-output">Semantics: all x.(dog(x) -&gt; bark(x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sent = <span class="pysrc-string">&quot;every dog barks&quot;</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>result = nltk.sem.util.interpret_sents([sent], gramfile)[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> (syntree, semrep) <span class="pysrc-keyword">in</span> result:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(syntree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>()
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(semrep)
<span class="pysrc-output">(S[SEM=&lt;all x.(dog(x) -&gt; bark(x))&gt;]</span>
<span class="pysrc-output">  (NP[NUM='sg', SEM=&lt;\Q.all x.(dog(x) -&gt; Q(x))&gt;]</span>
<span class="pysrc-output">    (Det[NUM='sg', SEM=&lt;\P Q.all x.(P(x) -&gt; Q(x))&gt;] every)</span>
<span class="pysrc-output">    (Nom[NUM='sg', SEM=&lt;\x.dog(x)&gt;]</span>
<span class="pysrc-output">      (N[NUM='sg', SEM=&lt;\x.dog(x)&gt;] dog)))</span>
<span class="pysrc-output">  (VP[NUM='sg', SEM=&lt;\x.bark(x)&gt;]</span>
<span class="pysrc-output">    (IV[NUM='sg', SEM=&lt;\x.bark(x)&gt;, TNS='pres'] barks)))</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">all x.(dog(x) -&gt; bark(x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>result = nltk.sem.util.evaluate_sents([sent], gramfile, m, g)[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> (syntree, semrel, value) <span class="pysrc-keyword">in</span> result:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(syntree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>()
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(semrep)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>()
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(value)
<span class="pysrc-output">(S[SEM=&lt;all x.(dog(x) -&gt; bark(x))&gt;]</span>
<span class="pysrc-output">  (NP[NUM='sg', SEM=&lt;\Q.all x.(dog(x) -&gt; Q(x))&gt;]</span>
<span class="pysrc-output">    (Det[NUM='sg', SEM=&lt;\P Q.all x.(P(x) -&gt; Q(x))&gt;] every)</span>
<span class="pysrc-output">    (Nom[NUM='sg', SEM=&lt;\x.dog(x)&gt;]</span>
<span class="pysrc-output">      (N[NUM='sg', SEM=&lt;\x.dog(x)&gt;] dog)))</span>
<span class="pysrc-output">  (VP[NUM='sg', SEM=&lt;\x.bark(x)&gt;]</span>
<span class="pysrc-output">    (IV[NUM='sg', SEM=&lt;\x.bark(x)&gt;, TNS='pres'] barks)))</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">all x.(dog(x) -&gt; bark(x))</span>
<span class="pysrc-output"></span>
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sents = [<span class="pysrc-string">'Mary walks'</span>, <span class="pysrc-string">'John sees a dog'</span>]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>results = nltk.sem.util.interpret_sents(sents, <span class="pysrc-string">'grammars/sample_grammars/sem2.fcfg'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> result <span class="pysrc-keyword">in</span> results:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">for</span> (synrep, semrep) <span class="pysrc-keyword">in</span> result:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(synrep)
<span class="pysrc-output">(S[SEM=&lt;walk(mary)&gt;]</span>
<span class="pysrc-output">  (NP[-LOC, NUM='sg', SEM=&lt;\P.P(mary)&gt;]</span>
<span class="pysrc-output">    (PropN[-LOC, NUM='sg', SEM=&lt;\P.P(mary)&gt;] Mary))</span>
<span class="pysrc-output">  (VP[NUM='sg', SEM=&lt;\x.walk(x)&gt;]</span>
<span class="pysrc-output">    (IV[NUM='sg', SEM=&lt;\x.walk(x)&gt;, TNS='pres'] walks)))</span>
<span class="pysrc-output">(S[SEM=&lt;exists x.(dog(x) &amp; see(john,x))&gt;]</span>
<span class="pysrc-output">  (NP[-LOC, NUM='sg', SEM=&lt;\P.P(john)&gt;]</span>
<span class="pysrc-output">    (PropN[-LOC, NUM='sg', SEM=&lt;\P.P(john)&gt;] John))</span>
<span class="pysrc-output">  (VP[NUM='sg', SEM=&lt;\y.exists x.(dog(x) &amp; see(y,x))&gt;]</span>
<span class="pysrc-output">    (TV[NUM='sg', SEM=&lt;\X y.X(\x.see(y,x))&gt;, TNS='pres'] sees)</span>
<span class="pysrc-output">    (NP[NUM='sg', SEM=&lt;\Q.exists x.(dog(x) &amp; Q(x))&gt;]</span>
<span class="pysrc-output">      (Det[NUM='sg', SEM=&lt;\P Q.exists x.(P(x) &amp; Q(x))&gt;] a)</span>
<span class="pysrc-output">      (Nom[NUM='sg', SEM=&lt;\x.dog(x)&gt;]</span>
<span class="pysrc-output">        (N[NUM='sg', SEM=&lt;\x.dog(x)&gt;] dog)))))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="cooper-storage">
<h1>11&nbsp;&nbsp;&nbsp;Cooper Storage</h1>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.sem <span class="pysrc-keyword">import</span> cooper_storage <span class="pysrc-keyword">as</span> cs
<span class="pysrc-prompt">&gt;&gt;&gt; </span>sentence = <span class="pysrc-string">'every girl chases a dog'</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>trees = cs.parse_with_bindops(sentence, grammar=<span class="pysrc-string">'grammars/book_grammars/storage.fcfg'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>semrep = trees[0].label()[<span class="pysrc-string">'SEM'</span>]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>cs_semrep = cs.CooperStore(semrep)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(cs_semrep.core)
<span class="pysrc-output">chase(z2,z4)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> bo <span class="pysrc-keyword">in</span> cs_semrep.store:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(bo)
<span class="pysrc-output">bo(\P.all x.(girl(x) -&gt; P(x)),z2)</span>
<span class="pysrc-output">bo(\P.exists x.(dog(x) &amp; P(x)),z4)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>cs_semrep.s_retrieve(trace=True)
<span class="pysrc-output">Permutation 1</span>
<span class="pysrc-output">   (\P.all x.(girl(x) -&gt; P(x)))(\z2.chase(z2,z4))</span>
<span class="pysrc-output">   (\P.exists x.(dog(x) &amp; P(x)))(\z4.all x.(girl(x) -&gt; chase(x,z4)))</span>
<span class="pysrc-output">Permutation 2</span>
<span class="pysrc-output">   (\P.exists x.(dog(x) &amp; P(x)))(\z4.chase(z2,z4))</span>
<span class="pysrc-output">   (\P.all x.(girl(x) -&gt; P(x)))(\z2.exists x.(dog(x) &amp; chase(z2,x)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> reading <span class="pysrc-keyword">in</span> cs_semrep.readings:
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(reading)
<span class="pysrc-output">exists x.(dog(x) &amp; all z3.(girl(z3) -&gt; chase(z3,x)))</span>
<span class="pysrc-output">all x.(girl(x) -&gt; exists z4.(dog(z4) &amp; chase(x,z4)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
</body>
</html>
