<?xml version="1.0" encoding="ascii" ?>

<script language="javascript" type="text/javascript">

function astext(node)
{
    return node.innerHTML.replace(/(<([^>]+)>)/ig,"")
                         .replace(/&gt;/ig, ">")
                         .replace(/&lt;/ig, "<")
                         .replace(/&quot;/ig, '"')
                         .replace(/&amp;/ig, "&");
}

function copy_notify(node, bar_color, data)
{
    // The outer box: relative + inline positioning.
    var box1 = document.createElement("div");
    box1.style.position = "relative";
    box1.style.display = "inline";
    box1.style.top = "2em";
    box1.style.left = "1em";
  
    // A shadow for fun
    var shadow = document.createElement("div");
    shadow.style.position = "absolute";
    shadow.style.left = "-1.3em";
    shadow.style.top = "-1.3em";
    shadow.style.background = "#404040";
    
    // The inner box: absolute positioning.
    var box2 = document.createElement("div");
    box2.style.position = "relative";
    box2.style.border = "1px solid #a0a0a0";
    box2.style.left = "-.2em";
    box2.style.top = "-.2em";
    box2.style.background = "white";
    box2.style.padding = ".3em .4em .3em .4em";
    box2.style.fontStyle = "normal";
    box2.style.background = "#f0e0e0";

    node.insertBefore(box1, node.childNodes.item(0));
    box1.appendChild(shadow);
    shadow.appendChild(box2);
    box2.innerHTML="Copied&nbsp;to&nbsp;the&nbsp;clipboard: " +
                   "<pre class='copy-notify'>"+
                   data+"</pre>";
    setTimeout(function() { node.removeChild(box1); }, 1000);

    var elt = node.parentNode.firstChild;
    elt.style.background = "#ffc0c0";
    setTimeout(function() { elt.style.background = bar_color; }, 200);
}

function copy_codeblock_to_clipboard(node)
{
    var data = astext(node)+"\n";
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#40a060", data);
    }
}

function copy_doctest_to_clipboard(node)
{
    var s = astext(node)+"\n   ";
    var data = "";

    var start = 0;
    var end = s.indexOf("\n");
    while (end >= 0) {
        if (s.substring(start, start+4) == ">>> ") {
            data += s.substring(start+4, end+1);
        }
        else if (s.substring(start, start+4) == "... ") {
            data += s.substring(start+4, end+1);
        }
        /*
        else if (end-start > 1) {
            data += "# " + s.substring(start, end+1);
        }*/
        // Grab the next line.
        start = end+1;
        end = s.indexOf("\n", start);
    }
    
    if (copy_text_to_clipboard(data)) {
        copy_notify(node, "#4060a0", data);
    }
}
    
function copy_text_to_clipboard(data)
{
    if (window.clipboardData) {
        window.clipboardData.setData("Text", data);
        return true;
     }
    else if (window.netscape) {
        // w/ default firefox settings, permission will be denied for this:
        netscape.security.PrivilegeManager
                      .enablePrivilege("UniversalXPConnect");
    
        var clip = Components.classes["@mozilla.org/widget/clipboard;1"]
                      .createInstance(Components.interfaces.nsIClipboard);
        if (!clip) return;
    
        var trans = Components.classes["@mozilla.org/widget/transferable;1"]
                       .createInstance(Components.interfaces.nsITransferable);
        if (!trans) return;
    
        trans.addDataFlavor("text/unicode");
    
        var str = new Object();
        var len = new Object();
    
        var str = Components.classes["@mozilla.org/supports-string;1"]
                     .createInstance(Components.interfaces.nsISupportsString);
        var datacopy=data;
        str.data=datacopy;
        trans.setTransferData("text/unicode",str,datacopy.length*2);
        var clipid=Components.interfaces.nsIClipboard;
    
        if (!clip) return false;
    
        clip.setData(trans,null,clipid.kGlobalClipboard);
        return true;
    }
    return false;
}
//-->
</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ascii" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>Unit tests for nltk.tree.Tree</title>
<style type="text/css">

/*
:Author: Edward Loper, James Curran
:Copyright: This stylesheet has been placed in the public domain.

Stylesheet for use with Docutils.

This stylesheet defines new css classes used by NLTK.

It uses a Python syntax highlighting scheme that matches
the colour scheme used by IDLE, which makes it easier for
beginners to check they are typing things in correctly.
*/

/* Include the standard docutils stylesheet. */
@import url(default.css);

/* Custom inline roles */
span.placeholder    { font-style: italic; font-family: monospace; }
span.example        { font-style: italic; }
span.emphasis       { font-style: italic; }
span.termdef        { font-weight: bold; }
/*span.term           { font-style: italic; }*/
span.category       { font-variant: small-caps; }
span.feature        { font-variant: small-caps; }
span.fval           { font-style: italic; }
span.math           { font-style: italic; }
span.mathit         { font-style: italic; }
span.lex            { font-variant: small-caps; }
span.guide-linecount{ text-align: right; display: block;}

/* Python souce code listings */
span.pysrc-prompt   { color: #9b0000; }
span.pysrc-more     { color: #9b00ff; }
span.pysrc-keyword  { color: #e06000; }
span.pysrc-builtin  { color: #940094; }
span.pysrc-string   { color: #00aa00; }
span.pysrc-comment  { color: #ff0000; }
span.pysrc-output   { color: #0000ff; }
span.pysrc-except   { color: #ff0000; }
span.pysrc-defname  { color: #008080; }


/* Doctest blocks */
pre.doctest         { margin: 0; padding: 0; font-weight: bold; }
div.doctest         { margin: 0 1em 1em 1em; padding: 0; }
table.doctest       { margin: 0; padding: 0;
                      border-top: 1px solid gray;
                      border-bottom: 1px solid gray; }
pre.copy-notify     { margin: 0; padding: 0.2em; font-weight: bold;
                      background-color: #ffffff; }

/* Python source listings */
div.pylisting       { margin: 0 1em 1em 1em; padding: 0; }
table.pylisting     { margin: 0; padding: 0;
                      border-top: 1px solid gray; }
td.caption { border-top: 1px solid black; margin: 0; padding: 0; }
.caption-label { font-weight: bold;  }
td.caption p { margin: 0; padding: 0; font-style: normal;}

table tr td.codeblock { 
  padding: 0.2em ! important; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeffee;
}

table tr td.doctest  { 
  padding: 0.2em; margin: 0;
  border-left: 1px solid gray;
  border-right: 2px solid gray;
  border-top: 0px solid gray;
  border-bottom: 1px solid gray;
  font-weight: bold; background-color: #eeeeff;
}

td.codeblock table tr td.copybar {
    background: #40a060; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }
td.doctest table tr td.copybar {
    background: #4060a0; border: 1px solid gray;
    font-family: monospace; padding: 0; margin: 0; }

td.pysrc { padding-left: 0.5em; }

img.callout { border-width: 0px; }

table.docutils {
    border-style: solid;
    border-width: 1px;
    margin-top: 6px;
    border-color: grey;
    border-collapse: collapse; }

table.docutils th {
    border-style: none;
    border-width: 1px;
    border-color: grey;
    padding: 0 .5em 0 .5em; }

table.docutils td {
    border-style: none;
    border-width: 1px;
    border-color: grey; 
    padding: 0 .5em 0 .5em; }

table.footnote td { padding: 0; }
table.footnote { border-width: 0; }
table.footnote td { border-width: 0; }
table.footnote th { border-width: 0; }

table.noborder { border-width: 0; }

table.example pre { margin-top: 4px; margin-bottom: 0; }

/* For figures & tables */
p.caption { margin-bottom: 0; }
div.figure { text-align: center; }

/* The index */
div.index { border: 1px solid black;
            background-color: #eeeeee; }
div.index h1 { padding-left: 0.5em; margin-top: 0.5ex;
               border-bottom: 1px solid black; }
ul.index { margin-left: 0.5em; padding-left: 0; }
li.index { list-style-type: none; }
p.index-heading { font-size: 120%; font-style: italic; margin: 0; }
li.index ul { margin-left: 2em; padding-left: 0; }

/* 'Note' callouts */
div.note
{
  border-right:   #87ceeb 1px solid;
  padding-right: 4px;
  border-top: #87ceeb 1px solid;
  padding-left: 4px;
  padding-bottom: 4px;
  margin: 2px 5% 10px;
  border-left: #87ceeb 1px solid;
  padding-top: 4px;
  border-bottom: #87ceeb 1px solid;
  font-style: normal;
  font-family: verdana, arial;
  background-color: #b0c4de;
}

table.avm { border: 0px solid black; width: 0; }
table.avm tbody tr {border: 0px solid black; }
table.avm tbody tr td { padding: 2px; }
table.avm tbody tr td.avm-key { padding: 5px; font-variant: small-caps; }
table.avm tbody tr td.avm-eq { padding: 5px; }
table.avm tbody tr td.avm-val { padding: 5px; font-style: italic; }
p.avm-empty { font-style: normal; }
table.avm colgroup col { border: 0px solid black; }
table.avm tbody tr td.avm-topleft 
    { border-left: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botleft 
    { border-left: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-topright
    { border-right: 2px solid #000080; border-top: 2px solid #000080; }
table.avm tbody tr td.avm-botright
    { border-right: 2px solid #000080; border-bottom: 2px solid #000080; }
table.avm tbody tr td.avm-left
    { border-left: 2px solid #000080; }
table.avm tbody tr td.avm-right
    { border-right: 2px solid #000080; }
table.avm tbody tr td.avm-topbotleft
    { border: 2px solid #000080; border-right: 0px solid black; }
table.avm tbody tr td.avm-topbotright
    { border: 2px solid #000080; border-left: 0px solid black; }
table.avm tbody tr td.avm-ident
    { font-size: 80%; padding: 0; padding-left: 2px; vertical-align: top; }
.avm-pointer
{ border: 1px solid #008000; padding: 1px; color: #008000; 
  background: #c0ffc0; font-style: normal; }

table.gloss { border: 0px solid black; width: 0; }
table.gloss tbody tr { border: 0px solid black; }
table.gloss tbody tr td { border: 0px solid black; }
table.gloss colgroup col { border: 0px solid black; }
table.gloss p { margin: 0; padding: 0; }

table.rst-example { border: 1px solid black; }
table.rst-example tbody tr td { background: #eeeeee; }
table.rst-example thead tr th { background: #c0ffff; }
td.rst-raw { width: 0; }

/* Used by nltk.org/doc/test: */
div.doctest-list { text-align: center; }
table.doctest-list { border: 1px solid black;
  margin-left: auto; margin-right: auto;
}
table.doctest-list tbody tr td { background: #eeeeee;
  border: 1px solid #cccccc; text-align: left; }
table.doctest-list thead tr th { background: #304050; color: #ffffff;
  border: 1px solid #000000;}
table.doctest-list thead tr a { color: #ffffff; }
span.doctest-passed { color: #008000; }
span.doctest-failed { color: #800000; }

</style>
</head>
<body>
<div class="document" id="unit-tests-for-nltk-tree-tree">
<h1 class="title">Unit tests for nltk.tree.Tree</h1>

<!-- Copyright (C) 2001-2014 NLTK Project -->
<!-- For license information, see LICENSE.TXT -->
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.tree <span class="pysrc-keyword">import</span> *</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Some trees to run tests on:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dp1 = Tree(<span class="pysrc-string">'dp'</span>, [Tree(<span class="pysrc-string">'d'</span>, [<span class="pysrc-string">'the'</span>]), Tree(<span class="pysrc-string">'np'</span>, [<span class="pysrc-string">'dog'</span>])])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dp2 = Tree(<span class="pysrc-string">'dp'</span>, [Tree(<span class="pysrc-string">'d'</span>, [<span class="pysrc-string">'the'</span>]), Tree(<span class="pysrc-string">'np'</span>, [<span class="pysrc-string">'cat'</span>])])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>vp = Tree(<span class="pysrc-string">'vp'</span>, [Tree(<span class="pysrc-string">'v'</span>, [<span class="pysrc-string">'chased'</span>]), dp2])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree = Tree(<span class="pysrc-string">'s'</span>, [dp1, vp])
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree)
<span class="pysrc-output">(s (dp (d the) (np dog)) (vp (v chased) (dp (d the) (np cat))))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The node label is accessed using the <cite>label()</cite> method:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dp1.label(), dp2.label(), vp.label(), tree.label()
<span class="pysrc-output">('dp', 'dp', 'vp', 's')</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree[1,1,1,0])
<span class="pysrc-output">cat</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The <cite>treepositions</cite> method returns a list of the tree positions of
subtrees and leaves in a tree.  By default, it gives the position of
every tree, subtree, and leaf, in prefix order:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree.treepositions())
<span class="pysrc-output">[(), (0,), (0, 0), (0, 0, 0), (0, 1), (0, 1, 0), (1,), (1, 0), (1, 0, 0), (1, 1), (1, 1, 0), (1, 1, 0, 0), (1, 1, 1), (1, 1, 1, 0)]</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>In addition to <cite>str</cite> and <cite>repr</cite>, several methods exist to convert a
tree object to one of several standard tree encodings:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree.pprint_latex_qtree())
<span class="pysrc-output">\Tree [.s</span>
<span class="pysrc-output">        [.dp [.d the ] [.np dog ] ]</span>
<span class="pysrc-output">        [.vp [.v chased ] [.dp [.d the ] [.np cat ] ] ] ]</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Trees can be initialized from treebank strings:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree2 = Tree.fromstring(<span class="pysrc-string">'(S (NP I) (VP (V enjoyed) (NP my cookie)))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree2)
<span class="pysrc-output">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Trees can be compared for equality:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree == Tree.fromstring(str(tree))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree2 == Tree.fromstring(str(tree2))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree == tree2
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree == Tree.fromstring(str(tree2))
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree2 == Tree.fromstring(str(tree))
<span class="pysrc-output">False</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree != Tree.fromstring(str(tree))
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree2 != Tree.fromstring(str(tree2))
<span class="pysrc-output">False</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree != tree2
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree != Tree.fromstring(str(tree2))
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree2 != Tree.fromstring(str(tree))
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree &lt; tree2 <span class="pysrc-keyword">or</span> tree &gt; tree2
<span class="pysrc-output">True</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="tree-parsing">
<h1>1&nbsp;&nbsp;&nbsp;Tree Parsing</h1>
<p>The class method <cite>Tree.fromstring()</cite> can be used to parse trees, and it
provides some additional options.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree = Tree.fromstring(<span class="pysrc-string">'(S (NP I) (VP (V enjoyed) (NP my cookie)))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree)
<span class="pysrc-output">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>When called on a subclass of <cite>Tree</cite>, it will create trees of that
type:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree = ImmutableTree.fromstring(<span class="pysrc-string">'(VP (V enjoyed) (NP my cookie))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree)
<span class="pysrc-output">(VP (V enjoyed) (NP my cookie))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(type(tree))
<span class="pysrc-output">&lt;class 'nltk.tree.ImmutableTree'&gt;</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>tree[1] = <span class="pysrc-string">'x'</span>
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableTree may not be modified</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> tree[0]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableTree may not be modified</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The <tt class="doctest"><span class="pre">brackets</span></tt> parameter can be used to specify two characters that
should be used as brackets:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'[S [NP I] [VP [V enjoyed] [NP my cookie]]]'</span>,
<span class="pysrc-more">... </span>                 brackets=<span class="pysrc-string">'[]'</span>))
<span class="pysrc-output">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'&lt;S &lt;NP I&gt; &lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;&gt;'</span>,
<span class="pysrc-more">... </span>                 brackets=<span class="pysrc-string">'&lt;&gt;'</span>))
<span class="pysrc-output">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>If <tt class="doctest"><span class="pre">brackets</span></tt> is not a string, or is not exactly two characters,
then <cite>Tree.fromstring</cite> raises an exception:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'&lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;'</span>, brackets=<span class="pysrc-string">''</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">TypeError: brackets must be a length-2 string</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'&lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;'</span>, brackets=<span class="pysrc-string">'&lt;&lt;&gt;&gt;'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">TypeError: brackets must be a length-2 string</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'&lt;VP &lt;V enjoyed&gt; &lt;NP my cookie&gt;&gt;'</span>, brackets=12)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">TypeError: brackets must be a length-2 string</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'&lt;&lt;NP my cookie&gt;&gt;'</span>, brackets=(<span class="pysrc-string">'&lt;&lt;'</span>,<span class="pysrc-string">'&gt;&gt;'</span>))
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">TypeError: brackets must be a length-2 string</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>(We may add support for multi-character brackets in the future, in
which case the <tt class="doctest"><span class="pre">brackets=(<span class="pysrc-string">'&lt;&lt;'</span>,<span class="pysrc-string">'&gt;&gt;'</span>)</span></tt> example would start working.)</p>
<p>Whitespace brackets are not permitted:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'(NP my cookie\n'</span>, brackets=<span class="pysrc-string">'(\n'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">TypeError: whitespace brackets not allowed</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>If an invalid tree is given to Tree.fromstring, then it raises a
ValueError, with a description of the problem:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'(NP my cookie) (NP my milk)'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Tree.fromstring(): expected 'end-of-string' but got '(NP'</span>
<span class="pysrc-except">            at index 15.</span>
<span class="pysrc-except">                &quot;...y cookie) (NP my mil...&quot;</span>
<span class="pysrc-except">                              ^</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">')NP my cookie('</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Tree.fromstring(): expected '(' but got ')'</span>
<span class="pysrc-except">            at index 0.</span>
<span class="pysrc-except">                &quot;)NP my coo...&quot;</span>
<span class="pysrc-except">                 ^</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'(NP my cookie))'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Tree.fromstring(): expected 'end-of-string' but got ')'</span>
<span class="pysrc-except">            at index 14.</span>
<span class="pysrc-except">                &quot;...my cookie))&quot;</span>
<span class="pysrc-except">                              ^</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'my cookie)'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Tree.fromstring(): expected '(' but got 'my'</span>
<span class="pysrc-except">            at index 0.</span>
<span class="pysrc-except">                &quot;my cookie)&quot;</span>
<span class="pysrc-except">                 ^</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">'(NP my cookie'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Tree.fromstring(): expected ')' but got 'end-of-string'</span>
<span class="pysrc-except">            at index 13.</span>
<span class="pysrc-except">                &quot;... my cookie&quot;</span>
<span class="pysrc-except">                              ^</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>Tree.fromstring(<span class="pysrc-string">''</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Tree.fromstring(): expected '(' but got 'end-of-string'</span>
<span class="pysrc-except">            at index 0.</span>
<span class="pysrc-except">                &quot;&quot;</span>
<span class="pysrc-except">                 ^</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Trees with no children are supported:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'(S)'</span>))
<span class="pysrc-output">(S )</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'(X (Y) (Z))'</span>))
<span class="pysrc-output">(X (Y ) (Z ))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Trees with an empty node label and no children are supported:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'()'</span>))
<span class="pysrc-output">( )</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'(X () ())'</span>))
<span class="pysrc-output">(X ( ) ( ))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Trees with an empty node label and children are supported, but only if the
first child is not a leaf (otherwise, it will be treated as the node label).</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'((A) (B) (C))'</span>))
<span class="pysrc-output">( (A ) (B ) (C ))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'((A) leaf)'</span>))
<span class="pysrc-output">( (A ) leaf)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'(((())))'</span>))
<span class="pysrc-output">( ( ( ( ))))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The optional arguments <cite>read_node</cite> and <cite>read_leaf</cite> may be used to
transform the string values of nodes or leaves.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'(A b (C d e) (F (G h i)))'</span>,
<span class="pysrc-more">... </span>                 read_node=<span class="pysrc-keyword">lambda</span> s: <span class="pysrc-string">'&lt;%s&gt;'</span> % s,
<span class="pysrc-more">... </span>                 read_leaf=<span class="pysrc-keyword">lambda</span> s: <span class="pysrc-string">'&quot;%s&quot;'</span> % s))
<span class="pysrc-output">(&lt;A&gt; &quot;b&quot; (&lt;C&gt; &quot;d&quot; &quot;e&quot;) (&lt;F&gt; (&lt;G&gt; &quot;h&quot; &quot;i&quot;)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>These transformation functions are typically used when the node or
leaf labels should be parsed to a non-string value (such as a feature
structure).  If node and leaf labels need to be able to include
whitespace, then you must also use the optional <cite>node_pattern</cite> and
<cite>leaf_pattern</cite> arguments.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">from</span> nltk.featstruct <span class="pysrc-keyword">import</span> FeatStruct
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree = Tree.fromstring(<span class="pysrc-string">'([cat=NP] [lex=the] [lex=dog])'</span>,
<span class="pysrc-more">... </span>                  read_node=FeatStruct, read_leaf=FeatStruct)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree.set_label(tree.label().unify(FeatStruct(<span class="pysrc-string">'[num=singular]'</span>)))
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(tree)
<span class="pysrc-output">([cat='NP', num='singular'] [lex='the'] [lex='dog'])</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The optional argument <tt class="doctest"><span class="pre">remove_empty_top_bracketing</span></tt> can be used to
remove any top-level empty bracketing that occurs.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'((S (NP I) (VP (V enjoyed) (NP my cookie))))'</span>,
<span class="pysrc-more">... </span>                 remove_empty_top_bracketing=True))
<span class="pysrc-output">(S (NP I) (VP (V enjoyed) (NP my cookie)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>It will not remove a top-level empty bracketing with multiple children:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'((A a) (B b))'</span>))
<span class="pysrc-output">( (A a) (B b))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="parented-trees">
<h1>2&nbsp;&nbsp;&nbsp;Parented Trees</h1>
<p><cite>ParentedTree</cite> is a subclass of <cite>Tree</cite> that automatically maintains
parent pointers for single-parented trees.  Parented trees can be
created directly from a node label and a list of children:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = (
<span class="pysrc-more">... </span>    ParentedTree(<span class="pysrc-string">'VP'</span>, [
<span class="pysrc-more">... </span>        ParentedTree(<span class="pysrc-string">'VERB'</span>, [<span class="pysrc-string">'saw'</span>]),
<span class="pysrc-more">... </span>        ParentedTree(<span class="pysrc-string">'NP'</span>, [
<span class="pysrc-more">... </span>            ParentedTree(<span class="pysrc-string">'DET'</span>, [<span class="pysrc-string">'the'</span>]),
<span class="pysrc-more">... </span>            ParentedTree(<span class="pysrc-string">'NOUN'</span>, [<span class="pysrc-string">'dog'</span>])])]))
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(ptree)
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Parented trees can be created from strings using the classmethod
<cite>ParentedTree.fromstring</cite>:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = ParentedTree.fromstring(<span class="pysrc-string">'(VP (VERB saw) (NP (DET the) (NOUN dog)))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(ptree)
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(type(ptree))
<span class="pysrc-output">&lt;class 'nltk.tree.ParentedTree'&gt;</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Parented trees can also be created by using the classmethod
<cite>ParentedTree.convert</cite> to convert another type of tree to a parented
tree:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>tree = Tree.fromstring(<span class="pysrc-string">'(VP (VERB saw) (NP (DET the) (NOUN dog)))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = ParentedTree.convert(tree)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(ptree)
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(type(ptree))
<span class="pysrc-output">&lt;class 'nltk.tree.ParentedTree'&gt;</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<!-- clean-up:

>>> del tree -->
<p><cite>ParentedTree</cite>s should never be used in the same tree as <cite>Tree</cite>s
or <cite>MultiParentedTree</cite>s.  Mixing tree implementations may result in
incorrect parent pointers and in <cite>TypeError</cite> exceptions:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># Inserting a Tree in a ParentedTree gives an exception:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ParentedTree(<span class="pysrc-string">'NP'</span>, [
<span class="pysrc-more">... </span>    Tree(<span class="pysrc-string">'DET'</span>, [<span class="pysrc-string">'the'</span>]), Tree(<span class="pysrc-string">'NOUN'</span>, [<span class="pysrc-string">'dog'</span>])])
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">TypeError: Can not insert a non-ParentedTree into a ParentedTree</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># inserting a ParentedTree in a Tree gives incorrect parent pointers:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>broken_tree = Tree(<span class="pysrc-string">'NP'</span>, [
<span class="pysrc-more">... </span>    ParentedTree(<span class="pysrc-string">'DET'</span>, [<span class="pysrc-string">'the'</span>]), ParentedTree(<span class="pysrc-string">'NOUN'</span>, [<span class="pysrc-string">'dog'</span>])])
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(broken_tree[0].parent())
<span class="pysrc-output">None</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="section" id="parented-tree-methods">
<h2>2.1&nbsp;&nbsp;&nbsp;Parented Tree Methods</h2>
<p>In addition to all the methods defined by the <cite>Tree</cite> class, the
<cite>ParentedTree</cite> class adds six new methods whose values are
automatically updated whenver a parented tree is modified: <cite>parent()</cite>,
<cite>parent_index()</cite>, <cite>left_sibling()</cite>, <cite>right_sibling()</cite>, <cite>root()</cite>, and
<cite>treeposition()</cite>.</p>
<p>The <cite>parent()</cite> method contains a <cite>ParentedTree</cite>'s parent, if it has
one; and <tt class="doctest"><span class="pre">None</span></tt> otherwise.  <cite>ParentedTree</cite>s that do not have
parents are known as &quot;root trees.&quot;</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> subtree <span class="pysrc-keyword">in</span> ptree.subtrees():
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(subtree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'  Parent = %s'</span> % subtree.parent())
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">  Parent = None</span>
<span class="pysrc-output">(VERB saw)</span>
<span class="pysrc-output">  Parent = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">(NP (DET the) (NOUN dog))</span>
<span class="pysrc-output">  Parent = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">(DET the)</span>
<span class="pysrc-output">  Parent = (NP (DET the) (NOUN dog))</span>
<span class="pysrc-output">(NOUN dog)</span>
<span class="pysrc-output">  Parent = (NP (DET the) (NOUN dog))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The <cite>parent_index()</cite> method stores the index of a tree in its parent's
child list.  If a tree does not have a parent, then its <cite>parent_index</cite>
is <tt class="doctest"><span class="pre">None</span></tt>.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> subtree <span class="pysrc-keyword">in</span> ptree.subtrees():
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(subtree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'  Parent Index = %s'</span> % subtree.parent_index())
<span class="pysrc-more">... </span>    assert (subtree.parent() <span class="pysrc-keyword">is</span> None <span class="pysrc-keyword">or</span>
<span class="pysrc-more">... </span>            subtree.parent()[subtree.parent_index()] <span class="pysrc-keyword">is</span> subtree)
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">  Parent Index = None</span>
<span class="pysrc-output">(VERB saw)</span>
<span class="pysrc-output">  Parent Index = 0</span>
<span class="pysrc-output">(NP (DET the) (NOUN dog))</span>
<span class="pysrc-output">  Parent Index = 1</span>
<span class="pysrc-output">(DET the)</span>
<span class="pysrc-output">  Parent Index = 0</span>
<span class="pysrc-output">(NOUN dog)</span>
<span class="pysrc-output">  Parent Index = 1</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Note that <tt class="doctest"><span class="pre">ptree.parent().index(ptree)</span></tt> is <em>not</em> equivalent to
<tt class="doctest"><span class="pre">ptree.parent_index()</span></tt>.  In particular, <tt class="doctest"><span class="pre">ptree.parent().index(ptree)</span></tt>
will return the index of the first child of <tt class="doctest"><span class="pre">ptree.parent()</span></tt> that is
equal to <tt class="doctest"><span class="pre">ptree</span></tt> (using <tt class="doctest"><span class="pre">==</span></tt>); and that child may not be
<tt class="doctest"><span class="pre">ptree</span></tt>:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>on_and_on = ParentedTree(<span class="pysrc-string">'CONJP'</span>, [
<span class="pysrc-more">... </span>    ParentedTree(<span class="pysrc-string">'PREP'</span>, [<span class="pysrc-string">'on'</span>]),
<span class="pysrc-more">... </span>    ParentedTree(<span class="pysrc-string">'COJN'</span>, [<span class="pysrc-string">'and'</span>]),
<span class="pysrc-more">... </span>    ParentedTree(<span class="pysrc-string">'PREP'</span>, [<span class="pysrc-string">'on'</span>])])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>second_on = on_and_on[2]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(second_on.parent_index())
<span class="pysrc-output">2</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(second_on.parent().index(second_on))
<span class="pysrc-output">0</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The methods <cite>left_sibling()</cite> and <cite>right_sibling()</cite> can be used to get a
parented tree's siblings.  If a tree does not have a left or right
sibling, then the corresponding method's value is <tt class="doctest"><span class="pre">None</span></tt>:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> subtree <span class="pysrc-keyword">in</span> ptree.subtrees():
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(subtree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'  Left Sibling  = %s'</span> % subtree.left_sibling())
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'  Right Sibling = %s'</span> % subtree.right_sibling())
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">  Left Sibling  = None</span>
<span class="pysrc-output">  Right Sibling = None</span>
<span class="pysrc-output">(VERB saw)</span>
<span class="pysrc-output">  Left Sibling  = None</span>
<span class="pysrc-output">  Right Sibling = (NP (DET the) (NOUN dog))</span>
<span class="pysrc-output">(NP (DET the) (NOUN dog))</span>
<span class="pysrc-output">  Left Sibling  = (VERB saw)</span>
<span class="pysrc-output">  Right Sibling = None</span>
<span class="pysrc-output">(DET the)</span>
<span class="pysrc-output">  Left Sibling  = None</span>
<span class="pysrc-output">  Right Sibling = (NOUN dog)</span>
<span class="pysrc-output">(NOUN dog)</span>
<span class="pysrc-output">  Left Sibling  = (DET the)</span>
<span class="pysrc-output">  Right Sibling = None</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>A parented tree's root tree can be accessed using the <cite>root()</cite>
method.  This method follows the tree's parent pointers until it
finds a tree without a parent.  If a tree does not have a parent, then
it is its own root:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> subtree <span class="pysrc-keyword">in</span> ptree.subtrees():
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(subtree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'  Root = %s'</span> % subtree.root())
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">(VERB saw)</span>
<span class="pysrc-output">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">(NP (DET the) (NOUN dog))</span>
<span class="pysrc-output">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">(DET the)</span>
<span class="pysrc-output">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">(NOUN dog)</span>
<span class="pysrc-output">  Root = (VP (VERB saw) (NP (DET the) (NOUN dog)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>The <cite>treeposition()</cite> method can be used to find a tree's treeposition
relative to its root:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">for</span> subtree <span class="pysrc-keyword">in</span> ptree.subtrees():
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(subtree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'  Tree Position = %s'</span> % (subtree.treeposition(),))
<span class="pysrc-more">... </span>    assert subtree.root()[subtree.treeposition()] <span class="pysrc-keyword">is</span> subtree
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN dog)))</span>
<span class="pysrc-output">  Tree Position = ()</span>
<span class="pysrc-output">(VERB saw)</span>
<span class="pysrc-output">  Tree Position = (0,)</span>
<span class="pysrc-output">(NP (DET the) (NOUN dog))</span>
<span class="pysrc-output">  Tree Position = (1,)</span>
<span class="pysrc-output">(DET the)</span>
<span class="pysrc-output">  Tree Position = (1, 0)</span>
<span class="pysrc-output">(NOUN dog)</span>
<span class="pysrc-output">  Tree Position = (1, 1)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Whenever a parented tree is modified, all of the methods described
above (<cite>parent()</cite>, <cite>parent_index()</cite>, <cite>left_sibling()</cite>, <cite>right_sibling()</cite>,
<cite>root()</cite>, and <cite>treeposition()</cite>) are automatically updated.  For example,
if we replace <tt class="doctest"><span class="pre">ptree</span></tt>'s subtree for the word &quot;dog&quot; with a new
subtree for &quot;cat,&quot; the method values for both the &quot;dog&quot; subtree and the
&quot;cat&quot; subtree get automatically updated:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># Replace the dog with a cat</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>dog = ptree[1,1]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>cat = ParentedTree(<span class="pysrc-string">'NOUN'</span>, [<span class="pysrc-string">'cat'</span>])
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[1,1] = cat</pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># the noun phrase is no longer the dog's parent:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dog.parent(), dog.parent_index(), dog.left_sibling())
<span class="pysrc-output">None None None</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># dog is now its own root.</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dog.root())
<span class="pysrc-output">(NOUN dog)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(dog.treeposition())
<span class="pysrc-output">()</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># the cat's parent is now the noun phrase:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(cat.parent())
<span class="pysrc-output">(NP (DET the) (NOUN cat))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(cat.parent_index())
<span class="pysrc-output">1</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(cat.left_sibling())
<span class="pysrc-output">(DET the)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(cat.root())
<span class="pysrc-output">(VP (VERB saw) (NP (DET the) (NOUN cat)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(cat.treeposition())
<span class="pysrc-output">(1, 1)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="parentedtree-regression-tests">
<h2>2.2&nbsp;&nbsp;&nbsp;ParentedTree Regression Tests</h2>
<p>Keep track of all trees that we create (including subtrees) using this
variable:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>all_ptrees = []</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Define a helper funciton to create new parented trees:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">def</span> <span class="pysrc-defname">make_ptree</span>(s):
<span class="pysrc-more">... </span>    ptree = ParentedTree.convert(Tree.fromstring(s))
<span class="pysrc-more">... </span>    all_ptrees.extend(t <span class="pysrc-keyword">for</span> t <span class="pysrc-keyword">in</span> ptree.subtrees()
<span class="pysrc-more">... </span>                      <span class="pysrc-keyword">if</span> isinstance(t, Tree))
<span class="pysrc-more">... </span>    return ptree</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Define a test function that examines every subtree in all_ptrees; and
checks that all six of its methods are defined correctly.  If any
ptrees are passed as arguments, then they are printed.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">def</span> <span class="pysrc-defname">pcheck</span>(*print_ptrees):
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">for</span> ptree <span class="pysrc-keyword">in</span> all_ptrees:
<span class="pysrc-more">... </span>        <span class="pysrc-comment"># Check ptree's methods.</span>
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">if</span> ptree.parent() <span class="pysrc-keyword">is</span> <span class="pysrc-keyword">not</span> None:
<span class="pysrc-more">... </span>            i = ptree.parent_index()
<span class="pysrc-more">... </span>            assert ptree.parent()[i] <span class="pysrc-keyword">is</span> ptree
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">if</span> i &gt; 0:
<span class="pysrc-more">... </span>                assert ptree.left_sibling() <span class="pysrc-keyword">is</span> ptree.parent()[i-1]
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">if</span> i &lt; (len(ptree.parent())-1):
<span class="pysrc-more">... </span>                assert ptree.right_sibling() <span class="pysrc-keyword">is</span> ptree.parent()[i+1]
<span class="pysrc-more">... </span>            assert len(ptree.treeposition()) &gt; 0
<span class="pysrc-more">... </span>            assert (ptree.treeposition() ==
<span class="pysrc-more">... </span>                    ptree.parent().treeposition() + (ptree.parent_index(),))
<span class="pysrc-more">... </span>            assert ptree.root() <span class="pysrc-keyword">is</span> <span class="pysrc-keyword">not</span> ptree
<span class="pysrc-more">... </span>            assert ptree.root() <span class="pysrc-keyword">is</span> <span class="pysrc-keyword">not</span> None
<span class="pysrc-more">... </span>            assert ptree.root() <span class="pysrc-keyword">is</span> ptree.parent().root()
<span class="pysrc-more">... </span>            assert ptree.root()[ptree.treeposition()] <span class="pysrc-keyword">is</span> ptree
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>            assert ptree.parent_index() <span class="pysrc-keyword">is</span> None
<span class="pysrc-more">... </span>            assert ptree.left_sibling() <span class="pysrc-keyword">is</span> None
<span class="pysrc-more">... </span>            assert ptree.right_sibling() <span class="pysrc-keyword">is</span> None
<span class="pysrc-more">... </span>            assert ptree.root() <span class="pysrc-keyword">is</span> ptree
<span class="pysrc-more">... </span>            assert ptree.treeposition() == ()
<span class="pysrc-more">... </span>        <span class="pysrc-comment"># Check ptree's children's methods:</span>
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> i, child <span class="pysrc-keyword">in</span> enumerate(ptree):
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">if</span> isinstance(child, Tree):
<span class="pysrc-more">... </span>                <span class="pysrc-comment"># pcheck parent() &amp; parent_index() methods</span>
<span class="pysrc-more">... </span>                assert child.parent() <span class="pysrc-keyword">is</span> ptree
<span class="pysrc-more">... </span>                assert child.parent_index() == i
<span class="pysrc-more">... </span>                <span class="pysrc-comment"># pcheck sibling methods</span>
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">if</span> i == 0:
<span class="pysrc-more">... </span>                    assert child.left_sibling() <span class="pysrc-keyword">is</span> None
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>                    assert child.left_sibling() <span class="pysrc-keyword">is</span> ptree[i-1]
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">if</span> i == len(ptree)-1:
<span class="pysrc-more">... </span>                    assert child.right_sibling() <span class="pysrc-keyword">is</span> None
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>                    assert child.right_sibling() <span class="pysrc-keyword">is</span> ptree[i+1]
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">if</span> print_ptrees:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'ok!'</span>, end=<span class="pysrc-string">' '</span>)
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> ptree <span class="pysrc-keyword">in</span> print_ptrees: <span class="pysrc-keyword">print</span>(ptree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'ok!'</span>)</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Run our test function on a variety of newly-created trees:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>pcheck(make_ptree(<span class="pysrc-string">'(A)'</span>))
<span class="pysrc-output">ok! (A )</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>pcheck(make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f)) g) h)'</span>))
<span class="pysrc-output">ok! (A (B (C (D ) (E f)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>pcheck(make_ptree(<span class="pysrc-string">'(A (B) (C c) (D d d) (E e e e))'</span>))
<span class="pysrc-output">ok! (A (B ) (C c) (D d d) (E e e e))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>pcheck(make_ptree(<span class="pysrc-string">'(A (B) (C (c)) (D (d) (d)) (E (e) (e) (e)))'</span>))
<span class="pysrc-output">ok! (A (B ) (C (c )) (D (d ) (d )) (E (e ) (e ) (e )))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Run our test function after performing various tree-modification
operations:</p>
<p><strong>__delitem__()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>e = ptree[0,0,1]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[0,0,1]; pcheck(ptree); pcheck(e)
<span class="pysrc-output">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (E f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[0,0,0]; pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (Q p)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[0,1]; pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (Q p))) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[-1]; pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (Q p))))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[-100]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: index out of range</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[()]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: The tree position () may not be deleted.</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># With slices:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>b = ptree[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[0:0]; pcheck(ptree)
<span class="pysrc-output">ok! (A (B c) (D e) f g (H i) j (K l))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[:1]; pcheck(ptree); pcheck(b)
<span class="pysrc-output">ok! (A (D e) f g (H i) j (K l))</span>
<span class="pysrc-output">ok! (B c)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[-2:]; pcheck(ptree)
<span class="pysrc-output">ok! (A (D e) f g (H i))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[1:3]; pcheck(ptree)
<span class="pysrc-output">ok! (A (D e) (H i))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[5:1000]; pcheck(ptree)
<span class="pysrc-output">ok! (A (B c) (D e) f g (H i))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[-2:1000]; pcheck(ptree)
<span class="pysrc-output">ok! (A (B c) (D e) f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[-100:1]; pcheck(ptree)
<span class="pysrc-output">ok! (A (D e) f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> ptree[1:-2:2]; pcheck(ptree)
<span class="pysrc-output">ok! (A (B c) f (H i) j (K l))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>__setitem__()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>d, e, q = ptree[0,0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0,0,0] = <span class="pysrc-string">'x'</span>; pcheck(ptree); pcheck(d)
<span class="pysrc-output">ok! (A (B (C x (E f) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (D )</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0,0,1] = make_ptree(<span class="pysrc-string">'(X (Y z))'</span>); pcheck(ptree); pcheck(e)
<span class="pysrc-output">ok! (A (B (C x (X (Y z)) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (E f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[1] = d; pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C x (X (Y z)) (Q p)) g) (D ))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[-1] = <span class="pysrc-string">'x'</span>; pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C x (X (Y z)) (Q p)) g) x)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[-100] = <span class="pysrc-string">'y'</span>
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: index out of range</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[()] = make_ptree(<span class="pysrc-string">'(X y)'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: The tree position () may not be assigned to.</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># With slices:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>b = ptree[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0:0] = (<span class="pysrc-string">'x'</span>, make_ptree(<span class="pysrc-string">'(Y)'</span>)); pcheck(ptree)
<span class="pysrc-output">ok! (A x (Y ) (B c) (D e) f g (H i) j (K l))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[2:6] = (); pcheck(ptree); pcheck(b)
<span class="pysrc-output">ok! (A x (Y ) (H i) j (K l))</span>
<span class="pysrc-output">ok! (B c)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[-2:] = (<span class="pysrc-string">'z'</span>, <span class="pysrc-string">'p'</span>); pcheck(ptree)
<span class="pysrc-output">ok! (A x (Y ) (H i) z p)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[1:3] = [make_ptree(<span class="pysrc-string">'(X)'</span>) <span class="pysrc-keyword">for</span> x <span class="pysrc-keyword">in</span> range(10)]; pcheck(ptree)
<span class="pysrc-output">ok! (A x (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) z p)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[5:1000] = []; pcheck(ptree)
<span class="pysrc-output">ok! (A x (X ) (X ) (X ) (X ))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[-2:1000] = [<span class="pysrc-string">'n'</span>]; pcheck(ptree)
<span class="pysrc-output">ok! (A x (X ) (X ) n)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[-100:1] = [make_ptree(<span class="pysrc-string">'(U v)'</span>)]; pcheck(ptree)
<span class="pysrc-output">ok! (A (U v) (X ) (X ) n)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[-1:] = (make_ptree(<span class="pysrc-string">'(X)'</span>) <span class="pysrc-keyword">for</span> x <span class="pysrc-keyword">in</span> range(3)); pcheck(ptree)
<span class="pysrc-output">ok! (A (U v) (X ) (X ) (X ) (X ) (X ))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[1:-2:2] = [<span class="pysrc-string">'x'</span>, <span class="pysrc-string">'y'</span>]; pcheck(ptree)
<span class="pysrc-output">ok! (A (U v) x (X ) y (X ) (X ))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>append()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.append(<span class="pysrc-string">'x'</span>); pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.append(make_ptree(<span class="pysrc-string">'(X (Y z))'</span>)); pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x (X (Y z)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>extend()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.extend([<span class="pysrc-string">'x'</span>, <span class="pysrc-string">'y'</span>, make_ptree(<span class="pysrc-string">'(X (Y z))'</span>)]); pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.extend([]); pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.extend(make_ptree(<span class="pysrc-string">'(X)'</span>) <span class="pysrc-keyword">for</span> x <span class="pysrc-keyword">in</span> range(3)); pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)) (X ) (X ) (X ))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>insert()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.insert(0, make_ptree(<span class="pysrc-string">'(X (Y z))'</span>)); pcheck(ptree)
<span class="pysrc-output">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.insert(-1, make_ptree(<span class="pysrc-string">'(X (Y z))'</span>)); pcheck(ptree)
<span class="pysrc-output">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.insert(-4, make_ptree(<span class="pysrc-string">'(X (Y z))'</span>)); pcheck(ptree)
<span class="pysrc-output">ok! (A (X (Y z)) (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># Note: as with ``list``, inserting at a negative index that</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># gives a position before the start of the list does *not*</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># raise an IndexError exception; it just inserts at 0.</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.insert(-400, make_ptree(<span class="pysrc-string">'(X (Y z))'</span>)); pcheck(ptree)
<span class="pysrc-output">ok! (A</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  (B (C (D ) (E f) (Q p)) g)</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  h)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>pop()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0,0].pop(1); pcheck(ptree)
<span class="pysrc-output">ParentedTree('E', ['f'])</span>
<span class="pysrc-output">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0].pop(-1); pcheck(ptree)
<span class="pysrc-output">'g'</span>
<span class="pysrc-output">ok! (A (B (C (D ) (Q p))) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.pop(); pcheck(ptree)
<span class="pysrc-output">'h'</span>
<span class="pysrc-output">ok! (A (B (C (D ) (Q p))))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.pop(-100)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: index out of range</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>remove()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>e = ptree[0,0,1]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0,0].remove(ptree[0,0,1]); pcheck(ptree); pcheck(e)
<span class="pysrc-output">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (E f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0,0].remove(make_ptree(<span class="pysrc-string">'(Q p)'</span>)); pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (D )) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0,0].remove(make_ptree(<span class="pysrc-string">'(Q p)'</span>))
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ParentedTree('Q', ['p']) is not in list</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.remove(<span class="pysrc-string">'h'</span>); pcheck(ptree)
<span class="pysrc-output">ok! (A (B (C (D )) g))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.remove(<span class="pysrc-string">'h'</span>);
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: 'h' is not in list</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># remove() removes the first subtree that is equal (==) to the</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># given tree, which may not be the identical tree we give it:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (X x) (Y y) (X x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>x1, y, x2 = ptree
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree.remove(ptree[-1]); pcheck(ptree)
<span class="pysrc-output">ok! (A (Y y) (X x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(x1.parent()); pcheck(x1)
<span class="pysrc-output">None</span>
<span class="pysrc-output">ok! (X x)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(x2.parent())
<span class="pysrc-output">(A (Y y) (X x))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Test that a tree can not be given multiple parents:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree = make_ptree(<span class="pysrc-string">'(A (X x) (Y y) (Z z))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>ptree[0] = ptree[1]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: Can not insert a subtree that already has a parent.</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>pcheck()
<span class="pysrc-output">ok!</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>[more to be written]</p>
</div>
<div class="section" id="immutableparentedtree-regression-tests">
<h2>2.3&nbsp;&nbsp;&nbsp;ImmutableParentedTree Regression Tests</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>iptree = ImmutableParentedTree.convert(ptree)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>type(iptree)
<span class="pysrc-output">&lt;class 'nltk.tree.ImmutableParentedTree'&gt;</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> iptree[0]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableParentedTree may not be modified</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>iptree.set_label(<span class="pysrc-string">'newnode'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableParentedTree may not be modified</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="multiparentedtree-regression-tests">
<h2>2.4&nbsp;&nbsp;&nbsp;MultiParentedTree Regression Tests</h2>
<p>Keep track of all trees that we create (including subtrees) using this
variable:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>all_mptrees = []</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Define a helper funciton to create new parented trees:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">def</span> <span class="pysrc-defname">make_mptree</span>(s):
<span class="pysrc-more">... </span>    mptree = MultiParentedTree.convert(Tree.fromstring(s))
<span class="pysrc-more">... </span>    all_mptrees.extend(t <span class="pysrc-keyword">for</span> t <span class="pysrc-keyword">in</span> mptree.subtrees()
<span class="pysrc-more">... </span>                      <span class="pysrc-keyword">if</span> isinstance(t, Tree))
<span class="pysrc-more">... </span>    return mptree</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Define a test function that examines every subtree in all_mptrees; and
checks that all six of its methods are defined correctly.  If any
mptrees are passed as arguments, then they are printed.</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">def</span> <span class="pysrc-defname">mpcheck</span>(*print_mptrees):
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">def</span> <span class="pysrc-defname">has</span>(seq, val): <span class="pysrc-comment"># uses identity comparison</span>
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> item <span class="pysrc-keyword">in</span> seq:
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">if</span> item <span class="pysrc-keyword">is</span> val: return True
<span class="pysrc-more">... </span>        return False
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">for</span> mptree <span class="pysrc-keyword">in</span> all_mptrees:
<span class="pysrc-more">... </span>        <span class="pysrc-comment"># Check mptree's methods.</span>
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">if</span> len(mptree.parents()) == 0:
<span class="pysrc-more">... </span>            assert len(mptree.left_siblings()) == 0
<span class="pysrc-more">... </span>            assert len(mptree.right_siblings()) == 0
<span class="pysrc-more">... </span>            assert len(mptree.roots()) == 1
<span class="pysrc-more">... </span>            assert mptree.roots()[0] <span class="pysrc-keyword">is</span> mptree
<span class="pysrc-more">... </span>            assert mptree.treepositions(mptree) == [()]
<span class="pysrc-more">... </span>            left_siblings = right_siblings = ()
<span class="pysrc-more">... </span>            roots = {id(mptree): 1}
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>            roots = dict((id(r), 0) <span class="pysrc-keyword">for</span> r <span class="pysrc-keyword">in</span> mptree.roots())
<span class="pysrc-more">... </span>            left_siblings = mptree.left_siblings()
<span class="pysrc-more">... </span>            right_siblings = mptree.right_siblings()
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> parent <span class="pysrc-keyword">in</span> mptree.parents():
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">for</span> i <span class="pysrc-keyword">in</span> mptree.parent_indices(parent):
<span class="pysrc-more">... </span>                assert parent[i] <span class="pysrc-keyword">is</span> mptree
<span class="pysrc-more">... </span>                <span class="pysrc-comment"># check left siblings</span>
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">if</span> i &gt; 0:
<span class="pysrc-more">... </span>                    <span class="pysrc-keyword">for</span> j <span class="pysrc-keyword">in</span> range(len(left_siblings)):
<span class="pysrc-more">... </span>                        <span class="pysrc-keyword">if</span> left_siblings[j] <span class="pysrc-keyword">is</span> parent[i-1]:
<span class="pysrc-more">... </span>                            <span class="pysrc-keyword">del</span> left_siblings[j]
<span class="pysrc-more">... </span>                            break
<span class="pysrc-more">... </span>                    <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>                        assert 0, <span class="pysrc-string">'sibling not found!'</span>
<span class="pysrc-more">... </span>                <span class="pysrc-comment"># check ight siblings</span>
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">if</span> i &lt; (len(parent)-1):
<span class="pysrc-more">... </span>                    <span class="pysrc-keyword">for</span> j <span class="pysrc-keyword">in</span> range(len(right_siblings)):
<span class="pysrc-more">... </span>                        <span class="pysrc-keyword">if</span> right_siblings[j] <span class="pysrc-keyword">is</span> parent[i+1]:
<span class="pysrc-more">... </span>                            <span class="pysrc-keyword">del</span> right_siblings[j]
<span class="pysrc-more">... </span>                            break
<span class="pysrc-more">... </span>                    <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>                        assert 0, <span class="pysrc-string">'sibling not found!'</span>
<span class="pysrc-more">... </span>            <span class="pysrc-comment"># check roots</span>
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">for</span> root <span class="pysrc-keyword">in</span> parent.roots():
<span class="pysrc-more">... </span>                assert id(root) <span class="pysrc-keyword">in</span> roots, <span class="pysrc-string">'missing root'</span>
<span class="pysrc-more">... </span>                roots[id(root)] += 1
<span class="pysrc-more">... </span>        <span class="pysrc-comment"># check that we don't have any unexplained values</span>
<span class="pysrc-more">... </span>        assert len(left_siblings)==0, <span class="pysrc-string">'unexpected sibling'</span>
<span class="pysrc-more">... </span>        assert len(right_siblings)==0, <span class="pysrc-string">'unexpected sibling'</span>
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> v <span class="pysrc-keyword">in</span> roots.values(): assert v&gt;0, roots <span class="pysrc-comment">#'unexpected root'</span>
<span class="pysrc-more">... </span>        <span class="pysrc-comment"># check treepositions</span>
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> root <span class="pysrc-keyword">in</span> mptree.roots():
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">for</span> treepos <span class="pysrc-keyword">in</span> mptree.treepositions(root):
<span class="pysrc-more">... </span>                assert root[treepos] <span class="pysrc-keyword">is</span> mptree
<span class="pysrc-more">... </span>        <span class="pysrc-comment"># Check mptree's children's methods:</span>
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> i, child <span class="pysrc-keyword">in</span> enumerate(mptree):
<span class="pysrc-more">... </span>            <span class="pysrc-keyword">if</span> isinstance(child, Tree):
<span class="pysrc-more">... </span>                <span class="pysrc-comment"># mpcheck parent() &amp; parent_index() methods</span>
<span class="pysrc-more">... </span>                assert has(child.parents(), mptree)
<span class="pysrc-more">... </span>                assert i <span class="pysrc-keyword">in</span> child.parent_indices(mptree)
<span class="pysrc-more">... </span>                <span class="pysrc-comment"># mpcheck sibling methods</span>
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">if</span> i &gt; 0:
<span class="pysrc-more">... </span>                    assert has(child.left_siblings(), mptree[i-1])
<span class="pysrc-more">... </span>                <span class="pysrc-keyword">if</span> i &lt; len(mptree)-1:
<span class="pysrc-more">... </span>                    assert has(child.right_siblings(), mptree[i+1])
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">if</span> print_mptrees:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'ok!'</span>, end=<span class="pysrc-string">' '</span>)
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">for</span> mptree <span class="pysrc-keyword">in</span> print_mptrees: <span class="pysrc-keyword">print</span>(mptree)
<span class="pysrc-more">... </span>    <span class="pysrc-keyword">else</span>:
<span class="pysrc-more">... </span>        <span class="pysrc-keyword">print</span>(<span class="pysrc-string">'ok!'</span>)</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Run our test function on a variety of newly-created trees:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mpcheck(make_mptree(<span class="pysrc-string">'(A)'</span>))
<span class="pysrc-output">ok! (A )</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mpcheck(make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f)) g) h)'</span>))
<span class="pysrc-output">ok! (A (B (C (D ) (E f)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mpcheck(make_mptree(<span class="pysrc-string">'(A (B) (C c) (D d d) (E e e e))'</span>))
<span class="pysrc-output">ok! (A (B ) (C c) (D d d) (E e e e))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mpcheck(make_mptree(<span class="pysrc-string">'(A (B) (C (c)) (D (d) (d)) (E (e) (e) (e)))'</span>))
<span class="pysrc-output">ok! (A (B ) (C (c )) (D (d ) (d )) (E (e ) (e ) (e )))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>subtree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f)) g) h)'</span>)</pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Including some trees that contain multiple parents:</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mpcheck(MultiParentedTree(<span class="pysrc-string">'Z'</span>, [subtree, subtree]))
<span class="pysrc-output">ok! (Z (A (B (C (D ) (E f)) g) h) (A (B (C (D ) (E f)) g) h))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p>Run our test function after performing various tree-modification
operations (n.b., these are the same tests that we ran for
<cite>ParentedTree</cite>, above; thus, none of these trees actually <em>uses</em>
multiple parents.)</p>
<p><strong>__delitem__()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>e = mptree[0,0,1]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[0,0,1]; mpcheck(mptree); mpcheck(e)
<span class="pysrc-output">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (E f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[0,0,0]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (Q p)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[0,1]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (Q p))) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[-1]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (Q p))))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[-100]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: index out of range</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[()]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: The tree position () may not be deleted.</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># With slices:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>b = mptree[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[0:0]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B c) (D e) f g (H i) j (K l))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[:1]; mpcheck(mptree); mpcheck(b)
<span class="pysrc-output">ok! (A (D e) f g (H i) j (K l))</span>
<span class="pysrc-output">ok! (B c)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[-2:]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (D e) f g (H i))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[1:3]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (D e) (H i))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[5:1000]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B c) (D e) f g (H i))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[-2:1000]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B c) (D e) f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[-100:1]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (D e) f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> mptree[1:-2:2]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B c) f (H i) j (K l))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>__setitem__()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>d, e, q = mptree[0,0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0,0,0] = <span class="pysrc-string">'x'</span>; mpcheck(mptree); mpcheck(d)
<span class="pysrc-output">ok! (A (B (C x (E f) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (D )</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0,0,1] = make_mptree(<span class="pysrc-string">'(X (Y z))'</span>); mpcheck(mptree); mpcheck(e)
<span class="pysrc-output">ok! (A (B (C x (X (Y z)) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (E f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[1] = d; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C x (X (Y z)) (Q p)) g) (D ))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[-1] = <span class="pysrc-string">'x'</span>; mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C x (X (Y z)) (Q p)) g) x)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[-100] = <span class="pysrc-string">'y'</span>
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: index out of range</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[()] = make_mptree(<span class="pysrc-string">'(X y)'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: The tree position () may not be assigned to.</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># With slices:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B c) (D e) f g (H i) j (K l))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>b = mptree[0]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0:0] = (<span class="pysrc-string">'x'</span>, make_mptree(<span class="pysrc-string">'(Y)'</span>)); mpcheck(mptree)
<span class="pysrc-output">ok! (A x (Y ) (B c) (D e) f g (H i) j (K l))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[2:6] = (); mpcheck(mptree); mpcheck(b)
<span class="pysrc-output">ok! (A x (Y ) (H i) j (K l))</span>
<span class="pysrc-output">ok! (B c)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[-2:] = (<span class="pysrc-string">'z'</span>, <span class="pysrc-string">'p'</span>); mpcheck(mptree)
<span class="pysrc-output">ok! (A x (Y ) (H i) z p)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[1:3] = [make_mptree(<span class="pysrc-string">'(X)'</span>) <span class="pysrc-keyword">for</span> x <span class="pysrc-keyword">in</span> range(10)]; mpcheck(mptree)
<span class="pysrc-output">ok! (A x (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) (X ) z p)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[5:1000] = []; mpcheck(mptree)
<span class="pysrc-output">ok! (A x (X ) (X ) (X ) (X ))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[-2:1000] = [<span class="pysrc-string">'n'</span>]; mpcheck(mptree)
<span class="pysrc-output">ok! (A x (X ) (X ) n)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[-100:1] = [make_mptree(<span class="pysrc-string">'(U v)'</span>)]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (U v) (X ) (X ) n)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[-1:] = (make_mptree(<span class="pysrc-string">'(X)'</span>) <span class="pysrc-keyword">for</span> x <span class="pysrc-keyword">in</span> range(3)); mpcheck(mptree)
<span class="pysrc-output">ok! (A (U v) (X ) (X ) (X ) (X ) (X ))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[1:-2:2] = [<span class="pysrc-string">'x'</span>, <span class="pysrc-string">'y'</span>]; mpcheck(mptree)
<span class="pysrc-output">ok! (A (U v) x (X ) y (X ) (X ))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>append()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.append(<span class="pysrc-string">'x'</span>); mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.append(make_mptree(<span class="pysrc-string">'(X (Y z))'</span>)); mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x (X (Y z)))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>extend()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.extend([<span class="pysrc-string">'x'</span>, <span class="pysrc-string">'y'</span>, make_mptree(<span class="pysrc-string">'(X (Y z))'</span>)]); mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.extend([]); mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.extend(make_mptree(<span class="pysrc-string">'(X)'</span>) <span class="pysrc-keyword">for</span> x <span class="pysrc-keyword">in</span> range(3)); mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (D ) (E f) (Q p)) g) h x y (X (Y z)) (X ) (X ) (X ))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>insert()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.insert(0, make_mptree(<span class="pysrc-string">'(X (Y z))'</span>)); mpcheck(mptree)
<span class="pysrc-output">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.insert(-1, make_mptree(<span class="pysrc-string">'(X (Y z))'</span>)); mpcheck(mptree)
<span class="pysrc-output">ok! (A (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.insert(-4, make_mptree(<span class="pysrc-string">'(X (Y z))'</span>)); mpcheck(mptree)
<span class="pysrc-output">ok! (A (X (Y z)) (X (Y z)) (B (C (D ) (E f) (Q p)) g) (X (Y z)) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># Note: as with ``list``, inserting at a negative index that</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># gives a position before the start of the list does *not*</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># raise an IndexError exception; it just inserts at 0.</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.insert(-400, make_mptree(<span class="pysrc-string">'(X (Y z))'</span>)); mpcheck(mptree)
<span class="pysrc-output">ok! (A</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  (B (C (D ) (E f) (Q p)) g)</span>
<span class="pysrc-output">  (X (Y z))</span>
<span class="pysrc-output">  h)</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>pop()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0,0].pop(1); mpcheck(mptree)
<span class="pysrc-output">MultiParentedTree('E', ['f'])</span>
<span class="pysrc-output">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0].pop(-1); mpcheck(mptree)
<span class="pysrc-output">'g'</span>
<span class="pysrc-output">ok! (A (B (C (D ) (Q p))) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.pop(); mpcheck(mptree)
<span class="pysrc-output">'h'</span>
<span class="pysrc-output">ok! (A (B (C (D ) (Q p))))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.pop(-100)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">IndexError: index out of range</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<p><strong>remove()</strong></p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (B (C (D) (E f) (Q p)) g) h)'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>e = mptree[0,0,1]
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0,0].remove(mptree[0,0,1]); mpcheck(mptree); mpcheck(e)
<span class="pysrc-output">ok! (A (B (C (D ) (Q p)) g) h)</span>
<span class="pysrc-output">ok! (E f)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0,0].remove(make_mptree(<span class="pysrc-string">'(Q p)'</span>)); mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (D )) g) h)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree[0,0].remove(make_mptree(<span class="pysrc-string">'(Q p)'</span>))
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: MultiParentedTree('Q', ['p']) is not in list</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.remove(<span class="pysrc-string">'h'</span>); mpcheck(mptree)
<span class="pysrc-output">ok! (A (B (C (D )) g))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.remove(<span class="pysrc-string">'h'</span>);
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: 'h' is not in list</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># remove() removes the first subtree that is equal (==) to the</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-comment"># given tree, which may not be the identical tree we give it:</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree = make_mptree(<span class="pysrc-string">'(A (X x) (Y y) (X x))'</span>)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>x1, y, x2 = mptree
<span class="pysrc-prompt">&gt;&gt;&gt; </span>mptree.remove(mptree[-1]); mpcheck(mptree)
<span class="pysrc-output">ok! (A (Y y) (X x))</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>([str(p) <span class="pysrc-keyword">for</span> p <span class="pysrc-keyword">in</span> x1.parents()])
<span class="pysrc-output">[]</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>([str(p) <span class="pysrc-keyword">for</span> p <span class="pysrc-keyword">in</span> x2.parents()])
<span class="pysrc-output">['(A (Y y) (X x))']</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="immutablemultiparentedtree-regression-tests">
<h2>2.5&nbsp;&nbsp;&nbsp;ImmutableMultiParentedTree Regression Tests</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>imptree = ImmutableMultiParentedTree.convert(mptree)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>type(imptree)
<span class="pysrc-output">&lt;class 'nltk.tree.ImmutableMultiParentedTree'&gt;</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> imptree[0]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableMultiParentedTree may not be modified</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>imptree.set_label(<span class="pysrc-string">'newnode'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableMultiParentedTree may not be modified</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
<div class="section" id="probabilistictree-regression-tests">
<h2>2.6&nbsp;&nbsp;&nbsp;ProbabilisticTree Regression Tests</h2>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prtree = ProbabilisticTree(<span class="pysrc-string">&quot;S&quot;</span>, [ProbabilisticTree(<span class="pysrc-string">&quot;NP&quot;</span>, [<span class="pysrc-string">&quot;N&quot;</span>], prob=0.3)], prob=0.6)
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(prtree)
<span class="pysrc-output">(S (NP N)) (p=0.6)</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">import</span> <span class="pysrc-builtin">copy</span>
<span class="pysrc-prompt">&gt;&gt;&gt; </span>prtree == <span class="pysrc-builtin">copy</span>.deepcopy(prtree) == prtree.copy(deep=True) == prtree.copy()
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prtree[0] <span class="pysrc-keyword">is</span> prtree.copy()[0]
<span class="pysrc-output">True</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>prtree[0] <span class="pysrc-keyword">is</span> prtree.copy(deep=True)[0]
<span class="pysrc-output">False</span></pre>
</td>
</tr></table></td></tr>
</table></div>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span>imprtree = ImmutableProbabilisticTree.convert(prtree)
<span class="pysrc-prompt">&gt;&gt;&gt; </span>type(imprtree)
<span class="pysrc-output">&lt;class 'nltk.tree.ImmutableProbabilisticTree'&gt;</span>
<span class="pysrc-output"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">del</span> imprtree[0]
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableProbabilisticTree may not be modified</span>
<span class="pysrc-except"></span><span class="pysrc-prompt">&gt;&gt;&gt; </span>imprtree.set_label(<span class="pysrc-string">'newnode'</span>)
<span class="pysrc-except">Traceback (most recent call last):</span>
<span class="pysrc-except">  . . .</span>
<span class="pysrc-except">ValueError: ImmutableProbabilisticTree may not be modified</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
<div class="section" id="squashed-bugs">
<h1>3&nbsp;&nbsp;&nbsp;Squashed Bugs</h1>
<p>This used to discard the <tt class="doctest"><span class="pre">(B b)</span></tt> subtree (fixed in svn 6270):</p>
<div class="doctest">
<table border="0" cellpadding="0" cellspacing="0" class="doctest" width="95%">
<tr><td class="doctest">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td width="1" class="copybar"
        onclick="javascript:copy_doctest_to_clipboard(this.nextSibling);"
        >&nbsp;</td>
<td class="pysrc"><pre class="doctest">
<span class="pysrc-prompt">&gt;&gt;&gt; </span><span class="pysrc-keyword">print</span>(Tree.fromstring(<span class="pysrc-string">'((A a) (B b))'</span>))
<span class="pysrc-output">( (A a) (B b))</span></pre>
</td>
</tr></table></td></tr>
</table></div>
</div>
</div>
</body>
</html>
