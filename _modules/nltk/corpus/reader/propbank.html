

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>nltk.corpus.reader.propbank &mdash; NLTK 2.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <link rel="top" title="NLTK 2.0 documentation" href="../../../../index.html" />
    <link rel="up" title="nltk.corpus.reader" href="../reader.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <div class="headertitle"><a
          href="../../../../index.html">NLTK 2.0 documentation</a></div>
        <div class="rel">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for nltk.corpus.reader.propbank</h1><div class="highlight"><pre>
<span class="c"># Natural Language Toolkit: PropBank Corpus Reader</span>
<span class="c">#</span>
<span class="c"># Copyright (C) 2001-2012 NLTK Project</span>
<span class="c"># Author: Edward Loper &lt;edloper@gradient.cis.upenn.edu&gt;</span>
<span class="c"># URL: &lt;http://www.nltk.org/&gt;</span>
<span class="c"># For license information, see LICENSE.TXT</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">codecs</span>

<span class="kn">from</span> <span class="nn">nltk.tree</span> <span class="kn">import</span> <span class="n">Tree</span>
<span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span>

<span class="kn">from</span> <span class="nn">util</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">api</span> <span class="kn">import</span> <span class="o">*</span>

<div class="viewcode-block" id="PropbankCorpusReader"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankCorpusReader">[docs]</a><span class="k">class</span> <span class="nc">PropbankCorpusReader</span><span class="p">(</span><span class="n">CorpusReader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Corpus reader for the propbank corpus, which augments the Penn</span>
<span class="sd">    Treebank with information about the predicate argument structure</span>
<span class="sd">    of every verb instance.  The corpus consists of two parts: the</span>
<span class="sd">    predicate-argument annotations themselves, and a set of X{frameset</span>
<span class="sd">    files} which define the argument labels used by the annotations,</span>
<span class="sd">    on a per-verb basis.  Each X{frameset file} contains one or more</span>
<span class="sd">    predicates, such as C{&#39;turn&#39;} or C{&#39;turn_on&#39;}, each of which is</span>
<span class="sd">    divided into coarse-grained word senses called X{rolesets}.  For</span>
<span class="sd">    each X{roleset}, the frameset file provides descriptions of the</span>
<span class="sd">    argument roles, along with examples.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">propfile</span><span class="p">,</span> <span class="n">framefiles</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
                 <span class="n">verbsfile</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_fileid_xform</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">parse_corpus</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param root: The root directory for this corpus.</span>
<span class="sd">        :param propfile: The name of the file containing the predicate-</span>
<span class="sd">            argument annotations (relative to C{root}).</span>
<span class="sd">        :param framefiles: A list or regexp specifying the frameset</span>
<span class="sd">            fileids for this corpus.</span>
<span class="sd">        :param parse_fileid_xform: A transform that should be applied</span>
<span class="sd">            to the fileids in this corpus.  This should be a function</span>
<span class="sd">            of one argument (a fileid) that returns a string (the new</span>
<span class="sd">            fileid).</span>
<span class="sd">        :param parse_corpus: The corpus containing the parse trees</span>
<span class="sd">            corresponding to this corpus.  These parse trees are</span>
<span class="sd">            necessary to resolve the tree pointers used by propbank.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># If framefiles is specified as a regexp, expand it.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">framefiles</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="n">framefiles</span> <span class="o">=</span> <span class="n">find_corpus_fileids</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">framefiles</span><span class="p">)</span>
        <span class="n">framefiles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">framefiles</span><span class="p">)</span>
        <span class="c"># Initialze the corpus reader.</span>
        <span class="n">CorpusReader</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="p">[</span><span class="n">propfile</span><span class="p">,</span> <span class="n">verbsfile</span><span class="p">]</span> <span class="o">+</span> <span class="n">framefiles</span><span class="p">,</span>
                              <span class="n">encoding</span><span class="p">)</span>

        <span class="c"># Record our frame fileids &amp; prop file.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_propfile</span> <span class="o">=</span> <span class="n">propfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_framefiles</span> <span class="o">=</span> <span class="n">framefiles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_verbsfile</span> <span class="o">=</span> <span class="n">verbsfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_fileid_xform</span> <span class="o">=</span> <span class="n">parse_fileid_xform</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parse_corpus</span> <span class="o">=</span> <span class="n">parse_corpus</span>

<div class="viewcode-block" id="PropbankCorpusReader.raw"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankCorpusReader.raw">[docs]</a>    <span class="k">def</span> <span class="nf">raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileids</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: the text contents of the given fileids, as a single string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">fileids</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="n">fileids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileids</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fileids</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span> <span class="n">fileids</span> <span class="o">=</span> <span class="p">[</span><span class="n">fileids</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">concat</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fileids</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="PropbankCorpusReader.instances"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankCorpusReader.instances">[docs]</a>    <span class="k">def</span> <span class="nf">instances</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: a corpus view that acts as a list of</span>
<span class="sd">        L{PropbankInstance} objects, one for each verb in the corpus.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StreamBackedCorpusView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_propfile</span><span class="p">),</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">_read_instance_block</span><span class="p">,</span>
                                      <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_propfile</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="PropbankCorpusReader.lines"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankCorpusReader.lines">[docs]</a>    <span class="k">def</span> <span class="nf">lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: a corpus view that acts as a list of strings, one for</span>
<span class="sd">        each line in the predicate-argument annotation file.  </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StreamBackedCorpusView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_propfile</span><span class="p">),</span>
                                      <span class="n">read_line_block</span><span class="p">,</span>
                                      <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_propfile</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="PropbankCorpusReader.roleset"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankCorpusReader.roleset">[docs]</a>    <span class="k">def</span> <span class="nf">roleset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roleset_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: the xml description for the given roleset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lemma</span> <span class="o">=</span> <span class="n">roleset_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">framefile</span> <span class="o">=</span> <span class="s">&#39;frames/</span><span class="si">%s</span><span class="s">.xml&#39;</span> <span class="o">%</span> <span class="n">lemma</span>
        <span class="k">if</span> <span class="n">framefile</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_framefiles</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Frameset file for </span><span class="si">%s</span><span class="s"> not found&#39;</span> <span class="o">%</span>
                             <span class="n">roleset_id</span><span class="p">)</span>

        <span class="c"># n.b.: The encoding for XML fileids is specified by the file</span>
        <span class="c"># itself; so we ignore self._encoding here.</span>
        <span class="n">etree</span> <span class="o">=</span> <span class="n">ElementTree</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">framefile</span><span class="p">)</span><span class="o">.</span><span class="n">open</span><span class="p">())</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">roleset</span> <span class="ow">in</span> <span class="n">etree</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;predicate/roleset&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">roleset</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">roleset_id</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">roleset</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Roleset </span><span class="si">%s</span><span class="s"> not found in </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span>
                             <span class="p">(</span><span class="n">roleset_id</span><span class="p">,</span> <span class="n">framefile</span><span class="p">))</span>
</div>
<div class="viewcode-block" id="PropbankCorpusReader.verbs"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankCorpusReader.verbs">[docs]</a>    <span class="k">def</span> <span class="nf">verbs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: a corpus view that acts as a list of all verb lemmas</span>
<span class="sd">        in this corpus (from the verbs.txt file).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">StreamBackedCorpusView</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_verbsfile</span><span class="p">),</span>
                                      <span class="n">read_line_block</span><span class="p">,</span>
                                      <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_verbsfile</span><span class="p">))</span>
</div>
    <span class="k">def</span> <span class="nf">_read_instance_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="n">block</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c"># Read 100 at a time.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">block</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">PropbankInstance</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
                    <span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_fileid_xform</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_parse_corpus</span><span class="p">))</span>
                
        <span class="k">return</span> <span class="n">block</span>

<span class="c">######################################################################</span>
<span class="c">#{ Propbank Instance &amp; related datatypes</span>
<span class="c">######################################################################</span>
</div>
<div class="viewcode-block" id="PropbankInstance"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankInstance">[docs]</a><span class="k">class</span> <span class="nc">PropbankInstance</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fileid</span><span class="p">,</span> <span class="n">sentnum</span><span class="p">,</span> <span class="n">wordnum</span><span class="p">,</span> <span class="n">tagger</span><span class="p">,</span> <span class="n">roleset</span><span class="p">,</span>
                 <span class="n">inflection</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span> <span class="n">arguments</span><span class="p">,</span> <span class="n">parse_corpus</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">fileid</span> <span class="o">=</span> <span class="n">fileid</span>
        <span class="sd">&quot;&quot;&quot;The name of the file containing the parse tree for this</span>
<span class="sd">        instance&#39;s sentence.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">sentnum</span> <span class="o">=</span> <span class="n">sentnum</span>
        <span class="sd">&quot;&quot;&quot;The sentence number of this sentence within L{fileid}.</span>
<span class="sd">        Indexing starts from zero.&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span> <span class="o">=</span> <span class="n">wordnum</span>
        <span class="sd">&quot;&quot;&quot;The word number of this instance&#39;s predicate within its</span>
<span class="sd">        containing sentence.  Word numbers are indexed starting from</span>
<span class="sd">        zero, and include traces and other empty parse elements.&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">tagger</span> <span class="o">=</span> <span class="n">tagger</span>
        <span class="sd">&quot;&quot;&quot;An identifier for the tagger who tagged this instance; or</span>
<span class="sd">        C{&#39;gold&#39;} if this is an adjuticated instance.&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">roleset</span> <span class="o">=</span> <span class="n">roleset</span>
        <span class="sd">&quot;&quot;&quot;The name of the roleset used by this instance&#39;s predicate.</span>
<span class="sd">        Use L{propbank.roleset() &lt;PropbankCorpusReader.roleset&gt;} to</span>
<span class="sd">        look up information about the roleset.&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">inflection</span> <span class="o">=</span> <span class="n">inflection</span>
        <span class="sd">&quot;&quot;&quot;A {PropbankInflection} object describing the inflection of</span>
<span class="sd">        this instance&#39;s predicate.&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">predicate</span> <span class="o">=</span> <span class="n">predicate</span>
        <span class="sd">&quot;&quot;&quot;A L{PropbankTreePointer} indicating the position of this</span>
<span class="sd">        instance&#39;s predicate within its containing sentence.&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;A list of tuples (argloc, argid), specifying the location</span>
<span class="sd">        and identifier for each of the predicate&#39;s argument in the</span>
<span class="sd">        containing sentence.  Argument identifiers are strings such as</span>
<span class="sd">        C{&#39;ARG0&#39;} or C{&#39;ARGM-TMP&#39;}.  This list does *not* contain</span>
<span class="sd">        the predicate.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parse_corpus</span> <span class="o">=</span> <span class="n">parse_corpus</span>
        <span class="sd">&quot;&quot;&quot;A corpus reader for the parse trees corresponding to the</span>
<span class="sd">        instances in this propbank corpus.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s">&#39;&lt;PropbankInstance: </span><span class="si">%s</span><span class="s">, sent </span><span class="si">%s</span><span class="s">, word </span><span class="si">%s</span><span class="s">&gt;&#39;</span> <span class="o">%</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fileid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentnum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fileid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sentnum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span><span class="p">,</span>
                                   <span class="bp">self</span><span class="o">.</span><span class="n">tagger</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">roleset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">inflection</span><span class="p">)</span>
        <span class="n">items</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">+</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">predicate</span><span class="p">,</span> <span class="s">&#39;rel&#39;</span><span class="p">),)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">argloc</span><span class="p">,</span> <span class="n">argid</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">items</span><span class="p">):</span>
            <span class="n">s</span> <span class="o">+=</span> <span class="s">&#39; </span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">argloc</span><span class="p">,</span> <span class="n">argid</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">s</span>

    <span class="k">def</span> <span class="nf">_get_tree</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_corpus</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileid</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_corpus</span><span class="o">.</span><span class="n">fileids</span><span class="p">():</span> <span class="k">return</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_corpus</span><span class="o">.</span><span class="n">parsed_sents</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fileid</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">sentnum</span><span class="p">]</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_tree</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        The parse tree corresponding to this instance, or None if</span>
<span class="s">        the corresponding tree is not available.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PropbankInstance.parse"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankInstance.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">parse_fileid_xform</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">parse_corpus</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">:</span> 
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Badly formatted propbank line: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>

        <span class="c"># Divide the line into its basic pieces.</span>
        <span class="p">(</span><span class="n">fileid</span><span class="p">,</span> <span class="n">sentnum</span><span class="p">,</span> <span class="n">wordnum</span><span class="p">,</span>
         <span class="n">tagger</span><span class="p">,</span> <span class="n">roleset</span><span class="p">,</span> <span class="n">inflection</span><span class="p">)</span> <span class="o">=</span> <span class="n">pieces</span><span class="p">[:</span><span class="mi">6</span><span class="p">]</span>
        <span class="n">rel</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pieces</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;-rel&#39;</span><span class="p">)]</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pieces</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;-rel&#39;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rel</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Badly formatted propbank line: </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>

        <span class="c"># Apply the fileid selector, if any.</span>
        <span class="k">if</span> <span class="n">parse_fileid_xform</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">fileid</span> <span class="o">=</span> <span class="n">parse_fileid_xform</span><span class="p">(</span><span class="n">fileid</span><span class="p">)</span>

        <span class="c"># Convert sentence &amp; word numbers to ints.</span>
        <span class="n">sentnum</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">sentnum</span><span class="p">)</span>
        <span class="n">wordnum</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">wordnum</span><span class="p">)</span>

        <span class="c"># Parse the inflection</span>
        <span class="n">inflection</span> <span class="o">=</span> <span class="n">PropbankInflection</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">inflection</span><span class="p">)</span>

        <span class="c"># Parse the predicate location.</span>
        <span class="n">predicate</span> <span class="o">=</span> <span class="n">PropbankTreePointer</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">rel</span><span class="p">[</span><span class="mi">0</span><span class="p">][:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span>

        <span class="c"># Parse the arguments.</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">argloc</span><span class="p">,</span> <span class="n">argid</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span><span class="n">PropbankTreePointer</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">argloc</span><span class="p">),</span> <span class="n">argid</span><span class="p">)</span> <span class="p">)</span>

        <span class="c"># Put it all together.</span>
        <span class="k">return</span> <span class="n">PropbankInstance</span><span class="p">(</span><span class="n">fileid</span><span class="p">,</span> <span class="n">sentnum</span><span class="p">,</span> <span class="n">wordnum</span><span class="p">,</span> <span class="n">tagger</span><span class="p">,</span>
                                <span class="n">roleset</span><span class="p">,</span> <span class="n">inflection</span><span class="p">,</span> <span class="n">predicate</span><span class="p">,</span>
                                <span class="n">arguments</span><span class="p">,</span> <span class="n">parse_corpus</span><span class="p">)</span>
</div></div>
<div class="viewcode-block" id="PropbankPointer"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankPointer">[docs]</a><span class="k">class</span> <span class="nc">PropbankPointer</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A pointer used by propbank to identify one or more constituents in</span>
<span class="sd">    a parse tree.  C{PropbankPointer} is an abstract base class with</span>
<span class="sd">    three concrete subclasses:</span>

<span class="sd">      - L{PropbankTreePointer} is used to point to single constituents.</span>
<span class="sd">      - L{PropbankSplitTreePointer} is used to point to &#39;split&#39;</span>
<span class="sd">        constituents, which consist of a sequence of two or more</span>
<span class="sd">        C{PropbankTreePointer}s.</span>
<span class="sd">      - L{PropbankChainTreePointer} is used to point to entire trace</span>
<span class="sd">        chains in a tree.  It consists of a sequence of pieces, which</span>
<span class="sd">        can be C{PropbankTreePointer}s or C{PropbankSplitTreePointer}s.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span> <span class="o">==</span> <span class="n">PropbankPoitner</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span><span class="s">&#39;PropbankPointer is an abstract base class&#39;</span><span class="p">)</span>
            </div>
<div class="viewcode-block" id="PropbankChainTreePointer"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankChainTreePointer">[docs]</a><span class="k">class</span> <span class="nc">PropbankChainTreePointer</span><span class="p">(</span><span class="n">PropbankPointer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pieces</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pieces</span> <span class="o">=</span> <span class="n">pieces</span>
        <span class="sd">&quot;&quot;&quot;A list of the pieces that make up this chain.  Elements may</span>
<span class="sd">           be either L{PropbankSplitTreePointer}s or</span>
<span class="sd">           L{PropbankTreePointer}s.&quot;&quot;&quot;</span>
        
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;*&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pieces</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;&lt;PropbankChainTreePointer: </span><span class="si">%s</span><span class="s">&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span>
<div class="viewcode-block" id="PropbankChainTreePointer.select"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankChainTreePointer.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tree</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Parse tree not avaialable&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Tree</span><span class="p">(</span><span class="s">&#39;*CHAIN*&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pieces</span><span class="p">])</span>
</div></div>
<div class="viewcode-block" id="PropbankSplitTreePointer"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankSplitTreePointer">[docs]</a><span class="k">class</span> <span class="nc">PropbankSplitTreePointer</span><span class="p">(</span><span class="n">PropbankPointer</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pieces</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pieces</span> <span class="o">=</span> <span class="n">pieces</span>
        <span class="sd">&quot;&quot;&quot;A list of the pieces that make up this chain.  Elements are</span>
<span class="sd">           all L{PropbankTreePointer}s.&quot;&quot;&quot;</span>
        
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pieces</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;&lt;PropbankSplitTreePointer: </span><span class="si">%s</span><span class="s">&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span>
<div class="viewcode-block" id="PropbankSplitTreePointer.select"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankSplitTreePointer.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tree</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Parse tree not avaialable&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Tree</span><span class="p">(</span><span class="s">&#39;*SPLIT*&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pieces</span><span class="p">])</span>
</div></div>
<div class="viewcode-block" id="PropbankTreePointer"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankTreePointer">[docs]</a><span class="k">class</span> <span class="nc">PropbankTreePointer</span><span class="p">(</span><span class="n">PropbankPointer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    wordnum:height*wordnum:height*...</span>
<span class="sd">    wordnum:height,</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wordnum</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span> <span class="o">=</span> <span class="n">wordnum</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PropbankTreePointer.parse"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankTreePointer.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="c"># Deal with chains (xx*yy*zz)</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PropbankChainTreePointer</span><span class="p">([</span><span class="n">PropbankTreePointer</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
                                              <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">pieces</span><span class="p">])</span>

        <span class="c"># Deal with split args (xx,yy,zz)</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;,&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">PropbankSplitTreePointer</span><span class="p">([</span><span class="n">PropbankTreePointer</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
                                             <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">pieces</span><span class="p">])</span>

        <span class="c"># Deal with normal pointers.</span>
        <span class="n">pieces</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pieces</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;bad propbank pointer </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PropbankTreePointer</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">pieces</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;PropbankTreePointer(</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__cmp__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">while</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="p">(</span><span class="n">PropbankChainTreePointer</span><span class="p">,</span>
                                 <span class="n">PropbankSplitTreePointer</span><span class="p">)):</span>
            <span class="n">other</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">pieces</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">PropbankTreePointer</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">other</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">cmp</span><span class="p">(</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span><span class="p">,</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
                    <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">wordnum</span><span class="p">,</span> <span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">height</span><span class="p">)</span> <span class="p">)</span>

<div class="viewcode-block" id="PropbankTreePointer.select"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankTreePointer.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">tree</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Parse tree not avaialable&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tree</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">treepos</span><span class="p">(</span><span class="n">tree</span><span class="p">)]</span>
</div>
<div class="viewcode-block" id="PropbankTreePointer.treepos"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankTreePointer.treepos">[docs]</a>    <span class="k">def</span> <span class="nf">treepos</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tree</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert this pointer to a standard &#39;tree position&#39; pointer,</span>
<span class="sd">        given that it points to the given tree.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tree</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Parse tree not avaialable&#39;</span><span class="p">)</span>
        <span class="n">stack</span> <span class="o">=</span> <span class="p">[</span><span class="n">tree</span><span class="p">]</span>
        <span class="n">treepos</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">wordnum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c">#print treepos</span>
            <span class="c">#print stack[-1]</span>
            <span class="c"># tree node:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">Tree</span><span class="p">):</span>
                <span class="c"># Select the next child.</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">treepos</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">stack</span><span class="p">):</span>
                    <span class="n">treepos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">treepos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="c"># Update the stack.</span>
                <span class="k">if</span> <span class="n">treepos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
                    <span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="n">treepos</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c"># End of node&#39;s child list: pop up a level.</span>
                    <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
                    <span class="n">treepos</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="c"># word node:</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">wordnum</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">wordnum</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">treepos</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">treepos</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">wordnum</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</div></div>
<div class="viewcode-block" id="PropbankInflection"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankInflection">[docs]</a><span class="k">class</span> <span class="nc">PropbankInflection</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c">#{ Inflection Form </span>
    <span class="n">INFINITIVE</span> <span class="o">=</span> <span class="s">&#39;i&#39;</span>
    <span class="n">GERUND</span> <span class="o">=</span> <span class="s">&#39;g&#39;</span>
    <span class="n">PARTICIPLE</span> <span class="o">=</span> <span class="s">&#39;p&#39;</span>
    <span class="n">FINITE</span> <span class="o">=</span> <span class="s">&#39;v&#39;</span>
    <span class="c">#{ Inflection Tense</span>
    <span class="n">FUTURE</span> <span class="o">=</span> <span class="s">&#39;f&#39;</span>
    <span class="n">PAST</span> <span class="o">=</span> <span class="s">&#39;p&#39;</span>
    <span class="n">PRESENT</span> <span class="o">=</span> <span class="s">&#39;n&#39;</span>
    <span class="c">#{ Inflection Aspect</span>
    <span class="n">PERFECT</span> <span class="o">=</span> <span class="s">&#39;p&#39;</span>
    <span class="n">PROGRESSIVE</span> <span class="o">=</span> <span class="s">&#39;o&#39;</span>
    <span class="n">PERFECT_AND_PROGRESSIVE</span> <span class="o">=</span> <span class="s">&#39;b&#39;</span>
    <span class="c">#{ Inflection Person</span>
    <span class="n">THIRD_PERSON</span> <span class="o">=</span> <span class="s">&#39;3&#39;</span>
    <span class="c">#{ Inflection Voice</span>
    <span class="n">ACTIVE</span> <span class="o">=</span> <span class="s">&#39;a&#39;</span>
    <span class="n">PASSIVE</span> <span class="o">=</span> <span class="s">&#39;p&#39;</span>
    <span class="c">#{ Inflection</span>
    <span class="n">NONE</span> <span class="o">=</span> <span class="s">&#39;-&#39;</span>
    <span class="c">#}</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">form</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">tense</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">person</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">voice</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">form</span> <span class="o">=</span> <span class="n">form</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tense</span> <span class="o">=</span> <span class="n">tense</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspect</span> <span class="o">=</span> <span class="n">aspect</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">person</span> <span class="o">=</span> <span class="n">person</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">voice</span> <span class="o">=</span> <span class="n">voice</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">form</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">tense</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">aspect</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">person</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">voice</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">&#39;&lt;PropbankInflection: </span><span class="si">%s</span><span class="s">&gt;&#39;</span> <span class="o">%</span> <span class="bp">self</span>

    <span class="n">_VALIDATE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;[igpv\-][fpn\-][pob\-][3\-][ap\-]$&#39;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="PropbankInflection.parse"><a class="viewcode-back" href="../../../../api/nltk.corpus.reader.html#nltk.corpus.reader.propbank.PropbankInflection.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="nb">basestring</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s">&#39;expected a string&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">5</span> <span class="ow">or</span>
            <span class="ow">not</span> <span class="n">PropbankInflection</span><span class="o">.</span><span class="n">_VALIDATE</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">s</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;Bad propbank inflection string </span><span class="si">%r</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">s</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">PropbankInflection</span><span class="p">(</span><span class="o">*</span><span class="n">s</span><span class="p">)</span>
</pre></div></div></div>

          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../news.html">NLTK News</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../../../../search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="../../../../genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2011, Steven Bird.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>